
/* /web/static/src/js/services/session.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web.session',function(require){"use strict";var Session=require('web.Session');var modules=odoo._modules;var session=new Session(undefined,undefined,{modules:modules,use_cors:false});session.is_bound=session.session_bind();return session;});;

/* /web/static/src/js/public/public_crash_manager.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web.PublicCrashManager',function(require){"use strict";const core=require('web.core');const CrashManager=require('web.CrashManager').CrashManager;const PublicCrashManager=CrashManager.extend({_displayWarning(message,title,options){this.displayNotification(Object.assign({},options,{title,message,sticky:true,}));},});core.serviceRegistry.add('crash_manager',PublicCrashManager);return{CrashManager:PublicCrashManager,};});;

/* /web/static/src/js/public/public_notification.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web.public.Notification',function(require){'use strict';var Notification=require('web.Notification');Notification.include({xmlDependencies:['/web/static/src/xml/notification.xml'],});});;

/* /web/static/src/js/public/public_root.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web.public.root',function(require){'use strict';var ajax=require('web.ajax');var dom=require('web.dom');var ServiceProviderMixin=require('web.ServiceProviderMixin');var session=require('web.session');var utils=require('web.utils');var publicWidget=require('web.public.widget');var publicRootRegistry=new publicWidget.RootWidgetRegistry();function getLang(){var html=document.documentElement;return(html.getAttribute('lang')||'en_US').replace('-','_');}
var lang=utils.get_cookie('frontend_lang')||getLang();var localeDef=ajax.loadJS('/web/webclient/locale/'+lang.replace('-','_'));window.addEventListener('unhandledrejection',function(ev){if(!ev.reason||!(ev.reason instanceof Error)){ev.stopPropagation();ev.stopImmediatePropagation();ev.preventDefault();}});var PublicRoot=publicWidget.RootWidget.extend(ServiceProviderMixin,{events:_.extend({},publicWidget.RootWidget.prototype.events||{},{'submit .js_website_submit_form':'_onWebsiteFormSubmit','click .js_disable_on_click':'_onDisableOnClick',}),custom_events:_.extend({},publicWidget.RootWidget.prototype.custom_events||{},{'context_get':'_onContextGet','main_object_request':'_onMainObjectRequest','widgets_start_request':'_onWidgetsStartRequest','widgets_stop_request':'_onWidgetsStopRequest',}),init:function(){this._super.apply(this,arguments);ServiceProviderMixin.init.call(this);this.publicWidgets=[];},willStart:function(){return Promise.all([this._super.apply(this,arguments),session.is_bound,localeDef]);},start:function(){var defs=[this._super.apply(this,arguments),this._startWidgets()];this.$(".o_image[data-mimetype^='image']").each(function(){var $img=$(this);if(/gif|jpe|jpg|png/.test($img.data('mimetype'))&&$img.data('src')){$img.css('background-image',"url('"+$img.data('src')+"')");}});if(window.location.hash.indexOf("scrollTop=")>-1){this.el.scrollTop=+window.location.hash.match(/scrollTop=([0-9]+)/)[1];}
if($.fn.placeholder){$('input, textarea').placeholder();}
return Promise.all(defs);},_call_service:function(ev){if(ev.data.service==='ajax'&&ev.data.method==='rpc'){var route=ev.data.args[0];if(_.str.startsWith(route,'/web/dataset/call_kw/')){var params=ev.data.args[1];var options=ev.data.args[2];var noContextKeys=undefined;if(options){noContextKeys=options.noContextKeys;ev.data.args[2]=_.omit(options,'noContextKeys');}
params.kwargs.context=_computeContext.call(this,params.kwargs.context,noContextKeys);}}else if(ev.data.service==='ajax'&&ev.data.method==='loadLibs'){ev.data.args[1]=_computeContext.call(this,ev.data.args[1]);}
return ServiceProviderMixin._call_service.apply(this,arguments);function _computeContext(context,noContextKeys){context=_.extend({},this._getContext(),context);if(noContextKeys){context=_.omit(context,noContextKeys);}
return JSON.parse(JSON.stringify(context));}},_getContext:function(context){return _.extend({'lang':getLang(),},context||{});},_getExtraContext:function(context){return this._getContext(context);},_getPublicWidgetsRegistry:function(options){return publicWidget.registry;},_getRegistry:function(){return publicRootRegistry;},_startWidgets:function($from,options){var self=this;if($from===undefined){$from=this.$('#wrapwrap');if(!$from.length){$from=this.$el;}}
if(options===undefined){options={};}
this._stopWidgets($from);var defs=_.map(this._getPublicWidgetsRegistry(options),function(PublicWidget){var selector=PublicWidget.prototype.selector||'';var $target=dom.cssFind($from,selector,true);var defs=_.map($target,function(el){var widget=new PublicWidget(self,options);self.publicWidgets.push(widget);return widget.attachTo($(el));});return Promise.all(defs);});return Promise.all(defs);},_stopWidgets:function($from){var removedWidgets=_.map(this.publicWidgets,function(widget){if(!$from||$from.filter(widget.el).length||$from.find(widget.el).length){widget.destroy();return widget;}
return null;});this.publicWidgets=_.difference(this.publicWidgets,removedWidgets);},_onContextGet:function(ev){if(ev.data.extra){ev.data.callback(this._getExtraContext(ev.data.context));}else{ev.data.callback(this._getContext(ev.data.context));}},_onMainObjectRequest:function(ev){var repr=$('html').data('main-object');var m=repr.match(/(.+)\((\d+),(.*)\)/);ev.data.callback({model:m[1],id:m[2]|0,});},_onWidgetsStartRequest:function(ev){this._startWidgets(ev.data.$target,ev.data.options).then(ev.data.onSuccess).guardedCatch(ev.data.onFailure);},_onWidgetsStopRequest:function(ev){this._stopWidgets(ev.data.$target);},_onWebsiteFormSubmit:function(ev){var $buttons=$(ev.currentTarget).find('button[type="submit"], a.a-submit');_.each($buttons,function(btn){var $btn=$(btn);$btn.html('<i class="fa fa-spinner fa-spin"></i> '+$btn.text());$btn.prop('disabled',true);});},_onDisableOnClick:function(ev){$(ev.currentTarget).addClass('disabled');},});return{PublicRoot:PublicRoot,publicRootRegistry:publicRootRegistry,};});;

/* /website/static/src/js/content/website_root_instance.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('root.widget',function(require){'use strict';var lazyloader=require('web.public.lazyloader');var websiteRootData=require('website.root');var websiteRoot=new websiteRootData.WebsiteRoot(null);return lazyloader.allScriptsLoaded.then(function(){return websiteRoot.attachTo(document.body).then(function(){return websiteRoot;});});});;

/* /web/static/src/js/public/public_widget.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web.public.widget',function(require){'use strict';var Class=require('web.Class');var dom=require('web.dom');var mixins=require('web.mixins');var session=require('web.session');var Widget=require('web.Widget');var RootWidget=Widget.extend({custom_events:_.extend({},Widget.prototype.custom_events||{},{'registry_update':'_onRegistryUpdate','get_session':'_onGetSession',}),init:function(){this._super.apply(this,arguments);this._widgets=[];this._listenToUpdates=false;this._getRegistry().setParent(this);},start:function(){var defs=[this._super.apply(this,arguments)];defs.push(this._attachComponents());this._listenToUpdates=true;return Promise.all(defs);},_attachComponent:function(childInfo,$from){var self=this;var $elements=dom.cssFind($from||this.$el,childInfo.selector);var defs=_.map($elements,function(element){var w=new childInfo.Widget(self);self._widgets.push(w);return w.attachTo(element);});return Promise.all(defs);},_attachComponents:function($from){var self=this;var childInfos=this._getRegistry().get();var defs=_.map(childInfos,function(childInfo){return self._attachComponent(childInfo,$from);});return Promise.all(defs);},_getRegistry:function(){},_onGetSession:function(event){if(event.data.callback){event.data.callback(session);}},_onRegistryUpdate:function(ev){ev.stopPropagation();if(this._listenToUpdates){this._attachComponent(ev.data);}},});var RootWidgetRegistry=Class.extend(mixins.EventDispatcherMixin,{init:function(){mixins.EventDispatcherMixin.init.call(this);this._registry=[];},add:function(Widget,selector){var registryInfo={Widget:Widget,selector:selector,};this._registry.push(registryInfo);this.trigger_up('registry_update',registryInfo);},get:function(){return this._registry;},});var PublicWidget=Widget.extend({selector:false,events:{},init:function(parent,options){this._super.apply(this,arguments);this.options=options||{};},destroy:function(){if(this.selector){var $oldel=this.$el;this.setElement(null);}
this._super.apply(this,arguments);if(this.selector){this.$el=$oldel;this.el=$oldel[0];this.$target=this.$el;this.target=this.el;}},setElement:function(){this._super.apply(this,arguments);if(this.selector){this.$target=this.$el;this.target=this.el;}},_delegateEvents:function(){var self=this;var originalEvents=this.events;var events={};_.each(this.events,function(method,event){if(typeof method!=='string'){events[event]=method;return;}
var methodOptions=method.split(' ');if(methodOptions.length<=1){events[event]=method;return;}
var isAsync=_.contains(methodOptions,'async');if(!isAsync){events[event]=method;return;}
method=self.proxy(methodOptions[methodOptions.length-1]);if(_.str.startsWith(event,'click')){method=dom.makeButtonHandler(method);}else{method=dom.makeAsyncHandler(method);}
events[event]=method;});this.events=events;this._super.apply(this,arguments);this.events=originalEvents;},_getContext:function(extra,extraContext){var context;this.trigger_up('context_get',{extra:extra||false,context:extraContext,callback:function(ctx){context=ctx;},});return context;},});var registry={};registry._fixAppleCollapse=PublicWidget.extend({selector:'div[data-toggle="collapse"]',events:{'click':function(){},},});return{RootWidget:RootWidget,RootWidgetRegistry:RootWidgetRegistry,Widget:PublicWidget,registry:registry,};});;

/* /web_editor/static/src/js/frontend/loader.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web_editor.loader',function(require){'use strict';var Wysiwyg=require('web_editor.wysiwyg.root');function load(parent,textarea,options){var loading=textarea.nextElementSibling;if(loading&&!loading.classList.contains('o_wysiwyg_loading')){loading=null;}
if(!textarea.value.match(/\S/)){textarea.value='<p><br/></p>';}
var wysiwyg=new Wysiwyg(parent,options);return wysiwyg.attachTo(textarea).then(()=>{if(loading){loading.parentNode.removeChild(loading);}
return wysiwyg;});}
return{load:load,};});;

/* /portal/static/src/js/portal.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('portal.portal',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.portalDetails=publicWidget.Widget.extend({selector:'.o_portal_details',events:{'change select[name="country_id"]':'_onCountryChange',},start:function(){var def=this._super.apply(this,arguments);this.$state=this.$('select[name="state_id"]');this.$stateOptions=this.$state.filter(':enabled').find('option:not(:first)');this._adaptAddressForm();return def;},_adaptAddressForm:function(){var $country=this.$('select[name="country_id"]');var countryID=($country.val()||0);this.$stateOptions.detach();var $displayedState=this.$stateOptions.filter('[data-country_id='+countryID+']');var nb=$displayedState.appendTo(this.$state).show().length;this.$state.parent().toggle(nb>=1);},_onCountryChange:function(){this._adaptAddressForm();},});publicWidget.registry.portalSearchPanel=publicWidget.Widget.extend({selector:'.o_portal_search_panel',events:{'click .search-submit':'_onSearchSubmitClick','click .dropdown-item':'_onDropdownItemClick','keyup input[name="search"]':'_onSearchInputKeyup',},start:function(){var def=this._super.apply(this,arguments);this._adaptSearchLabel(this.$('.dropdown-item.active'));return def;},_adaptSearchLabel:function(elem){var $label=$(elem).clone();$label.find('span.nolabel').remove();this.$('input[name="search"]').attr('placeholder',$label.text().trim());},_search:function(){var search=$.deparam(window.location.search.substring(1));search['search_in']=this.$('.dropdown-item.active').attr('href').replace('#','');search['search']=this.$('input[name="search"]').val();window.location.search=$.param(search);},_onSearchSubmitClick:function(){this._search();},_onDropdownItemClick:function(ev){ev.preventDefault();var $item=$(ev.currentTarget);$item.closest('.dropdown-menu').find('.dropdown-item').removeClass('active');$item.addClass('active');this._adaptSearchLabel(ev.currentTarget);},_onSearchInputKeyup:function(ev){if(ev.keyCode===$.ui.keyCode.ENTER){this._search();}},});});;

/* /portal/static/src/js/portal_chatter.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('portal.chatter',function(require){'use strict';var core=require('web.core');var publicWidget=require('web.public.widget');var time=require('web.time');var portalComposer=require('portal.composer');var qweb=core.qweb;var _t=core._t;var PortalChatter=publicWidget.Widget.extend({template:'portal.Chatter',xmlDependencies:['/portal/static/src/xml/portal_chatter.xml'],events:{"click .o_portal_chatter_pager_btn":'_onClickPager',},init:function(parent,options){var self=this;this.options={};this._super.apply(this,arguments);_.each(options,function(val,key){self.options[_.str.underscored(key)]=val;});this.options=_.defaults(this.options,{'allow_composer':true,'display_composer':false,'csrf_token':odoo.csrf_token,'message_count':0,'pager_step':10,'pager_scope':5,'pager_start':1,'is_user_public':true,'is_user_publisher':false,'hash':false,'pid':false,'domain':[],});this.set('messages',[]);this.set('message_count',this.options['message_count']);this.set('pager',{});this.set('domain',this.options['domain']);this._currentPage=this.options['pager_start'];},willStart:function(){return Promise.all([this._super.apply(this,arguments),this._chatterInit()]);},start:function(){this.on("change:messages",this,this._renderMessages);this.on("change:message_count",this,function(){this._renderMessageCount();this.set('pager',this._pager(this._currentPage));});this.on("change:pager",this,this._renderPager);this.on("change:domain",this,this._onChangeDomain);this.set('message_count',this.options['message_count']);this.set('messages',this.preprocessMessages(this.result['messages']));var defs=[];defs.push(this._super.apply(this,arguments));if(this.options['display_composer']){this._composer=new portalComposer.PortalComposer(this,this.options);defs.push(this._composer.replace(this.$('.o_portal_chatter_composer')));}
return Promise.all(defs);},messageFetch:function(domain){var self=this;return this._rpc({route:'/mail/chatter_fetch',params:self._messageFetchPrepareParams(),}).then(function(result){self.set('messages',self.preprocessMessages(result['messages']));self.set('message_count',result['message_count']);});},preprocessMessages:function(messages){_.each(messages,function(m){m['author_avatar_url']=_.str.sprintf('/web/image/%s/%s/author_avatar/50x50','mail.message',m.id);m['published_date_str']=_.str.sprintf(_t('Published on %s'),moment(time.str_to_datetime(m.date)).format('MMMM Do YYYY, h:mm:ss a'));});return messages;},_chatterInit:function(){var self=this;return this._rpc({route:'/mail/chatter_init',params:this._messageFetchPrepareParams()}).then(function(result){self.result=result;self.options=_.extend(self.options,self.result['options']||{});return result;});},_changeCurrentPage:function(page,domain){this._currentPage=page;var d=domain?domain:_.clone(this.get('domain'));this.set('domain',d);},_messageFetchPrepareParams:function(){var self=this;var data={'res_model':this.options['res_model'],'res_id':this.options['res_id'],'limit':this.options['pager_step'],'offset':(this._currentPage-1)*this.options['pager_step'],'allow_composer':this.options['allow_composer'],};if(self.options['token']){data['token']=self.options['token'];}
if(this.get('domain')){data['domain']=this.get('domain');}
return data;},_pager:function(page){page=page||1;var total=this.get('message_count');var scope=this.options['pager_scope'];var step=this.options['pager_step'];var pageCount=Math.ceil(parseFloat(total)/step);page=Math.max(1,Math.min(parseInt(page),pageCount));scope-=1;var pmin=Math.max(page-parseInt(Math.floor(scope/2)),1);var pmax=Math.min(pmin+scope,pageCount);if(pmax-scope>0){pmin=pmax-scope;}else{pmin=1;}
var pages=[];_.each(_.range(pmin,pmax+1),function(index){pages.push(index);});return{"page_count":pageCount,"offset":(page-1)*step,"page":page,"page_start":pmin,"page_previous":Math.max(pmin,page-1),"page_next":Math.min(pmax,page+1),"page_end":pmax,"pages":pages};},_renderMessages:function(){this.$('.o_portal_chatter_messages').html(qweb.render("portal.chatter_messages",{widget:this}));},_renderMessageCount:function(){this.$('.o_message_counter').replaceWith(qweb.render("portal.chatter_message_count",{widget:this}));},_renderPager:function(){this.$('.o_portal_chatter_pager').replaceWith(qweb.render("portal.pager",{widget:this}));},_onChangeDomain:function(){var self=this;this.messageFetch().then(function(){var p=self._currentPage;self.set('pager',self._pager(p));});},_onClickPager:function(ev){ev.preventDefault();var page=$(ev.currentTarget).data('page');this._changeCurrentPage(page);},});publicWidget.registry.portalChatter=publicWidget.Widget.extend({selector:'.o_portal_chatter',start:function(){var self=this;var defs=[this._super.apply(this,arguments)];var chatter=new PortalChatter(this,this.$el.data());defs.push(chatter.appendTo(this.$el));return Promise.all(defs).then(function(){if(window.location.hash==='#'+self.$el.attr('id')){$('html, body').scrollTop(self.$el.offset().top);}});},});return{PortalChatter:PortalChatter,};});;

/* /portal/static/src/js/portal_composer.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('portal.composer',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var publicWidget=require('web.public.widget');var qweb=core.qweb;var _t=core._t;var PortalComposer=publicWidget.Widget.extend({template:'portal.Composer',xmlDependencies:['/portal/static/src/xml/portal_chatter.xml'],events:{'change .o_portal_chatter_file_input':'_onFileInputChange','click .o_portal_chatter_attachment_btn':'_onAttachmentButtonClick','click .o_portal_chatter_attachment_delete':'async _onAttachmentDeleteClick','click .o_portal_chatter_composer_btn':'async _onSubmitButtonClick',},init:function(parent,options){this._super.apply(this,arguments);this.options=_.defaults(options||{},{'allow_composer':true,'display_composer':false,'csrf_token':odoo.csrf_token,'token':false,'res_model':false,'res_id':false,});this.attachments=[];},start:function(){var self=this;this.$attachmentButton=this.$('.o_portal_chatter_attachment_btn');this.$fileInput=this.$('.o_portal_chatter_file_input');this.$sendButton=this.$('.o_portal_chatter_composer_btn');this.$attachments=this.$('.o_portal_chatter_composer_form .o_portal_chatter_attachments');this.$attachmentIds=this.$('.o_portal_chatter_attachment_ids');this.$attachmentTokens=this.$('.o_portal_chatter_attachment_tokens');return this._super.apply(this,arguments).then(function(){if(self.options.default_attachment_ids){self.attachments=self.options.default_attachment_ids||[];_.each(self.attachments,function(attachment){attachment.state='done';});self._updateAttachments();}
return Promise.resolve();});},_onAttachmentButtonClick:function(){this.$fileInput.click();},_onAttachmentDeleteClick:function(ev){var self=this;var attachmentId=$(ev.currentTarget).closest('.o_portal_chatter_attachment').data('id');var accessToken=_.find(this.attachments,{'id':attachmentId}).access_token;ev.preventDefault();ev.stopPropagation();this.$sendButton.prop('disabled',true);return this._rpc({route:'/portal/attachment/remove',params:{'attachment_id':attachmentId,'access_token':accessToken,},}).then(function(){self.attachments=_.reject(self.attachments,{'id':attachmentId});self._updateAttachments();self.$sendButton.prop('disabled',false);});},_onFileInputChange:function(){var self=this;this.$sendButton.prop('disabled',true);return Promise.all(_.map(this.$fileInput[0].files,function(file){return new Promise(function(resolve,reject){var data={'name':file.name,'file':file,'res_id':self.options.res_id,'res_model':self.options.res_model,'access_token':self.options.token,};ajax.post('/portal/attachment/add',data).then(function(attachment){attachment.state='pending';self.attachments.push(attachment);self._updateAttachments();resolve();}).guardedCatch(function(error){self.displayNotification({title:_t("Something went wrong."),message:_.str.sprintf(_t("The file <strong>%s</strong> could not be saved."),_.escape(file.name)),type:'warning',sticky:true,});resolve();});});})).then(function(){self.$fileInput[0].value=null;self.$sendButton.prop('disabled',false);});},_onSubmitButtonClick:function(){return new Promise(function(resolve,reject){});},_updateAttachments:function(){this.$attachmentIds.val(_.pluck(this.attachments,'id'));this.$attachmentTokens.val(_.pluck(this.attachments,'access_token'));this.$attachments.html(qweb.render('portal.Chatter.Attachments',{attachments:this.attachments,showDelete:true,}));},});return{PortalComposer:PortalComposer,};});;

/* /portal/static/src/js/portal_signature.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('portal.signature_form',function(require){'use strict';var core=require('web.core');var publicWidget=require('web.public.widget');var NameAndSignature=require('web.name_and_signature').NameAndSignature;var qweb=core.qweb;var _t=core._t;var SignatureForm=publicWidget.Widget.extend({template:'portal.portal_signature',xmlDependencies:['/portal/static/src/xml/portal_signature.xml'],events:{'click .o_portal_sign_submit':'async _onClickSignSubmit',},custom_events:{'signature_changed':'_onChangeSignature',},init:function(parent,options){this._super.apply(this,arguments);this.csrf_token=odoo.csrf_token;this.callUrl=options.callUrl||'';this.rpcParams=options.rpcParams||{};this.sendLabel=options.sendLabel||_t("Accept & Sign");this.nameAndSignature=new NameAndSignature(this,options.nameAndSignatureOptions||{});},start:function(){var self=this;this.$confirm_btn=this.$('.o_portal_sign_submit');this.$controls=this.$('.o_portal_sign_controls');var subWidgetStart=this.nameAndSignature.replace(this.$('.o_web_sign_name_and_signature'));return Promise.all([subWidgetStart,this._super.apply(this,arguments)]).then(function(){self.nameAndSignature.resetSignature();});},focusName:function(){this.nameAndSignature.focusName();},resetSignature:function(){return this.nameAndSignature.resetSignature();},_onClickSignSubmit:function(ev){var self=this;ev.preventDefault();if(!this.nameAndSignature.validateSignature()){return;}
var name=this.nameAndSignature.getName();var signature=this.nameAndSignature.getSignatureImage()[1];return this._rpc({route:this.callUrl,params:_.extend(this.rpcParams,{'name':name,'signature':signature,}),}).then(function(data){if(data.error){self.$('.o_portal_sign_error_msg').remove();self.$controls.prepend(qweb.render('portal.portal_signature_error',{widget:data}));}else if(data.success){var $success=qweb.render('portal.portal_signature_success',{widget:data});self.$el.empty().append($success);}
if(data.force_refresh){if(data.redirect_url){window.location=data.redirect_url;}else{window.location.reload();}
return new Promise(function(){});}});},_onChangeSignature:function(){var isEmpty=this.nameAndSignature.isSignatureEmpty();this.$confirm_btn.prop('disabled',isEmpty);},});publicWidget.registry.SignatureForm=publicWidget.Widget.extend({selector:'.o_portal_signature_form',start:function(){var hasBeenReset=false;var callUrl=this.$el.data('call-url');var nameAndSignatureOptions={defaultName:this.$el.data('default-name'),mode:this.$el.data('mode'),displaySignatureRatio:this.$el.data('signature-ratio'),signatureType:this.$el.data('signature-type'),};var sendLabel=this.$el.data('send-label');var form=new SignatureForm(this,{callUrl:callUrl,nameAndSignatureOptions:nameAndSignatureOptions,sendLabel:sendLabel,});this.$el.closest('.modal').on('shown.bs.modal',function(ev){if(!hasBeenReset){hasBeenReset=true;form.resetSignature();}else{form.focusName();}});return Promise.all([this._super.apply(this,arguments),form.appendTo(this.$el)]);},});return{SignatureForm:SignatureForm,};});;

/* /portal/static/src/js/portal_sidebar.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('portal.PortalSidebar',function(require){'use strict';var core=require('web.core');var publicWidget=require('web.public.widget');var time=require('web.time');var session=require('web.session');var _t=core._t;var PortalSidebar=publicWidget.Widget.extend({start:function(){this._setDelayLabel();return this._super.apply(this,arguments);},_setDelayLabel:function(){var $sidebarTimeago=this.$el.find('.o_portal_sidebar_timeago');_.each($sidebarTimeago,function(el){var dateTime=moment(time.auto_str_to_date($(el).attr('datetime'))),today=moment().startOf('day'),diff=dateTime.diff(today,'days',true),displayStr;session.is_bound.then(function(){if(diff===0){displayStr=_t('Due today');}else if(diff>0){displayStr=_.str.sprintf(_t('Due in %1d days'),Math.abs(diff));}else{displayStr=_.str.sprintf(_t('%1d days overdue'),Math.abs(diff));}
$(el).text(displayStr);});});},_printIframeContent:function(href){if($.browser.mozilla){window.open(href,'_blank');return;}
if(!this.printContent){this.printContent=$('<iframe id="print_iframe_content" src="'+href+'" style="display:none"></iframe>');this.$el.append(this.printContent);this.printContent.on('load',function(){$(this).get(0).contentWindow.print();});}else{this.printContent.get(0).contentWindow.print();}},});return PortalSidebar;});;

/* /website/static/src/js/set_view_track.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.set_view_track',function(require){"use strict";var CustomizeMenu=require('website.customizeMenu');var Widget=require('web.Widget');var TrackPage=Widget.extend({template:'website.track_page',xmlDependencies:['/website/static/src/xml/track_page.xml'],events:{'change #switch-track-page':'_onTrackChange',},start:function(){this.$input=this.$('#switch-track-page');this._isTracked().then((data)=>{if(data[0]['track']){this.track=true;this.$input.attr('checked','checked');}else{this.track=false;}});},_isTracked:function(val){var viewid=$('html').data('viewid');if(!viewid){return Promise.reject();}else{return this._rpc({model:'ir.ui.view',method:'read',args:[[viewid],['track']],});}},_onTrackChange:function(ev){var checkboxValue=this.$input.is(':checked');if(checkboxValue!==this.track){this.track=checkboxValue;this._trackPage(checkboxValue);}},_trackPage:function(val){var viewid=$('html').data('viewid');if(!viewid){return Promise.reject();}else{return this._rpc({model:'ir.ui.view',method:'write',args:[[viewid],{track:val}],});}},});CustomizeMenu.include({_loadCustomizeOptions:function(){var self=this;var def=this._super.apply(this,arguments);return def.then(function(){if(!self.__trackpageLoaded){self.__trackpageLoaded=true;self.trackPage=new TrackPage(self);self.trackPage.appendTo(self.$el.children('.dropdown-menu'));}});},});});;

/* /website/static/lib/jstz.min.js defined in bundle 'web.assets_frontend_lazy' */
!function(e){var a=function(){"use strict";var e="s",s={DAY:864e5,HOUR:36e5,MINUTE:6e4,SECOND:1e3,BASELINE_YEAR:2014,MAX_SCORE:864e6,AMBIGUITIES:{"America/Denver":["America/Mazatlan"],"Europe/London":["Africa/Casablanca"],"America/Chicago":["America/Mexico_City"],"America/Asuncion":["America/Campo_Grande","America/Santiago"],"America/Montevideo":["America/Sao_Paulo","America/Santiago"],"Asia/Beirut":["Asia/Amman","Asia/Jerusalem","Europe/Helsinki","Asia/Damascus","Africa/Cairo","Asia/Gaza","Europe/Minsk"],"Pacific/Auckland":["Pacific/Fiji"],"America/Los_Angeles":["America/Santa_Isabel"],"America/New_York":["America/Havana"],"America/Halifax":["America/Goose_Bay"],"America/Godthab":["America/Miquelon"],"Asia/Dubai":["Asia/Yerevan"],"Asia/Jakarta":["Asia/Krasnoyarsk"],"Asia/Shanghai":["Asia/Irkutsk","Australia/Perth"],"Australia/Sydney":["Australia/Lord_Howe"],"Asia/Tokyo":["Asia/Yakutsk"],"Asia/Dhaka":["Asia/Omsk"],"Asia/Baku":["Asia/Yerevan"],"Australia/Brisbane":["Asia/Vladivostok"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Majuro":["Asia/Kamchatka","Pacific/Fiji"],"Pacific/Tongatapu":["Pacific/Apia"],"Asia/Baghdad":["Europe/Minsk","Europe/Moscow"],"Asia/Karachi":["Asia/Yekaterinburg"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"]}},i=function(e){var a=-e.getTimezoneOffset();return null!==a?a:0},r=function(){var a=i(new Date(s.BASELINE_YEAR,0,2)),r=i(new Date(s.BASELINE_YEAR,5,2)),n=a-r;return 0>n?a+",1":n>0?r+",1,"+e:a+",0"},n=function(){var e,a;if("undefined"!=typeof Intl&&"undefined"!=typeof Intl.DateTimeFormat&&(e=Intl.DateTimeFormat(),"undefined"!=typeof e&&"undefined"!=typeof e.resolvedOptions))return a=e.resolvedOptions().timeZone,a&&(a.indexOf("/")>-1||"UTC"===a)?a:void 0},o=function(e){for(var a=new Date(e,0,1,0,0,1,0).getTime(),s=new Date(e,12,31,23,59,59).getTime(),i=a,r=new Date(i).getTimezoneOffset(),n=null,o=null;s-864e5>i;){var t=new Date(i),A=t.getTimezoneOffset();A!==r&&(r>A&&(n=t),A>r&&(o=t),r=A),i+=864e5}return n&&o?{s:u(n).getTime(),e:u(o).getTime()}:!1},u=function l(e,a,i){"undefined"==typeof a&&(a=s.DAY,i=s.HOUR);for(var r=new Date(e.getTime()-a).getTime(),n=e.getTime()+a,o=new Date(r).getTimezoneOffset(),u=r,t=null;n-i>u;){var A=new Date(u),c=A.getTimezoneOffset();if(c!==o){t=A;break}u+=i}return a===s.DAY?l(t,s.HOUR,s.MINUTE):a===s.HOUR?l(t,s.MINUTE,s.SECOND):t},t=function(e,a,s,i){if("N/A"!==s)return s;if("Asia/Beirut"===a){if("Africa/Cairo"===i.name&&13983768e5===e[6].s&&14116788e5===e[6].e)return 0;if("Asia/Jerusalem"===i.name&&13959648e5===e[6].s&&14118588e5===e[6].e)return 0}else if("America/Santiago"===a){if("America/Asuncion"===i.name&&14124816e5===e[6].s&&1397358e6===e[6].e)return 0;if("America/Campo_Grande"===i.name&&14136912e5===e[6].s&&13925196e5===e[6].e)return 0}else if("America/Montevideo"===a){if("America/Sao_Paulo"===i.name&&14136876e5===e[6].s&&1392516e6===e[6].e)return 0}else if("Pacific/Auckland"===a&&"Pacific/Fiji"===i.name&&14142456e5===e[6].s&&13961016e5===e[6].e)return 0;return s},A=function(e,i){for(var r=function(a){for(var r=0,n=0;n<e.length;n++)if(a.rules[n]&&e[n]){if(!(e[n].s>=a.rules[n].s&&e[n].e<=a.rules[n].e)){r="N/A";break}if(r=0,r+=Math.abs(e[n].s-a.rules[n].s),r+=Math.abs(a.rules[n].e-e[n].e),r>s.MAX_SCORE){r="N/A";break}}return r=t(e,i,r,a)},n={},o=a.olson.dst_rules.zones,u=o.length,A=s.AMBIGUITIES[i],c=0;u>c;c++){var m=o[c],l=r(o[c]);"N/A"!==l&&(n[m.name]=l)}for(var f in n)if(n.hasOwnProperty(f))for(var d=0;d<A.length;d++)if(A[d]===f)return f;return i},c=function(e){var s=function(){for(var e=[],s=0;s<a.olson.dst_rules.years.length;s++){var i=o(a.olson.dst_rules.years[s]);e.push(i)}return e},i=function(e){for(var a=0;a<e.length;a++)if(e[a]!==!1)return!0;return!1},r=s(),n=i(r);return n?A(r,e):e},m=function(){var e=n();return e||(e=a.olson.timezones[r()],"undefined"!=typeof s.AMBIGUITIES[e]&&(e=c(e))),{name:function(){return e}}};return{determine:m}}();a.olson=a.olson||{},a.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-660,1,s":"Pacific/Apia","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"America/Noronha","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Majuro","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},a.olson.dst_rules={years:[2008,2009,2010,2011,2012,2013,2014],zones:[{name:"Africa/Cairo",rules:[{e:12199572e5,s:12090744e5},{e:1250802e6,s:1240524e6},{e:12858804e5,s:12840696e5},!1,!1,!1,{e:14116788e5,s:1406844e6}]},{name:"Africa/Casablanca",rules:[{e:12202236e5,s:12122784e5},{e:12508092e5,s:12438144e5},{e:1281222e6,s:12727584e5},{e:13120668e5,s:13017888e5},{e:13489704e5,s:1345428e6},{e:13828392e5,s:13761e8},{e:14142888e5,s:14069448e5}]},{name:"America/Asuncion",rules:[{e:12050316e5,s:12243888e5},{e:12364812e5,s:12558384e5},{e:12709548e5,s:12860784e5},{e:13024044e5,s:1317528e6},{e:1333854e6,s:13495824e5},{e:1364094e6,s:1381032e6},{e:13955436e5,s:14124816e5}]},{name:"America/Campo_Grande",rules:[{e:12032172e5,s:12243888e5},{e:12346668e5,s:12558384e5},{e:12667212e5,s:1287288e6},{e:12981708e5,s:13187376e5},{e:13302252e5,s:1350792e6},{e:136107e7,s:13822416e5},{e:13925196e5,s:14136912e5}]},{name:"America/Goose_Bay",rules:[{e:122559486e4,s:120503526e4},{e:125704446e4,s:123648486e4},{e:128909886e4,s:126853926e4},{e:13205556e5,s:129998886e4},{e:13520052e5,s:13314456e5},{e:13834548e5,s:13628952e5},{e:14149044e5,s:13943448e5}]},{name:"America/Havana",rules:[{e:12249972e5,s:12056436e5},{e:12564468e5,s:12364884e5},{e:12885012e5,s:12685428e5},{e:13211604e5,s:13005972e5},{e:13520052e5,s:13332564e5},{e:13834548e5,s:13628916e5},{e:14149044e5,s:13943412e5}]},{name:"America/Mazatlan",rules:[{e:1225008e6,s:12074724e5},{e:12564576e5,s:1238922e6},{e:1288512e6,s:12703716e5},{e:13199616e5,s:13018212e5},{e:13514112e5,s:13332708e5},{e:13828608e5,s:13653252e5},{e:14143104e5,s:13967748e5}]},{name:"America/Mexico_City",rules:[{e:12250044e5,s:12074688e5},{e:1256454e6,s:12389184e5},{e:12885084e5,s:1270368e6},{e:1319958e6,s:13018176e5},{e:13514076e5,s:13332672e5},{e:13828572e5,s:13653216e5},{e:14143068e5,s:13967712e5}]},{name:"America/Miquelon",rules:[{e:12255984e5,s:12050388e5},{e:1257048e6,s:12364884e5},{e:12891024e5,s:12685428e5},{e:1320552e6,s:12999924e5},{e:13520016e5,s:1331442e6},{e:13834512e5,s:13628916e5},{e:14149008e5,s:13943412e5}]},{name:"America/Santa_Isabel",rules:[{e:12250116e5,s:1207476e6},{e:12564612e5,s:12389256e5},{e:12885156e5,s:12703752e5},{e:13199652e5,s:13018248e5},{e:13514148e5,s:13332744e5},{e:13828644e5,s:13653288e5},{e:1414314e6,s:13967784e5}]},{name:"America/Santiago",rules:[{e:1206846e6,s:1223784e6},{e:1237086e6,s:12552336e5},{e:127035e7,s:12866832e5},{e:13048236e5,s:13138992e5},{e:13356684e5,s:13465584e5},{e:1367118e6,s:13786128e5},{e:13985676e5,s:14100624e5}]},{name:"America/Sao_Paulo",rules:[{e:12032136e5,s:12243852e5},{e:12346632e5,s:12558348e5},{e:12667176e5,s:12872844e5},{e:12981672e5,s:1318734e6},{e:13302216e5,s:13507884e5},{e:13610664e5,s:1382238e6},{e:1392516e6,s:14136876e5}]},{name:"Asia/Amman",rules:[{e:1225404e6,s:12066552e5},{e:12568536e5,s:12381048e5},{e:12883032e5,s:12695544e5},{e:13197528e5,s:13016088e5},!1,!1,{e:14147064e5,s:13959576e5}]},{name:"Asia/Damascus",rules:[{e:12254868e5,s:120726e7},{e:125685e7,s:12381048e5},{e:12882996e5,s:12701592e5},{e:13197492e5,s:13016088e5},{e:13511988e5,s:13330584e5},{e:13826484e5,s:1364508e6},{e:14147028e5,s:13959576e5}]},{name:"Asia/Dubai",rules:[!1,!1,!1,!1,!1,!1,!1]},{name:"Asia/Gaza",rules:[{e:12199572e5,s:12066552e5},{e:12520152e5,s:12381048e5},{e:1281474e6,s:126964086e4},{e:1312146e6,s:130160886e4},{e:13481784e5,s:13330584e5},{e:13802292e5,s:1364508e6},{e:1414098e6,s:13959576e5}]},{name:"Asia/Irkutsk",rules:[{e:12249576e5,s:12068136e5},{e:12564072e5,s:12382632e5},{e:12884616e5,s:12697128e5},!1,!1,!1,!1]},{name:"Asia/Jerusalem",rules:[{e:12231612e5,s:12066624e5},{e:1254006e6,s:1238112e6},{e:1284246e6,s:12695616e5},{e:131751e7,s:1301616e6},{e:13483548e5,s:13330656e5},{e:13828284e5,s:13645152e5},{e:1414278e6,s:13959648e5}]},{name:"Asia/Kamchatka",rules:[{e:12249432e5,s:12067992e5},{e:12563928e5,s:12382488e5},{e:12884508e5,s:12696984e5},!1,!1,!1,!1]},{name:"Asia/Krasnoyarsk",rules:[{e:12249612e5,s:12068172e5},{e:12564108e5,s:12382668e5},{e:12884652e5,s:12697164e5},!1,!1,!1,!1]},{name:"Asia/Omsk",rules:[{e:12249648e5,s:12068208e5},{e:12564144e5,s:12382704e5},{e:12884688e5,s:126972e7},!1,!1,!1,!1]},{name:"Asia/Vladivostok",rules:[{e:12249504e5,s:12068064e5},{e:12564e8,s:1238256e6},{e:12884544e5,s:12697056e5},!1,!1,!1,!1]},{name:"Asia/Yakutsk",rules:[{e:1224954e6,s:120681e7},{e:12564036e5,s:12382596e5},{e:1288458e6,s:12697092e5},!1,!1,!1,!1]},{name:"Asia/Yekaterinburg",rules:[{e:12249684e5,s:12068244e5},{e:1256418e6,s:1238274e6},{e:12884724e5,s:12697236e5},!1,!1,!1,!1]},{name:"Asia/Yerevan",rules:[{e:1224972e6,s:1206828e6},{e:12564216e5,s:12382776e5},{e:1288476e6,s:12697272e5},{e:13199256e5,s:13011768e5},!1,!1,!1]},{name:"Australia/Lord_Howe",rules:[{e:12074076e5,s:12231342e5},{e:12388572e5,s:12545838e5},{e:12703068e5,s:12860334e5},{e:13017564e5,s:1317483e6},{e:1333206e6,s:13495374e5},{e:13652604e5,s:1380987e6},{e:139671e7,s:14124366e5}]},{name:"Australia/Perth",rules:[{e:12068136e5,s:12249576e5},!1,!1,!1,!1,!1,!1]},{name:"Europe/Helsinki",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]},{name:"Europe/Minsk",rules:[{e:12249792e5,s:12068352e5},{e:12564288e5,s:12382848e5},{e:12884832e5,s:12697344e5},!1,!1,!1,!1]},{name:"Europe/Moscow",rules:[{e:12249756e5,s:12068316e5},{e:12564252e5,s:12382812e5},{e:12884796e5,s:12697308e5},!1,!1,!1,!1]},{name:"Pacific/Apia",rules:[!1,!1,!1,{e:13017528e5,s:13168728e5},{e:13332024e5,s:13489272e5},{e:13652568e5,s:13803768e5},{e:13967064e5,s:14118264e5}]},{name:"Pacific/Fiji",rules:[!1,!1,{e:12696984e5,s:12878424e5},{e:13271544e5,s:1319292e6},{e:1358604e6,s:13507416e5},{e:139005e7,s:1382796e6},{e:14215032e5,s:14148504e5}]},{name:"Europe/London",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]}]},"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=a:"undefined"!=typeof define&&null!==define&&null!=define.amd?define([],function(){return a}):"undefined"==typeof e?window.jstz=a:e.jstz=a}();;

/* /website/static/src/js/utils.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.utils',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var qweb=core.qweb;function loadAnchors(url){return new Promise(function(resolve,reject){if(url!==window.location.pathname&&url[0]!=='#'){$.get(window.location.origin+url).then(resolve,reject);}else{resolve(document.body.outerHTML);}}).then(function(response){return _.map($(response).find('[id][data-anchor=true]'),function(el){return'#'+el.id;});});}
function autocompleteWithPages(self,$input){$input.autocomplete({source:function(request,response){if(request.term[0]==='#'){loadAnchors(request.term).then(function(anchors){response(anchors);});}else{return self._rpc({model:'website',method:'search_pages',args:[null,request.term],kwargs:{limit:15,},}).then(function(exists){var rs=_.map(exists,function(r){return r.loc;});response(rs.sort());});}},close:function(){self.trigger_up('website_url_chosen');},});}
function onceAllImagesLoaded($element){var defs=_.map($element.find('img').addBack('img'),function(img){if(img.complete){return;}
var def=new Promise(function(resolve,reject){$(img).one('load',function(){resolve();});});return def;});return Promise.all(defs);}
function prompt(options,_qweb){if(typeof options==='string'){options={text:options};}
var xmlDef;if(_.isUndefined(_qweb)){_qweb='website.prompt';xmlDef=ajax.loadXML('/website/static/src/xml/website.xml',core.qweb);}
options=_.extend({window_title:'',field_name:'','default':'',init:function(){},},options||{});var type=_.intersection(Object.keys(options),['input','textarea','select']);type=type.length?type[0]:'input';options.field_type=type;options.field_name=options.field_name||options[type];var def=new Promise(function(resolve,reject){Promise.resolve(xmlDef).then(function(){var dialog=$(qweb.render(_qweb,options)).appendTo('body');options.$dialog=dialog;var field=dialog.find(options.field_type).first();field.val(options['default']);field.fillWith=function(data){if(field.is('select')){var select=field[0];data.forEach(function(item){select.options[select.options.length]=new window.Option(item[1],item[0]);});}else{field.val(data);}};var init=options.init(field,dialog);Promise.resolve(init).then(function(fill){if(fill){field.fillWith(fill);}
dialog.modal('show');field.focus();dialog.on('click','.btn-primary',function(){var backdrop=$('.modal-backdrop');resolve({val:field.val(),field:field,dialog:dialog});dialog.modal('hide').remove();backdrop.remove();});});dialog.on('hidden.bs.modal',function(){var backdrop=$('.modal-backdrop');reject();dialog.remove();backdrop.remove();});if(field.is('input[type="text"], select')){field.keypress(function(e){if(e.which===13){e.preventDefault();dialog.find('.btn-primary').trigger('click');}});}});});return def;}
function websiteDomain(self){var websiteID;self.trigger_up('context_get',{callback:function(ctx){websiteID=ctx['website_id'];},});return['|',['website_id','=',false],['website_id','=',websiteID]];}
function svgToPNG(src,noAsync=false){function checkImg(imgEl){return(imgEl.naturalHeight!==0);}
function toPNGViaCanvas(imgEl){const canvas=document.createElement('canvas');canvas.width=imgEl.width;canvas.height=imgEl.height;canvas.getContext('2d').drawImage(imgEl,0,0);return canvas.toDataURL('image/png');}
if(src instanceof HTMLImageElement){const loadedImgEl=src;if(noAsync||checkImg(loadedImgEl)){return toPNGViaCanvas(loadedImgEl);}
src=loadedImgEl.src;}
return new Promise(resolve=>{const imgEl=new Image();imgEl.onload=()=>{if(checkImg(imgEl)){resolve(imgEl);return;}
imgEl.height=1000;imgEl.style.opacity=0;document.body.appendChild(imgEl);const request=new XMLHttpRequest();request.open('GET',imgEl.src,true);request.onload=()=>{const parser=new DOMParser();const result=parser.parseFromString(request.responseText,'text/xml');const svgEl=result.getElementsByTagName("svg")[0];svgEl.setAttribute('width',imgEl.width);svgEl.setAttribute('height',imgEl.height);imgEl.remove();const svg64=btoa(new XMLSerializer().serializeToString(svgEl));const finalImg=new Image();finalImg.onload=()=>{resolve(finalImg);};finalImg.src=`data:image/svg+xml;base64,${svg64}`;};request.send();};imgEl.src=src;}).then(loadedImgEl=>toPNGViaCanvas(loadedImgEl));}
return{loadAnchors:loadAnchors,autocompleteWithPages:autocompleteWithPages,onceAllImagesLoaded:onceAllImagesLoaded,prompt:prompt,websiteDomain:websiteDomain,svgToPNG:svgToPNG,};});;

/* /website/static/src/js/content/website_root.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.root',function(require){'use strict';var core=require('web.core');var Dialog=require('web.Dialog');var publicRootData=require('web.public.root');require("web.zoomodoo");var _t=core._t;var websiteRootRegistry=publicRootData.publicRootRegistry;var WebsiteRoot=publicRootData.PublicRoot.extend({events:_.extend({},publicRootData.PublicRoot.prototype.events||{},{'click .js_change_lang':'_onLangChangeClick','click .js_publish_management .js_publish_btn':'_onPublishBtnClick','click .js_multi_website_switch':'_onWebsiteSwitch','shown.bs.modal':'_onModalShown',}),custom_events:_.extend({},publicRootData.PublicRoot.prototype.custom_events||{},{'ready_to_clean_for_save':'_onWidgetsStopRequest','will_remove_snippet':'_onWidgetsStopRequest',seo_object_request:'_onSeoObjectRequest',}),start:function(){if(!this.$('.js_change_lang').length){var $links=this.$('ul.js_language_selector li a:not([data-oe-id])');var m=$(_.min($links,function(l){return $(l).attr('href').length;})).attr('href');$links.each(function(){var $link=$(this);var t=$link.attr('href');var l=(t===m)?"default":t.split('/')[1];$link.data('lang',l).addClass('js_change_lang');});}
this.$('.zoomable img[data-zoom]').zoomOdoo();return this._super.apply(this,arguments);},_getContext:function(context){var html=document.documentElement;return _.extend({'website_id':html.getAttribute('data-website-id')|0,},this._super.apply(this,arguments));},_getExtraContext:function(context){var html=document.documentElement;return _.extend({'editable':!!(html.dataset.editable||$('[data-oe-model]').length),'translatable':!!html.dataset.translatable,'edit_translations':!!html.dataset.edit_translations,},this._super.apply(this,arguments));},_getPublicWidgetsRegistry:function(options){var registry=this._super.apply(this,arguments);if(options.editableMode){return _.pick(registry,function(PublicWidget){return!PublicWidget.prototype.disabledInEditableMode;});}
return registry;},_onWidgetsStartRequest:function(ev){ev.data.options=_.clone(ev.data.options||{});ev.data.options.editableMode=ev.data.editableMode;this._super.apply(this,arguments);},_onLangChangeClick:function(ev){ev.preventDefault();var $target=$(ev.currentTarget);var redirect={lang:$target.data('url_code'),url:encodeURIComponent($target.attr('href').replace(/[&?]edit_translations[^&?]+/,'')),hash:encodeURIComponent(window.location.hash)};window.location.href=_.str.sprintf("/website/lang/%(lang)s?r=%(url)s%(hash)s",redirect);},_onSeoObjectRequest:function(ev){var res=this._unslugHtmlDataObject('seo-object');ev.data.callback(res);},_unslugHtmlDataObject:function(dataAttr){var repr=$('html').data(dataAttr);var match=repr&&repr.match(/(.+)\((\d+),(.*)\)/);if(!match){return null;}
return{model:match[1],id:match[2]|0,};},_onPublishBtnClick:function(ev){ev.preventDefault();var $data=$(ev.currentTarget).parents(".js_publish_management:first");this._rpc({route:$data.data('controller')||'/website/publish',params:{id:+$data.data('id'),object:$data.data('object'),},}).then(function(result){$data.toggleClass("css_published",result).toggleClass("css_unpublished",!result);$data.find('input').prop("checked",result);$data.parents("[data-publish]").attr("data-publish",+result?'on':'off');});},_onWebsiteSwitch:function(ev){var websiteId=ev.currentTarget.getAttribute('website-id');var websiteDomain=ev.currentTarget.getAttribute('domain');let url=`/website/force/${websiteId}`;if(websiteDomain&&window.location.hostname!==websiteDomain){url=websiteDomain+url;}
const path=window.location.pathname+window.location.search+window.location.hash;window.location.href=$.param.querystring(url,{'path':path});},_onModalShown:function(ev){$(ev.target).addClass('modal_shown');},});return{WebsiteRoot:WebsiteRoot,websiteRootRegistry:websiteRootRegistry,};});;

/* /website/static/src/js/content/compatibility.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.content.compatibility',function(require){'use strict';require('web.dom_ready');var browser=_.findKey($.browser,function(v){return v===true;});if($.browser.mozilla&&+$.browser.version.replace(/^([0-9]+\.[0-9]+).*/,'\$1')<20){browser='msie';}
browser+=(','+$.browser.version);var mobileRegex=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i;if(mobileRegex.test(window.navigator.userAgent.toLowerCase())){browser+=',mobile';}
document.documentElement.setAttribute('data-browser',browser);var htmlStyle=document.documentElement.style;var isFlexSupported=(('flexWrap'in htmlStyle)||('WebkitFlexWrap'in htmlStyle)||('msFlexWrap'in htmlStyle));if(!isFlexSupported){document.documentElement.setAttribute('data-no-flex','');}
return{browser:browser,isFlexSupported:isFlexSupported,};});;

/* /website/static/src/js/content/lazy_template_call.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.content.lazy_template_call',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.LazyTemplateRenderer=publicWidget.Widget.extend({selector:'#wrapwrap:has([data-oe-call])',start:function(){var def=this._super.apply(this,arguments);var $oeCalls=this.$('[data-oe-call]');var oeCalls=_.uniq($oeCalls.map(function(){return $(this).data('oe-call');}).get());if(!oeCalls.length){return def;}
var renderDef=this._rpc({route:'/website/multi_render',params:{'ids_or_xml_ids':oeCalls,},}).then(function(data){_.each(data,function(d,k){var $data=$(d).addClass('o_block_'+k);$oeCalls.filter('[data-oe-call="'+k+'"]').each(function(){$(this).replaceWith($data.clone());});});});return Promise.all([def,renderDef]);},});});;

/* /website/static/src/js/content/menu.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.content.menu',function(require){'use strict';var dom=require('web.dom');var publicWidget=require('web.public.widget');var wUtils=require('website.utils');publicWidget.registry.affixMenu=publicWidget.Widget.extend({selector:'header.o_affix_enabled',start:function(){var def=this._super.apply(this,arguments);var self=this;this.$headerClone=this.$target.clone().addClass('o_header_affix affix').removeClass('o_affix_enabled').removeAttr('id');this.$headerClone.insertAfter(this.$target);this.$headers=this.$target.add(this.$headerClone);this.$dropdowns=this.$headers.find('.dropdown');this.$dropdownMenus=this.$headers.find('.dropdown-menu');this.$navbarCollapses=this.$headers.find('.navbar-collapse');this._adaptDefaultOffset();wUtils.onceAllImagesLoaded(this.$headerClone).then(function(){self._adaptDefaultOffset();});_.each(this.$headerClone.find('[data-toggle="collapse"]'),function(el){var $source=$(el);var targetIDSelector=$source.attr('data-target');var $target=self.$headerClone.find(targetIDSelector);$source.attr('data-target',targetIDSelector+'_clone');$target.attr('id',targetIDSelector.substr(1)+'_clone');});this.$headerClone.find('div.navbar-collapse').on('show.bs.collapse',function(){$(document.body).addClass('overflow-hidden');}).on('hide.bs.collapse',function(){$(document.body).removeClass('overflow-hidden');});$(window).on('resize.affixMenu scroll.affixMenu',_.throttle(this._onWindowUpdate.bind(this),200));setTimeout(this._onWindowUpdate.bind(this),0);return def.then(function(){self.trigger_up('widgets_start_request',{$target:self.$headerClone,});});},destroy:function(){if(this.$headerClone){this.$headerClone.remove();$(window).off('.affixMenu');}
this._super.apply(this,arguments);},_adaptDefaultOffset:function(){var bottom=this.$target.offset().top+this._getHeaderHeight();this.$headerClone.css('margin-top',Math.min(-200,-bottom)+'px');},_getHeaderHeight:function(){return this.$headerClone.outerHeight();},_onWindowUpdate:function(){if(this.$navbarCollapses.hasClass('show')){return;}
var wOffset=$(window).scrollTop();var hOffset=this.$target.scrollTop();this.$headerClone.toggleClass('affixed',wOffset>(hOffset+300));this.$dropdowns.add(this.$dropdownMenus).removeClass('show');this.$navbarCollapses.removeClass('show').attr('aria-expanded',false);},});publicWidget.registry.autohideMenu=publicWidget.Widget.extend({selector:'header #top_menu',start:function(){var self=this;var defs=[this._super.apply(this,arguments)];this.noAutohide=this.$el.closest('.o_no_autohide_menu').length;if(!this.noAutohide){var $navbar=this.$el.closest('.navbar');defs.push(wUtils.onceAllImagesLoaded($navbar));var $window=$(window);$window.on('load.autohideMenu',function(){$window.trigger('resize');});}
return Promise.all(defs).then(function(){if(!self.noAutohide){dom.initAutoMoreMenu(self.$el,{unfoldable:'.divider, .divider ~ li'});}
self.$el.removeClass('o_menu_loading');});},destroy:function(){this._super.apply(this,arguments);if(!this.noAutohide){$(window).off('.autohideMenu');dom.destroyAutoMoreMenu(this.$el);}},});publicWidget.registry.menuDirection=publicWidget.Widget.extend({selector:'header .navbar .nav',events:{'show.bs.dropdown':'_onDropdownShow',},start:function(){this.defaultAlignment=this.$el.is('.ml-auto, .ml-auto ~ *')?'right':'left';return this._super.apply(this,arguments);},_checkOpening:function(alignment,liOffset,liWidth,menuWidth,windowWidth){if(alignment==='left'){return(liOffset+menuWidth<=windowWidth);}else{return(liOffset+liWidth-menuWidth>=0);}},_onDropdownShow:function(ev){var $li=$(ev.target);var $menu=$li.children('.dropdown-menu');var liOffset=$li.offset().left;var liWidth=$li.outerWidth();var menuWidth=$menu.outerWidth();var windowWidth=$(window).outerWidth();$menu.removeClass('dropdown-menu-left dropdown-menu-right');var alignment=this.defaultAlignment;if($li.nextAll(':visible').length===0){alignment='right';}
for(var i=0;i<2;i++){if(!this._checkOpening(alignment,liOffset,liWidth,menuWidth,windowWidth)){alignment=(alignment==='left'?'right':'left');}}
$menu.addClass('dropdown-menu-'+alignment);},});});;

/* /website/static/src/js/content/snippets.animation.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.content.snippets.animation',function(require){'use strict';const ajax=require('web.ajax');var Class=require('web.Class');var config=require('web.config');var core=require('web.core');var mixins=require('web.mixins');var publicWidget=require('web.public.widget');var utils=require('web.utils');var qweb=core.qweb;window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame;window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame;if(!window.performance||!window.performance.now){window.performance={now:function(){return Date.now();}};}
publicWidget.Widget.include({disabledInEditableMode:true,edit_events:null,read_events:null,init:function(parent,options){this._super.apply(this,arguments);this.editableMode=this.options.editableMode||false;var extraEvents=this.editableMode?this.edit_events:this.read_events;if(extraEvents){this.events=_.extend({},this.events||{},extraEvents);}},});var AnimationEffect=Class.extend(mixins.ParentedMixin,{init:function(parent,updateCallback,startEvents,$startTarget,options){mixins.ParentedMixin.init.call(this);this.setParent(parent);options=options||{};this._minFrameTime=1000/(options.maxFPS||100);this._updateCallback=updateCallback;this.startEvents=startEvents||'scroll';this.$startTarget=$($startTarget||window);if(options.getStateCallback){this._getStateCallback=options.getStateCallback;}else if(this.startEvents==='scroll'&&this.$startTarget[0]===window){this._getStateCallback=function(){return window.pageYOffset;};}else if(this.startEvents==='resize'&&this.$startTarget[0]===window){this._getStateCallback=function(){return{width:window.innerWidth,height:window.innerHeight,};};}else{this._getStateCallback=function(){return undefined;};}
this.endEvents=options.endEvents||false;this.$endTarget=options.$endTarget?$(options.$endTarget):this.$startTarget;this._updateCallback=this._updateCallback.bind(parent);this._getStateCallback=this._getStateCallback.bind(parent);this._uid='_animationEffect'+_.uniqueId();this.startEvents=_processEvents(this.startEvents,this._uid);if(this.endEvents){this.endEvents=_processEvents(this.endEvents,this._uid);}
function _processEvents(events,namespace){events=events.split(' ');return _.each(events,function(e,index){events[index]+=('.'+namespace);}).join(' ');}},destroy:function(){mixins.ParentedMixin.destroy.call(this);this.stop();},start:function(){this._paused=false;this._rafID=window.requestAnimationFrame((function(t){this._update(t);this._paused=true;}).bind(this));if(this.endEvents){this.$startTarget.on(this.startEvents,(function(e){if(this._paused){_.defer(this.play.bind(this,e));}}).bind(this));this.$endTarget.on(this.endEvents,(function(){if(!this._paused){_.defer(this.pause.bind(this));}}).bind(this));}else{var pauseTimer=null;this.$startTarget.on(this.startEvents,_.throttle((function(e){this.play(e);clearTimeout(pauseTimer);pauseTimer=_.delay((function(){this.pause();pauseTimer=null;}).bind(this),2000);}).bind(this),250,{trailing:false}));}},stop:function(){this.$startTarget.off(this.startEvents);if(this.endEvents){this.$endTarget.off(this.endEvents);}
this.pause();},play:function(e){this._newEvent=e;if(!this._paused){return;}
this._paused=false;this._rafID=window.requestAnimationFrame(this._update.bind(this));this._lastUpdateTimestamp=undefined;},pause:function(){if(this._paused){return;}
this._paused=true;window.cancelAnimationFrame(this._rafID);this._lastUpdateTimestamp=undefined;},_update:function(timestamp){if(this._paused){return;}
this._rafID=window.requestAnimationFrame(this._update.bind(this));var elapsedTime=0;if(this._lastUpdateTimestamp){elapsedTime=timestamp-this._lastUpdateTimestamp;if(elapsedTime<this._minFrameTime){return;}}
var animationState=this._getStateCallback(elapsedTime,this._newEvent);if(!this._newEvent&&animationState!==undefined&&_.isEqual(animationState,this._animationLastState)){return;}
this._animationLastState=animationState;this._updateCallback(this._animationLastState,elapsedTime,this._newEvent);this._lastUpdateTimestamp=timestamp;this._newEvent=undefined;},});var Animation=publicWidget.Widget.extend({maxFPS:100,effects:[],start:function(){this._prepareEffects();_.each(this._animationEffects,function(effect){effect.start();});return this._super.apply(this,arguments);},_prepareEffects:function(){this._animationEffects=[];var self=this;_.each(this.effects,function(desc){self._addEffect(self[desc.update],desc.startEvents,_findTarget(desc.startTarget),{getStateCallback:desc.getState&&self[desc.getState],endEvents:desc.endEvents||undefined,$endTarget:_findTarget(desc.endTarget),maxFPS:self.maxFPS,});function _findTarget(selector){if(selector){if(selector==='selector'){return self.$target;}
return self.$(selector);}
return undefined;}});},_addEffect:function(updateCallback,startEvents,$startTarget,options){this._animationEffects.push(new AnimationEffect(this,updateCallback,startEvents,$startTarget,options));},});var registry=publicWidget.registry;registry.slider=publicWidget.Widget.extend({selector:'.carousel',disabledInEditableMode:false,edit_events:{'slid.bs.carousel':'_onEditionSlide',},start:function(){if(!this.editableMode){this.$('img').on('load.slider',this._onImageLoaded.bind(this));this._computeHeights();}
this.$target.carousel();return this._super.apply(this,arguments);},destroy:function(){this._super.apply(this,arguments);this.$('img').off('.slider');this.$target.carousel('pause');this.$target.removeData('bs.carousel');_.each(this.$('.carousel-item'),function(el){$(el).css('min-height','');});},_computeHeights:function(){var maxHeight=0;var $items=this.$('.carousel-item');_.each($items,function(el){var $item=$(el);var isActive=$item.hasClass('active');$item.addClass('active');var height=$item.outerHeight();if(height>maxHeight){maxHeight=height;}
$item.toggleClass('active',isActive);});_.each($items,function(el){$(el).css('min-height',maxHeight);});},_onEditionSlide:function(){this._computeHeights();},_onImageLoaded:function(){this._computeHeights();},});registry.parallax=Animation.extend({selector:'.parallax',disabledInEditableMode:false,effects:[{startEvents:'scroll',update:'_onWindowScroll',}],start:function(){this._rebuild();$(window).on('resize.animation_parallax',_.debounce(this._rebuild.bind(this),500));return this._super.apply(this,arguments);},destroy:function(){this._super.apply(this,arguments);$(window).off('.animation_parallax');},_rebuild:function(){if(!this.$bg||!this.$bg.length){this.$bg=this.$('> .s_parallax_bg');if(!this.$bg.length){this.$bg=$('<span/>',{class:'s_parallax_bg'+(this.$target.hasClass('oe_custom_bg')?' oe_custom_bg':''),}).prependTo(this.$target);}}
var urlTarget=this.$target.css('background-image');if(urlTarget!=='none'){this.$bg.css('background-image',urlTarget);}
this.$target.css('background-image','none');this.speed=parseFloat(this.$target.attr('data-scroll-background-ratio')||0);this.$target.toggleClass('s_parallax_is_fixed',this.speed===1);var noParallaxSpeed=(this.speed===0||this.speed===1);this.$target.toggleClass('s_parallax_no_overflow_hidden',noParallaxSpeed);if(noParallaxSpeed){this.$bg.css({transform:'',top:'',bottom:'',});return;}
this.viewport=document.body.clientHeight-$('#wrapwrap').position().top;this.visibleArea=[this.$target.offset().top];this.visibleArea.push(this.visibleArea[0]+this.$target.innerHeight()+this.viewport);this.ratio=this.speed*(this.viewport/10);this.$bg.css({top:-this.ratio,bottom:-this.ratio,});},_onWindowScroll:function(scrollOffset){if(this.speed===0||this.speed===1){return;}
var vpEndOffset=scrollOffset+this.viewport;if(vpEndOffset>=this.visibleArea[0]&&vpEndOffset<=this.visibleArea[1]){this.$bg.css('transform','translateY('+_getNormalizedPosition.call(this,vpEndOffset)+'px)');}
function _getNormalizedPosition(pos){var r=(pos-this.visibleArea[1])/(this.visibleArea[0]-this.visibleArea[1]);return Math.round(this.ratio*(2*r-1));}},});registry.share=publicWidget.Widget.extend({selector:'.s_share, .oe_share',start:function(){var urlRegex=/(\?(?:|.*&)(?:u|url|body)=)(.*?)(&|#|$)/;var titleRegex=/(\?(?:|.*&)(?:title|text|subject)=)(.*?)(&|#|$)/;var url=encodeURIComponent(window.location.href);var title=encodeURIComponent($('title').text());this.$('a').each(function(){var $a=$(this);$a.attr('href',function(i,href){return href.replace(urlRegex,function(match,a,b,c){return a+url+c;}).replace(titleRegex,function(match,a,b,c){return a+title+c;});});if($a.attr('target')&&$a.attr('target').match(/_blank/i)&&!$a.closest('.o_editable').length){$a.on('click',function(){window.open(this.href,'','menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=550,width=600');return false;});}});return this._super.apply(this,arguments);},});const MobileYoutubeAutoplayMixin={_setupAutoplay:function(src){let promise=Promise.resolve();this.isYoutubeVideo=src.indexOf('youtube')>=0;this.isMobileEnv=config.device.size_class<=config.device.SIZES.LG&&config.device.touch;if(this.isYoutubeVideo&&this.isMobileEnv&&!window.YT){const oldOnYoutubeIframeAPIReady=window.onYouTubeIframeAPIReady;promise=new Promise(resolve=>{window.onYouTubeIframeAPIReady=()=>{if(oldOnYoutubeIframeAPIReady){oldOnYoutubeIframeAPIReady();}
return resolve();};});ajax.loadJS('https://www.youtube.com/iframe_api');}
return promise;},_triggerAutoplay:function(iframeEl){if(this.isMobileEnv&&this.isYoutubeVideo){new window.YT.Player(iframeEl,{events:{onReady:ev=>ev.target.playVideo(),}});}},};registry.mediaVideo=publicWidget.Widget.extend(MobileYoutubeAutoplayMixin,{selector:'.media_iframe_video',start:function(){const proms=[this._super.apply(this,arguments)];let iframeEl=this.$target[0].querySelector(':scope > iframe');if(!iframeEl){iframeEl=this._generateIframe();}
if(!iframeEl){return Promise.all(proms);}
proms.push(this._setupAutoplay(iframeEl.getAttribute('src')));return Promise.all(proms).then(()=>{this._triggerAutoplay(iframeEl);});},_generateIframe:function(){this.$target.empty();this.$target.append('<div class="css_editable_mode_display">&nbsp;</div>'+'<div class="media_iframe_video_size">&nbsp;</div>');var src=_.escape(this.$target.data('oe-expression')||this.$target.data('src'));var m=src.match(/^(?:https?:)?\/\/([^/?#]+)/);if(!m){return;}
var domain=m[1].replace(/^www\./,'');var supportedDomains=['youtu.be','youtube.com','youtube-nocookie.com','instagram.com','vine.co','player.vimeo.com','vimeo.com','dailymotion.com','player.youku.com','youku.com'];if(!_.contains(supportedDomains,domain)){return;}
const iframeEl=$('<iframe/>',{src:src,frameborder:'0',allowfullscreen:'allowfullscreen',})[0];this.$target.append(iframeEl);return iframeEl;},});registry.backgroundVideo=publicWidget.Widget.extend(MobileYoutubeAutoplayMixin,{selector:'.o_background_video',xmlDependencies:['/website/static/src/xml/website.background.video.xml'],disabledInEditableMode:false,start:function(){var proms=[this._super(...arguments)];this.videoSrc=this.el.dataset.bgVideoSrc;this.iframeID=_.uniqueId('o_bg_video_iframe_');proms.push(this._setupAutoplay(this.videoSrc));if(this.isYoutubeVideo&&this.isMobileEnv&&!this.videoSrc.includes('enablejsapi=1')){this.videoSrc+='&enablejsapi=1';}
var throttledUpdate=_.throttle(()=>this._adjustIframe(),50);var $dropdownMenu=this.$el.closest('.dropdown-menu');if($dropdownMenu.length){this.$dropdownParent=$dropdownMenu.parent();this.$dropdownParent.on('shown.bs.dropdown.backgroundVideo',throttledUpdate);}
$(window).on('resize.'+this.iframeID,throttledUpdate);return Promise.all(proms).then(()=>this._appendBgVideo());},destroy:function(){this._super.apply(this,arguments);if(this.$dropdownParent){this.$dropdownParent.off('.backgroundVideo');}
$(window).off('resize.'+this.iframeID);if(this.$bgVideoContainer){this.$bgVideoContainer.remove();}},_adjustIframe:function(){if(!this.$iframe){return;}
this.$iframe.removeClass('show');var wrapperWidth=this.$target.innerWidth();var wrapperHeight=this.$target.innerHeight();var relativeRatio=(wrapperWidth/wrapperHeight)/(16/9);var style={};if(relativeRatio>=1.0){style['width']='100%';style['height']=(relativeRatio*100)+'%';style['left']='0';style['top']=(-(relativeRatio-1.0)/2*100)+'%';}else{style['width']=((1/relativeRatio)*100)+'%';style['height']='100%';style['left']=(-((1/relativeRatio)-1.0)/2*100)+'%';style['top']='0';}
this.$iframe.css(style);void this.$iframe[0].offsetWidth;this.$iframe.addClass('show');},_appendBgVideo:function(){var $oldContainer=this.$bgVideoContainer||this.$('> .o_bg_video_container');this.$bgVideoContainer=$(qweb.render('website.background.video',{videoSrc:this.videoSrc,iframeID:this.iframeID,}));this.$iframe=this.$bgVideoContainer.find('.o_bg_video_iframe');this.$iframe.one('load',()=>{this.$bgVideoContainer.find('.o_bg_video_loading').remove();});this.$bgVideoContainer.prependTo(this.$target);$oldContainer.remove();this._adjustIframe();this._triggerAutoplay(this.$iframe[0]);},});registry.ul=publicWidget.Widget.extend({selector:'ul.o_ul_folded, ol.o_ul_folded',events:{'click .o_ul_toggle_next':'_onToggleNextClick','click .o_ul_toggle_self':'_onToggleSelfClick',},_onToggleNextClick:function(ev){ev.preventDefault();var $target=$(ev.currentTarget);$target.toggleClass('o_open');$target.closest('li').next().toggleClass('o_close');},_onToggleSelfClick:function(ev){ev.preventDefault();var $target=$(ev.currentTarget);$target.toggleClass('o_open');$target.closest('li').find('ul,ol').toggleClass('o_close');},});registry.gallery=publicWidget.Widget.extend({selector:'.o_gallery:not(.o_slideshow)',xmlDependencies:['/website/static/src/xml/website.gallery.xml'],events:{'click img':'_onClickImg',},_onClickImg:function(ev){var self=this;var $cur=$(ev.currentTarget);var urls=[];var idx=undefined;var milliseconds=undefined;var params=undefined;var $images=$cur.closest('.o_gallery').find('img');var size=0.8;var dimensions={min_width:Math.round(window.innerWidth*size*0.9),min_height:Math.round(window.innerHeight*size),max_width:Math.round(window.innerWidth*size*0.9),max_height:Math.round(window.innerHeight*size),width:Math.round(window.innerWidth*size*0.9),height:Math.round(window.innerHeight*size)};$images.each(function(){urls.push($(this).attr('src'));});var $img=($cur.is('img')===true)?$cur:$cur.closest('img');idx=urls.indexOf($img.attr('src'));milliseconds=$cur.closest('.o_gallery').data('interval')||false;var $modal=$(qweb.render('website.gallery.slideshow.lightbox',{srcs:urls,index:idx,dim:dimensions,interval:milliseconds,id:_.uniqueId('slideshow_'),}));$modal.modal({keyboard:true,backdrop:true,});$modal.on('hidden.bs.modal',function(){$(this).hide();$(this).siblings().filter('.modal-backdrop').remove();$(this).remove();});$modal.find('.modal-content, .modal-body.o_slideshow').css('height','100%');$modal.appendTo(document.body);$modal.one('shown.bs.modal',function(){self.trigger_up('widgets_start_request',{editableMode:false,$target:$modal.find('.modal-body.o_slideshow'),});});},});registry.gallerySlider=publicWidget.Widget.extend({selector:'.o_slideshow',xmlDependencies:['/website/static/src/xml/website.gallery.xml'],disabledInEditableMode:false,start:function(){var self=this;this.$carousel=this.$target.is('.carousel')?this.$target:this.$target.find('.carousel');this.$indicator=this.$carousel.find('.carousel-indicators');this.$prev=this.$indicator.find('li.o_indicators_left').css('visibility','');this.$next=this.$indicator.find('li.o_indicators_right').css('visibility','');var $lis=this.$indicator.find('li[data-slide-to]');var nbPerPage=Math.floor(this.$indicator.width()/$lis.first().outerWidth(true))-3;var realNbPerPage=nbPerPage||1;var nbPages=Math.ceil($lis.length/realNbPerPage);var index;var page;update();function hide(){$lis.each(function(i){$(this).toggleClass('d-none',i<page*nbPerPage||i>=(page+1)*nbPerPage);});if(self.editableMode){return;}
if(page<=0){self.$prev.detach();}else{self.$prev.prependTo(self.$indicator);}
if(page>=nbPages-1){self.$next.detach();}else{self.$next.appendTo(self.$indicator);}}
function update(){const active=$lis.filter('.active');index=active.length?$lis.index(active):0;page=Math.floor(index/realNbPerPage);hide();}
this.$carousel.on('slide.bs.carousel.gallery_slider',function(){setTimeout(function(){var $item=self.$carousel.find('.carousel-inner .carousel-item-prev, .carousel-inner .carousel-item-next');var index=$item.index();$lis.removeClass('active').filter('[data-slide-to="'+index+'"]').addClass('active');},0);});this.$indicator.on('click.gallery_slider','> li:not([data-slide-to])',function(){page+=($(this).hasClass('o_indicators_left')?-1:1);page=Math.max(0,Math.min(nbPages-1,page));self.$carousel.carousel(page*realNbPerPage);hide();});this.$carousel.on('slid.bs.carousel.gallery_slider',update);return this._super.apply(this,arguments);},destroy:function(){this._super.apply(this,arguments);if(!this.$indicator){return;}
this.$prev.prependTo(this.$indicator);this.$next.appendTo(this.$indicator);this.$carousel.off('.gallery_slider');this.$indicator.off('.gallery_slider');},});registry.socialShare=publicWidget.Widget.extend({selector:'.oe_social_share',xmlDependencies:['/website/static/src/xml/website.share.xml'],events:{'mouseenter':'_onMouseEnter',},_bindSocialEvent:function(){this.$('.oe_social_facebook').click($.proxy(this._renderSocial,this,'facebook'));this.$('.oe_social_twitter').click($.proxy(this._renderSocial,this,'twitter'));this.$('.oe_social_linkedin').click($.proxy(this._renderSocial,this,'linkedin'));},_render:function(){this.$el.popover({content:qweb.render('website.social_hover',{medias:this.socialList}),placement:'bottom',container:this.$el,html:true,trigger:'manual',animation:false,}).popover("show");this.$el.off('mouseleave.socialShare').on('mouseleave.socialShare',function(){var self=this;setTimeout(function(){if(!$(".popover:hover").length){$(self).popover('dispose');}},200);});},_renderSocial:function(social){var url=this.$el.data('urlshare')||document.URL.split(/[?#]/)[0];url=encodeURIComponent(url);var title=document.title.split(" | ")[0];var hashtags=' #'+document.title.split(" | ")[1].replace(' ','')+' '+this.hashtags;var socialNetworks={'facebook':'https://www.facebook.com/sharer/sharer.php?u='+url,'twitter':'https://twitter.com/intent/tweet?original_referer='+url+'&text='+encodeURIComponent(title+hashtags+' - ')+url,'linkedin':'https://www.linkedin.com/shareArticle?mini=true&url='+url+'&title='+encodeURIComponent(title),};if(!_.contains(_.keys(socialNetworks),social)){return;}
var wHeight=500;var wWidth=500;window.open(socialNetworks[social],'','menubar=no, toolbar=no, resizable=yes, scrollbar=yes, height='+wHeight+',width='+wWidth);},_onMouseEnter:function(){var social=this.$el.data('social');this.socialList=social?social.split(','):['facebook','twitter','linkedin'];this.hashtags=this.$el.data('hashtags')||'';this._render();this._bindSocialEvent();},});registry.facebookPage=publicWidget.Widget.extend({selector:'.o_facebook_page',disabledInEditableMode:false,start:function(){var def=this._super.apply(this,arguments);var params=_.pick(this.$el.data(),'href','height','tabs','small_header','hide_cover','show_facepile');if(!params.href){return def;}
params.width=utils.confine(Math.floor(this.$el.width()),180,500);var src=$.param.querystring('https://www.facebook.com/plugins/page.php',params);this.$iframe=$('<iframe/>',{src:src,class:'o_temp_auto_element',width:params.width,height:params.height,css:{border:'none',overflow:'hidden',},scrolling:'no',frameborder:'0',allowTransparency:'true',});this.$el.append(this.$iframe);return def;},destroy:function(){this._super.apply(this,arguments);if(this.$iframe){this.$iframe.remove();}},});registry.anchorSlide=publicWidget.Widget.extend({selector:'a[href^="/"][href*="#"], a[href^="#"]',events:{'click':'_onAnimateClick',},_onAnimateClick:function(ev){if(this.$target[0].pathname!==window.location.pathname){return;}
var hash=this.$target[0].hash;if(!utils.isValidAnchor(hash)){return;}
var $anchor=$(hash);if(!$anchor.length||!$anchor.attr('data-anchor')){return;}
ev.preventDefault();$('html, body').animate({scrollTop:$anchor.offset().top,},500);},});return{Widget:publicWidget.Widget,Animation:Animation,registry:registry,Class:Animation,};});;

/* /website/static/src/js/menu/navbar.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.navbar',function(require){'use strict';var core=require('web.core');var dom=require('web.dom');var publicWidget=require('web.public.widget');var concurrency=require('web.concurrency');var Widget=require('web.Widget');var websiteRootData=require('website.root');var qweb=core.qweb;var websiteNavbarRegistry=new publicWidget.RootWidgetRegistry();var WebsiteNavbar=publicWidget.RootWidget.extend({xmlDependencies:['/website/static/src/xml/website.xml'],events:_.extend({},publicWidget.RootWidget.prototype.events||{},{'click [data-action]':'_onActionMenuClick','mouseover > ul > li.dropdown:not(.show)':'_onMenuHovered','click .o_mobile_menu_toggle':'_onMobileMenuToggleClick','mouseover #oe_applications:not(:has(.dropdown-item))':'_onOeApplicationsHovered',}),custom_events:_.extend({},publicWidget.RootWidget.prototype.custom_events||{},{'action_demand':'_onActionDemand','edit_mode':'_onEditMode','readonly_mode':'_onReadonlyMode','ready_to_save':'_onSave',}),init:function(){this._super.apply(this,arguments);var self=this;var initPromise=new Promise(function(resolve){self.resolveInit=resolve;});this._widgetDefs=[initPromise];},start:function(){var self=this;dom.initAutoMoreMenu(this.$('ul.o_menu_sections'),{maxWidth:function(){return self.$el.width()
-(self.$('.o_menu_systray').outerWidth(true)||0)
-(self.$('ul#oe_applications').outerWidth(true)||0)
-(self.$('.o_menu_toggle').outerWidth(true)||0)
-(self.$('.o_menu_brand').outerWidth(true)||0);},});return this._super.apply(this,arguments).then(function(){self.resolveInit();});},_attachComponent:function(){var def=this._super.apply(this,arguments);this._widgetDefs.push(def);return def;},_getRegistry:function(){return websiteNavbarRegistry;},_handleAction:function(actionName,params,_i){var self=this;return this._whenReadyForActions().then(function(){var defs=[];_.each(self._widgets,function(w){if(!w.handleAction){return;}
var def=w.handleAction(actionName,params);if(def!==null){defs.push(def);}});if(!defs.length){if(_i>50){console.warn(_.str.sprintf("Action '%s' was not able to be handled.",actionName));return Promise.reject();}
return concurrency.delay(100).then(function(){return self._handleAction(actionName,params,(_i||0)+1);});}
return Promise.all(defs).then(function(values){if(values.length===1){return values[0];}
return values;});});},_whenReadyForActions:function(){return Promise.all(this._widgetDefs);},_onOeApplicationsHovered:function(ev){var self=this;this._rpc({model:'ir.ui.menu',method:'load_menus_root',args:[],}).then(function(result){self.$('#oe_applications .dropdown-menu').html($(qweb.render('website.oe_applications_menu',{menu_data:result})));});},_onActionMenuClick:function(ev){var $button=$(ev.currentTarget);$button.prop('disabled',true);var always=function(){$button.prop('disabled',false);};this._handleAction($button.data('action')).then(always).guardedCatch(always);},_onActionDemand:function(ev){var def=this._handleAction(ev.data.actionName,ev.data.params);if(ev.data.onSuccess){def.then(ev.data.onSuccess);}
if(ev.data.onFailure){def.guardedCatch(ev.data.onFailure);}},_onEditMode:function(){this.$el.addClass('editing_mode');this.do_hide();},_onMenuHovered:function(ev){var $opened=this.$('> ul > li.dropdown.show');if($opened.length){$opened.find('.dropdown-toggle').dropdown('toggle');$(ev.currentTarget).find('.dropdown-toggle').dropdown('toggle');}},_onMobileMenuToggleClick:function(){this.$el.parent().toggleClass('o_mobile_menu_opened');},_onReadonlyMode:function(){this.$el.removeClass('editing_mode');this.do_show();},_onSave:function(ev){ev.data.defs.push(this._handleAction('on_save'));},});var WebsiteNavbarActionWidget=Widget.extend({actions:{},handleAction:function(actionName,params){var action=this[this.actions[actionName]];if(action){return Promise.resolve(action.apply(this,params||[]));}
return null;},});websiteRootData.websiteRootRegistry.add(WebsiteNavbar,'#oe_main_menu_navbar');return{WebsiteNavbar:WebsiteNavbar,websiteNavbarRegistry:websiteNavbarRegistry,WebsiteNavbarActionWidget:WebsiteNavbarActionWidget,};});;

/* /website/static/src/js/visitor_timezone.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.visitor_timezone',function(require){'use strict';var ajax=require('web.ajax');var utils=require('web.utils');var publicWidget=require('web.public.widget');publicWidget.registry.visitorTimezone=publicWidget.Widget.extend({selector:'#wrapwrap',start:function(){if(!localStorage.getItem('website.found_visitor_timezone')){var timezone=jstz.determine().name();this._rpc({route:'/website/update_visitor_timezone',params:{'timezone':timezone,},}).then(function(result){if(result){localStorage.setItem('website.found_visitor_timezone',true);}});}
return this._super.apply(this,arguments);},});return publicWidget.registry.visitorTimezone;});;

/* /website/static/src/js/user_custom_javascript.js defined in bundle 'web.assets_frontend_lazy' */
;

/* /website_enterprise/static/src/js/website_enterprise.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.home_menu',function(require){'use strict';var session=require('web.session');var websiteNavbarData=require('website.navbar');websiteNavbarData.WebsiteNavbar.include({events:_.extend({},websiteNavbarData.WebsiteNavbar.prototype.events||{},{'click .o_menu_toggle':'_onMenuToggleClick',}),_onMenuToggleClick:function(ev){ev.preventDefault();var $button=$(ev.currentTarget);if(!$button.hasClass('fa')){return;}
$button.removeClass('fa fa-th').append($('<span/>',{'class':'fa fa-spin fa-spinner'}));var url='/web#home';window.location.href=url;},});});;

/* /website_form/static/src/js/website_form.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_form.animation',function(require){'use strict';var core=require('web.core');var time=require('web.time');var ajax=require('web.ajax');var publicWidget=require('web.public.widget');var _t=core._t;var qweb=core.qweb;publicWidget.registry.form_builder_send=publicWidget.Widget.extend({selector:'.s_website_form',willStart:function(){var prom;if(!$.fn.datetimepicker){prom=ajax.loadJS("/web/static/lib/tempusdominus/tempusdominus.js");}
return Promise.all([this._super.apply(this,arguments),prom]);},start:function(editable_mode){if(editable_mode){this.stop();return;}
var self=this;this.templates_loaded=ajax.loadXML('/website_form/static/src/xml/website_form.xml',qweb);this.$target.find('.o_website_form_send').on('click',function(e){self.send(e);});var l10n=_t.database.parameters;var datepickers_options={minDate:moment({y:1900}),maxDate:moment({y:9999,M:11,d:31}),calendarWeeks:true,icons:{time:'fa fa-clock-o',date:'fa fa-calendar',next:'fa fa-chevron-right',previous:'fa fa-chevron-left',up:'fa fa-chevron-up',down:'fa fa-chevron-down',},locale:moment.locale(),format:time.getLangDatetimeFormat(),};this.$target.find('.o_website_form_datetime').datetimepicker(datepickers_options);datepickers_options.format=time.getLangDateFormat();this.$target.find('.o_website_form_date').datetimepicker(datepickers_options);var $values=$('[data-for='+this.$target.attr('id')+']');if($values.length){var values=JSON.parse($values.data('values').replace('False','""').replace('None','""').replace(/'/g,'"'));var fields=_.pluck(this.$target.serializeArray(),'name');_.each(fields,function(field){if(_.has(values,field)){var $field=self.$target.find('input[name="'+field+'"], textarea[name="'+field+'"]');if(!$field.val()){$field.val(values[field]);$field.data('website_form_original_default_value',$field.val());}}});}
return this._super.apply(this,arguments);},destroy:function(){this._super.apply(this,arguments);this.$target.find('button').off('click');},send:function(e){e.preventDefault();this.$target.find('.o_website_form_send').off('click').addClass('disabled').attr('disabled','disabled');var self=this;self.$target.find('#o_website_form_result').empty();if(!self.check_error_fields({})){self.update_status('invalid');return false;}
this.form_fields=this.$target.serializeArray();$.each(this.$target.find('input[type=file]'),function(outer_index,input){$.each($(input).prop('files'),function(index,file){self.form_fields.push({name:input.name+'['+outer_index+']['+index+']',value:file});});});var form_values={};_.each(this.form_fields,function(input){if(input.name in form_values){if(Array.isArray(form_values[input.name])){form_values[input.name].push(input.value);}else{form_values[input.name]=[form_values[input.name],input.value];}}else{if(input.value!==''){form_values[input.name]=input.value;}}});if(time.getLangDatetimeFormat().indexOf('MMM')!==1){this.$target.find('.form-field:not(.o_website_form_custom)').find('.o_website_form_date, .o_website_form_datetime').each(function(){var date=$(this).datetimepicker('viewDate').clone().locale('en');var format='YYYY-MM-DD';if($(this).hasClass('o_website_form_datetime')){date=date.utc();format='YYYY-MM-DD HH:mm:ss';}
form_values[$(this).find('input').attr('name')]=date.format(format);});}
self.post_form(form_values)},post_form:function(form_values){var self=this;ajax.post(this.$target.attr('action')+(this.$target.data('force_action')||this.$target.data('model_name')),form_values).then(function(result_data){result_data=JSON.parse(result_data);if(!result_data.id){self.update_status('error');if(result_data.error_fields){self.check_error_fields(result_data.error_fields);}}else{var success_page=self.$target.attr('data-success_page');if(success_page){$(window.location).attr('href',success_page);}
else{self.update_status('success');}
self.$target[0].reset();}}).guardedCatch(function(){self.update_status('error');});},check_error_fields:function(error_fields){var self=this;var form_valid=true;this.$target.find('.form-field').each(function(k,field){var $field=$(field);var field_name=$field.find('.col-form-label').attr('for');var inputs=$field.find('.o_website_form_input:not(#editable_select)');var invalid_inputs=inputs.toArray().filter(function(input,k,inputs){if(input.required&&input.type==='checkbox'){var checkboxes=_.filter(inputs,function(input){return input.required&&input.type==='checkbox';});return!_.any(checkboxes,function(checkbox){return checkbox.checked;});}else if($(input).hasClass('o_website_form_date')){if(!self.is_datetime_valid(input.value,'date')){return true;}}else if($(input).hasClass('o_website_form_datetime')){if(!self.is_datetime_valid(input.value,'datetime')){return true;}}
return!input.checkValidity();});$field.removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');if(invalid_inputs.length||error_fields[field_name]){$field.addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid')
if(_.isString(error_fields[field_name])){$field.popover({content:error_fields[field_name],trigger:'hover',container:'body',placement:'top'});$field.data("bs.popover").config.content=error_fields[field_name];$field.popover('show');}
form_valid=false;}});return form_valid;},is_datetime_valid:function(value,type_of_date){if(value===""){return true;}else{try{this.parse_date(value,type_of_date);return true;}catch(e){return false;}}},parse_date:function(value,type_of_date,value_if_empty){var date_pattern=time.getLangDateFormat(),time_pattern=time.getLangTimeFormat();var date_pattern_wo_zero=date_pattern.replace('MM','M').replace('DD','D'),time_pattern_wo_zero=time_pattern.replace('HH','H').replace('mm','m').replace('ss','s');switch(type_of_date){case'datetime':var datetime=moment(value,[date_pattern+' '+time_pattern,date_pattern_wo_zero+' '+time_pattern_wo_zero],true);if(datetime.isValid())
return time.datetime_to_str(datetime.toDate());throw new Error(_.str.sprintf(_t("'%s' is not a correct datetime"),value));case'date':var date=moment(value,[date_pattern,date_pattern_wo_zero],true);if(date.isValid())
return time.date_to_str(date.toDate());throw new Error(_.str.sprintf(_t("'%s' is not a correct date"),value));}
return value;},update_status:function(status){var self=this;if(status!=='success'){this.$target.find('.o_website_form_send').removeClass('disabled').removeAttr('disabled').on('click',function(e){self.send(e);});}
var $result=this.$('#o_website_form_result');this.templates_loaded.then(function(){$result.replaceWith(qweb.render("website_form.status_"+status));});},});return publicWidget.registry.form_builder_send});;

/* /website_mail/static/src/js/follow.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_mail.follow',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.follow=publicWidget.Widget.extend({selector:'.js_follow',disabledInEditableMode:false,start:function(){var self=this;this.is_user=false;var always=function(data){self.is_user=data.is_user;self.email=data.email;self.toggle_subscription(data.is_follower,data.email);self.$target.removeClass('d-none');};this._rpc({route:'/website_mail/is_follower',params:{model:this.$target.data('object'),res_id:this.$target.data('id'),},}).then(always).guardedCatch(always);if(!this.editableMode){$('.js_follow > .input-group-append.d-none').removeClass('d-none');this.$target.find('.js_follow_btn, .js_unfollow_btn').on('click',function(event){event.preventDefault();self._onClick();});}
return this._super.apply(this,arguments);},_onClick:function(){var self=this;var $email=this.$target.find(".js_follow_email");if($email.length&&!$email.val().match(/.+@.+/)){this.$target.addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');return false;}
this.$target.removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');var email=$email.length?$email.val():false;if(email||this.is_user){this._rpc({route:'/website_mail/follow',params:{'id':+this.$target.data('id'),'object':this.$target.data('object'),'message_is_follower':this.$target.attr("data-follow")||"off",'email':email,},}).then(function(follow){self.toggle_subscription(follow,email);});}},toggle_subscription:function(follow,email){follow=follow||(!email&&this.$target.attr('data-unsubscribe'));if(follow){this.$target.find(".js_follow_btn").addClass('d-none');this.$target.find(".js_unfollow_btn").removeClass('d-none');}
else{this.$target.find(".js_follow_btn").removeClass('d-none');this.$target.find(".js_unfollow_btn").addClass('d-none');}
this.$target.find('input.js_follow_email').val(email||"").attr("disabled",email&&(follow||this.is_user)?"disabled":false);this.$target.attr("data-follow",follow?'on':'off');},});});;

/* /website_mail/static/src/js/portal_chatter.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_mail.thread',function(require){'use strict';var portalChatter=require('portal.chatter');portalChatter.PortalChatter.include({xmlDependencies:(portalChatter.PortalChatter.prototype.xmlDependencies||[]).concat(['/website_mail/static/src/xml/portal_chatter.xml']),});});;

/* /website_profile/static/src/js/website_profile.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_profile.website_profile',function(require){'use strict';var publicWidget=require('web.public.widget');var wysiwygLoader=require('web_editor.loader');publicWidget.registry.websiteProfile=publicWidget.Widget.extend({selector:'.o_wprofile_email_validation_container',read_events:{'click .send_validation_email':'_onSendValidationEmailClick','click .validated_email_close':'_onCloseValidatedEmailClick',},_onSendValidationEmailClick:function(ev){ev.preventDefault();var self=this;var $element=$(ev.currentTarget);this._rpc({route:'/profile/send_validation_email',params:{'redirect_url':$element.data('redirect_url')},}).then(function(data){if(data){self.$('button.validation_email_close').click();}});},_onCloseValidatedEmailClick:function(){this._rpc({route:'/profile/validate_email/close',});},});publicWidget.registry.websiteProfileEditor=publicWidget.Widget.extend({selector:'.o_wprofile_editor_form',read_events:{'click .o_forum_profile_pic_edit':'_onEditProfilePicClick','change .o_forum_file_upload':'_onFileUploadChange','click .o_forum_profile_pic_clear':'_onProfilePicClearClick','click .o_wprofile_submit_btn':'_onSubmitClick',},start:function(){var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
var toolbar=[['style',['style']],['font',['bold','italic','underline','clear']],['para',['ul','ol','paragraph']],['table',['table']],['insert',['link','picture']],['history',['undo','redo']],];var $textarea=this.$('textarea.o_wysiwyg_loader');var loadProm=wysiwygLoader.load(this,$textarea[0],{toolbar:toolbar,recordInfo:{context:this._getContext(),res_model:'res.users',res_id:parseInt(this.$('input[name=user_id]').val()),},disableResizeImage:true,}).then(wysiwyg=>{this._wysiwyg=wysiwyg;});return Promise.all([def,loadProm]);},_onEditProfilePicClick:function(ev){ev.preventDefault();$(ev.currentTarget).closest('form').find('.o_forum_file_upload').trigger('click');},_onFileUploadChange:function(ev){if(!ev.currentTarget.files.length){return;}
var $form=$(ev.currentTarget).closest('form');var reader=new window.FileReader();reader.readAsDataURL(ev.currentTarget.files[0]);reader.onload=function(ev){$form.find('.o_forum_avatar_img').attr('src',ev.target.result);};$form.find('#forum_clear_image').remove();},_onProfilePicClearClick:function(ev){var $form=$(ev.currentTarget).closest('form');$form.find('.o_forum_avatar_img').attr('src','/web/static/src/img/placeholder.png');$form.append($('<input/>',{name:'clear_image',id:'forum_clear_image',type:'hidden',}));},_onSubmitClick:function(){if(this._wysiwyg){this._wysiwyg.save();}},});return publicWidget.registry.websiteProfile;});;

/* /website_slides/static/src/js/slides.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_slides.slides',function(require){'use strict';var publicWidget=require('web.public.widget');var time=require('web.time');publicWidget.registry.websiteSlides=publicWidget.Widget.extend({selector:'#wrapwrap',start:function(parent){var defs=[this._super.apply(this,arguments)];_.each($("timeago.timeago"),function(el){var datetime=$(el).attr('datetime');var datetimeObj=time.str_to_datetime(datetime);var displayStr='';if(datetimeObj&&new Date().getTime()-datetimeObj.getTime()>7*24*60*60*1000){displayStr=moment(datetimeObj).format('ll');}else{displayStr=moment(datetimeObj).fromNow();}
$(el).text(displayStr);});return Promise.all(defs);},});return publicWidget.registry.websiteSlides;});odoo.define('website_slides.slides_embed',function(require){'use strict';var publicWidget=require('web.public.widget');require('website_slides.slides');var SlideSocialEmbed=publicWidget.Widget.extend({events:{'change input':'_onChangePage',},init:function(parent,maxPage){this._super.apply(this,arguments);this.max_page=maxPage||false;},_updateEmbeddedCode:function(page){var $embedInput=this.$('.slide_embed_code');var newCode=$embedInput.val().replace(/(page=).*?([^\d]+)/,'$1'+page+'$2');$embedInput.val(newCode);},_onChangePage:function(ev){ev.preventDefault();var input=this.$('input');var page=parseInt(input.val());if(this.max_page&&!(page>0&&page<=this.max_page)){page=1;}
this._updateEmbeddedCode(page);},});publicWidget.registry.websiteSlidesEmbed=publicWidget.Widget.extend({selector:'#wrapwrap',start:function(parent){var defs=[this._super.apply(this,arguments)];$('iframe.o_wslides_iframe_viewer').on('ready',this._onIframeViewerReady.bind(this));return Promise.all(defs);},_onIframeViewerReady:function(ev){var $iframe=$(ev.currentTarget);var maxPage=$iframe.contents().find('#page_count').val();new SlideSocialEmbed(this,maxPage).attachTo($('.oe_slide_js_embed_code_widget'));},});});;

/* /website_slides/static/src/js/slides_share.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_slides.slides_share',function(require){'use strict';var publicWidget=require('web.public.widget');require('website_slides.slides');var core=require('web.core');var _t=core._t;var ShareMail=publicWidget.Widget.extend({events:{'click button':'_sendMail',},_sendMail:function(){var self=this;var input=this.$('input');var slideID=this.$('button').data('slide-id');if(input.val()&&input[0].checkValidity()){this.$el.removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');this._rpc({route:'/slides/slide/send_share_email',params:{slide_id:slideID,email:input.val(),},}).then(function(){self.$el.html($('<div class="alert alert-info" role="alert">'+_t('<strong>Thank you!</strong> Mail has been sent.')+'</div>'));});}else{this.$el.addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');input.focus();}},});publicWidget.registry.websiteSlidesShare=publicWidget.Widget.extend({selector:'#wrapwrap',events:{'click a.o_wslides_js_social_share':'_onSlidesSocialShare','click .o_clipboard_button':'_onShareLinkCopy',},start:function(parent){var defs=[this._super.apply(this,arguments)];defs.push(new ShareMail(this).attachTo($('.oe_slide_js_share_email')));return Promise.all(defs);},_onSlidesSocialShare:function(ev){ev.preventDefault();var popUpURL=$(ev.currentTarget).attr('href');var popUp=window.open(popUpURL,'Share Dialog','width=626,height=436');$(window).on('focus',function(){if(popUp.closed){$(window).off('focus');}});},_onShareLinkCopy:function(ev){ev.preventDefault();var $clipboardBtn=this.$('.o_clipboard_button');$clipboardBtn.tooltip({title:"Copied !",trigger:"manual",placement:"bottom"});var self=this;var clipboard=new ClipboardJS('.o_clipboard_button',{target:function(){return self.$('.o_wslides_js_share_link')[0];},container:this.el});clipboard.on('success',function(){clipboard.destroy();$clipboardBtn.tooltip('show');_.delay(function(){$clipboardBtn.tooltip("hide");},800);});clipboard.on('error',function(e){console.log(e);clipboard.destroy();})},});});;

/* /website_slides/static/src/js/slides_upload.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_slides.upload_modal',function(require){'use strict';var core=require('web.core');var Dialog=require('web.Dialog');var publicWidget=require('web.public.widget');var utils=require('web.utils');var wUtils=require('website.utils');var QWeb=core.qweb;var _t=core._t;var SlideUploadDialog=Dialog.extend({template:'website.slide.upload.modal',events:_.extend({},Dialog.prototype.events,{'click .o_wslides_js_upload_install_button':'_onClickInstallModule','click .o_wslides_select_type':'_onClickSlideTypeIcon','change input#upload':'_onChangeSlideUpload','change input#url':'_onChangeSlideUrl',}),init:function(parent,options){options=_.defaults(options||{},{title:_t("Upload a document"),size:'medium',});this._super(parent,options);this._setup();this.channelID=parseInt(options.channelId,10);this.defaultCategoryID=parseInt(options.categoryId,10);this.canUpload=options.canUpload==='True';this.canPublish=options.canPublish==='True';this.modulesToInstall=options.modulesToInstall?JSON.parse(options.modulesToInstall.replace(/'/g,'"')):null;this.modulesToInstallStatus=null;this.set('state','_select');this.on('change:state',this,this._onChangeType);this.set('can_submit_form',false);this.on('change:can_submit_form',this,this._onChangeCanSubmitForm);this.file={};this.isValidUrl=true;},start:function(){var self=this;return this._super.apply(this,arguments).then(function(){self._resetModalButton();});},_alertDisplay:function(message){this._alertRemove();$('<div/>',{"class":'alert alert-warning',role:'alert'}).text(message).insertBefore(this.$('form'));},_alertRemove:function(){this.$('.alert-warning').remove();},_bindSelect2Dropdown:function(){var self=this;this.$('#category_id').select2(this._select2Wrapper(_t('Section'),false,function(){return self._rpc({route:'/slides/category/search_read',params:{fields:['name'],domain:[['channel_id','=',self.channelID]],}});}));this.$('#tag_ids').select2(this._select2Wrapper(_t('Tags'),true,function(){return self._rpc({route:'/slides/tag/search_read',params:{fields:['name'],domain:[],}});}));},_fetchUrlPreview:function(url){return this._rpc({route:'/slides/prepare_preview/',params:{'url':url,'channel_id':this.channelID},});},_formSetFieldValue:function(fieldId,value){this.$('form').find('#'+fieldId).val(value);},_formGetFieldValue:function(fieldId){return this.$('#'+fieldId).val();},_formValidate:function(){var form=this.$("form");form.addClass('was-validated');return form[0].checkValidity()&&this.isValidUrl;},_formValidateGetValues:function(forcePublished){var canvas=this.$('#data_canvas')[0];var values=_.extend({'channel_id':this.channelID,'name':this._formGetFieldValue('name'),'url':this._formGetFieldValue('url'),'description':this._formGetFieldValue('description'),'duration':this._formGetFieldValue('duration'),'is_published':forcePublished,},this._getSelect2DropdownValues());if(_.contains(this.slide_type_data),this.get('state')){values['slide_type']=this.get('state');}
if(this.file.type==='application/pdf'){_.extend(values,{'image_1920':canvas.toDataURL().split(',')[1],'slide_type':canvas.height>canvas.width?'document':'presentation','mime_type':this.file.type,'datas':this.file.data});}else if(values['slide_type']==='webpage'){let fileData=this.file.type==='image/svg+xml'?this.__svgToPNG():this.file.data;if(fileData instanceof Promise){const fileDataProm=fileData;this.__svgLoadingExec=()=>fileDataProm.then(result=>values['image_1920']=result);fileData=this._svgToPng();}
_.extend(values,{'mime_type':'text/html','image_1920':fileData,});}else if(/^image\/.*/.test(this.file.type)){let fileData=this.file.type==='image/svg+xml'?this.__svgToPNG():this.file.data;let fileDataProm;if(fileData instanceof Promise){fileDataProm=fileData;fileData=this._svgToPng();}
if(values['slide_type']==='presentation'){if(fileDataProm){this.__svgLoadingExec=()=>fileDataProm.then(result=>values['datas']=result);}
_.extend(values,{'slide_type':'infographic','mime_type':this.file.type==='image/svg+xml'?'image/png':this.file.type,'datas':fileData,});}else{if(fileDataProm){this.__svgLoadingExec=()=>fileDataProm.then(result=>values['image_1920']=result);}
_.extend(values,{'image_1920':fileData,});}}
return values;},_fileReset:function(){var control=this.$('#upload');control.replaceWith(control=control.clone(true));this.file.name=false;},_getModalButtons:function(){var btnList=[];var state=this.get('state');if(state==='_select'){btnList.push({text:_t("Cancel"),classes:'o_w_slide_cancel',close:true});}else if(state==='_import'){if(!this.modulesToInstallStatus.installing){btnList.push({text:this.modulesToInstallStatus.failed?_t("Retry"):_t("Install"),classes:'btn-primary',click:this._onClickInstallModuleConfirm.bind(this)});}
btnList.push({text:_t("Go Back"),classes:'o_w_slide_go_back',click:this._onClickGoBack.bind(this)});}else if(state!=='_upload'){if(this.canUpload){if(this.canPublish){btnList.push({text:_t("Publish"),classes:'btn-primary o_w_slide_upload o_w_slide_upload_published',click:this._onClickFormSubmit.bind(this)});btnList.push({text:_t("Save as Draft"),classes:'o_w_slide_upload',click:this._onClickFormSubmit.bind(this)});}else{btnList.push({text:_t("Save as Draft"),classes:'btn-primary o_w_slide_upload',click:this._onClickFormSubmit.bind(this)});}}
btnList.push({text:_t("Go Back"),classes:'o_w_slide_go_back',click:this._onClickGoBack.bind(this)});}
return btnList;},_getSelect2DropdownValues:function(){var result={};var self=this;var tagValues=[];_.each(this.$('#tag_ids').select2('data'),function(val){if(val.create){tagValues.push([0,0,{'name':val.text}]);}else{tagValues.push([4,val.id]);}});if(tagValues){result['tag_ids']=tagValues;}
if(!self.defaultCategoryID){var categoryValue=this.$('#category_id').select2('data');if(categoryValue&&categoryValue.create){result['category_id']=[0,{'name':categoryValue.text}];}else if(categoryValue){result['category_id']=[categoryValue.id];this.categoryID=categoryValue.id;}}else{result['category_id']=[self.defaultCategoryID];this.categoryID=self.defaultCategoryID;}
return result;},_resetModalButton:function(){this.set_buttons(this._getModalButtons());},_select2Wrapper:function(tag,multi,fetchFNC,nameKey){nameKey=nameKey||'name';var values={width:'100%',placeholder:tag,allowClear:true,formatNoMatches:false,selection_data:false,fetch_rpc_fnc:fetchFNC,formatSelection:function(data){if(data.tag){data.text=data.tag;}
return data.text;},createSearchChoice:function(term,data){var addedTags=$(this.opts.element).select2('data');if(_.filter(_.union(addedTags,data),function(tag){return tag.text.toLowerCase().localeCompare(term.toLowerCase())===0;}).length===0){if(this.opts.can_create){return{id:_.uniqueId('tag_'),create:true,tag:term,text:_.str.sprintf(_t("Create new %s '%s'"),tag,term),};}else{return undefined;}}},fill_data:function(query,data){var that=this,tags={results:[]};_.each(data,function(obj){if(that.matcher(query.term,obj[nameKey])){tags.results.push({id:obj.id,text:obj[nameKey]});}});query.callback(tags);},query:function(query){var that=this;if(!this.selection_data){this.fetch_rpc_fnc().then(function(data){that.can_create=data.can_create;that.fill_data(query,data.read_results);that.selection_data=data.read_results;});}else{this.fill_data(query,this.selection_data);}}};if(multi){values['multiple']=true;}
return values;},_setup:function(){this.slide_type_data={presentation:{icon:'fa-file-pdf-o',label:_t('Presentation'),template:'website.slide.upload.modal.presentation',},webpage:{icon:'fa-file-text',label:_t('Web Page'),template:'website.slide.upload.modal.webpage',},video:{icon:'fa-video-camera',label:_t('Video'),template:'website.slide.upload.modal.video',},quiz:{icon:'fa-question-circle',label:_t('Quiz'),template:'website.slide.upload.quiz'}};},_showPreviewColumn:function(){this.$('#o_wslides_js_slide_upload_left_column').removeClass('col').addClass('col-md-6');this.$('#o_wslides_js_slide_upload_preview_column').removeClass('d-none');this.$modal.find('.modal-dialog').addClass('modal-lg');},_hidePreviewColumn:function(){this.$('#o_wslides_js_slide_upload_left_column').addClass('col').removeClass('col-md-6');this.$('#o_wslides_js_slide_upload_preview_column').addClass('d-none');this.$modal.find('.modal-dialog').removeClass('modal-lg');},_svgToPng:function(){return this.__svgToPNG(true);},__svgToPNG:function(noAsync=false){const imgEl=this.$el.find('img#slide-image')[0];const result=wUtils.svgToPNG(imgEl,noAsync);if(typeof(result)==='string'){return result.split(',')[1];}
return result.then(png=>png.split(',')[1]);},_onChangeType:function(){var currentType=this.get('state');var tmpl;if(currentType==='_select'){tmpl='website.slide.upload.modal.select';}else if(currentType==='_upload'){tmpl='website.slide.upload.modal.uploading';}else if(currentType==='_import'){tmpl='website.slide.upload.modal.import';}else{tmpl=this.slide_type_data[currentType]['template'];}
this.$('.o_w_slide_upload_modal_container').empty();this.$('.o_w_slide_upload_modal_container').append(QWeb.render(tmpl,{widget:this}));this._resetModalButton();if(currentType==='_import'){this.set_title(_t("New Certification"));}else{this.set_title(_t("Upload a document"));}
this.$modal.find('.modal-dialog').removeClass('modal-lg');},_onChangeCanSubmitForm:function(ev){if(this.get('can_submit_form')){this.$('.o_w_slide_upload').button('reset');}else{this.$('.o_w_slide_upload').button('loading');}},_onChangeSlideUpload:function(ev){var self=this;this._alertRemove();var $input=$(ev.currentTarget);var preventOnchange=$input.data('preventOnchange');var file=ev.target.files[0];if(!file){this.$('#slide-image').attr('src','/website_slides/static/src/img/document.png');this._hidePreviewColumn();return;}
var isImage=/^image\/.*/.test(file.type);var loaded=false;this.file.name=file.name;this.file.type=file.type;if(!(isImage||this.file.type==='application/pdf')){this._alertDisplay(_t("Invalid file type. Please select pdf or image file"));this._fileReset();this._hidePreviewColumn();return;}
if(file.size/1024/1024>25){this._alertDisplay(_t("File is too big. File size cannot exceed 25MB"));this._fileReset();this._hidePreviewColumn();return;}
utils.getDataURLFromFile(file).then(function(buffer){if(isImage){self.$('#slide-image').attr('src',buffer);}
buffer=buffer.split(',')[1];self.file.data=buffer;self._showPreviewColumn();});if(file.type==='application/pdf'){var ArrayReader=new FileReader();this.set('can_submit_form',false);ArrayReader.readAsArrayBuffer(file);ArrayReader.onload=function(evt){var buffer=evt.target.result;var passwordNeeded=function(){self._alertDisplay(_t("You can not upload password protected file."));self._fileReset();self.set('can_submit_form',true);};Util=PDFJS.Util;PDFJS.getDocument(new Uint8Array(buffer),null,passwordNeeded).then(function getPdf(pdf){self._formSetFieldValue('duration',(pdf.pdfInfo.numPages||0)*5);pdf.getPage(1).then(function getFirstPage(page){var scale=1;var viewport=page.getViewport(scale);var canvas=document.getElementById('data_canvas');var context=canvas.getContext('2d');canvas.height=viewport.height;canvas.width=viewport.width;page.render({canvasContext:context,viewport:viewport}).then(function(){var imageData=self.$('#data_canvas')[0].toDataURL();self.$('#slide-image').attr('src',imageData);if(loaded){self.set('can_submit_form',true);}
loaded=true;self._showPreviewColumn();});});});};}
if(!preventOnchange){var input=file.name;var inputVal=input.substr(0,input.lastIndexOf('.'))||input;this._formSetFieldValue('name',inputVal);}},_onChangeSlideUrl:function(ev){var self=this;var url=$(ev.target).val();this._alertRemove();this.isValidUrl=false;this.set('can_submit_form',false);this._fetchUrlPreview(url).then(function(data){self.set('can_submit_form',true);if(data.error){self._alertDisplay(data.error);}else{if(data.completion_time){self._formSetFieldValue('duration',Math.round(data.completion_time*60));}
self.$('#slide-image').attr('src',data.url_src);self._formSetFieldValue('name',data.title);self._formSetFieldValue('description',data.description);self.isValidUrl=true;self._showPreviewColumn();}});},_onClickInstallModule:function(ev){var $btn=$(ev.currentTarget);var moduleId=$btn.data('moduleId');if(this.modulesToInstallStatus){this.set('state','_import');if(this.modulesToInstallStatus.installing){this.$('#o_wslides_install_module_text').text(_.str.sprintf(_t('Already installing "%s".'),this.modulesToInstallStatus.name));}else if(this.modulesToInstallStatus.failed){this.$('#o_wslides_install_module_text').text(_.str.sprintf(_t('Failed to install "%s".'),this.modulesToInstallStatus.name));}}else{this.modulesToInstallStatus=_.extend({},_.find(this.modulesToInstall,function(item){return item.id==moduleId;}));this.set('state','_import');this.$('#o_wslides_install_module_text').text(_.str.sprintf(_t('Do you want to install the "%s" app?'),this.modulesToInstallStatus.name));}},_onClickInstallModuleConfirm:function(){var self=this;var $el=this.$('#o_wslides_install_module_text');$el.text(_.str.sprintf(_t('Installing "%s".'),this.modulesToInstallStatus.name));this.modulesToInstallStatus.installing=true;this._resetModalButton();this._rpc({model:'ir.module.module',method:'button_immediate_install',args:[[this.modulesToInstallStatus.id]],}).then(function(){window.location.href=window.location.origin+window.location.pathname+'?enable_slide_upload';},function(){$el.text(_.str.sprintf(_t('Failed to install "%s".'),self.modulesToInstallStatus.name));self.modulesToInstallStatus.installing=false;self.modulesToInstallStatus.failed=true;self._resetModalButton();});},_onClickGoBack:function(){this.set('state','_select');this.isValidUrl=true;if(this.modulesToInstallStatus&&!this.modulesToInstallStatus.installing){this.modulesToInstallStatus=null;}},_onClickFormSubmit:function(ev){var self=this;var $btn=$(ev.currentTarget);if(this._formValidate()){var values=this._formValidateGetValues($btn.hasClass('o_w_slide_upload_published'));var oldType=this.get('state');this.set('state','_upload');return new Promise(async resolve=>{if(this.__svgLoadingExec){await this.__svgLoadingExec();}
delete this.__svgLoadingExec;resolve();}).then(()=>{return this._rpc({route:'/slides/add_slide',params:values,});}).then(function(data){if(data.error){self.set('state',oldType);self._alertDisplay(data.error);}else{window.location=data.url;}});}},_onClickSlideTypeIcon:function(ev){var $elem=this.$(ev.currentTarget);var slideType=$elem.data('slideType');this.set('state',slideType);this._bindSelect2Dropdown();},});publicWidget.registry.websiteSlidesUpload=publicWidget.Widget.extend({selector:'.o_wslides_js_slide_upload',xmlDependencies:['/website_slides/static/src/xml/website_slides_upload.xml'],events:{'click':'_onUploadClick',},start:function(){if(this.$el.attr('data-open-modal')){this.$el.removeAttr('data-open-modal');this._openDialog(this.$el);}
return this._super.apply(this,arguments);},_openDialog:function($element){var data=$element.data();return new SlideUploadDialog(this,data).open();},_onUploadClick:function(ev){ev.preventDefault();this._openDialog($(ev.currentTarget));},});return{SlideUploadDialog:SlideUploadDialog,websiteSlidesUpload:publicWidget.registry.websiteSlidesUpload};});;

/* /website_slides/static/src/js/slides_category_add.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_slides.category.add',function(require){'use strict';var publicWidget=require('web.public.widget');var Dialog=require('web.Dialog');var core=require('web.core');var _t=core._t;var CategoryAddDialog=Dialog.extend({template:'slides.category.add',init:function(parent,options){options=_.defaults(options||{},{title:_t('Add a section'),size:'medium',buttons:[{text:_t('Save'),classes:'btn-primary',click:this._onClickFormSubmit.bind(this)},{text:_t('Discard'),close:true}]});this.channelId=options.channelId;this._super(parent,options);},_formValidate:function($form){$form.addClass('was-validated');return $form[0].checkValidity();},_onClickFormSubmit:function(ev){var $form=this.$('#slide_category_add_form');if(this._formValidate($form)){$form.submit();}},});publicWidget.registry.websiteSlidesCategoryAdd=publicWidget.Widget.extend({selector:'.o_wslides_js_slide_section_add',xmlDependencies:['/website_slides/static/src/xml/slide_management.xml'],events:{'click':'_onAddSectionClick',},_openDialog:function(channelId){new CategoryAddDialog(this,{channelId:channelId}).open();},_onAddSectionClick:function(ev){ev.preventDefault();this._openDialog($(ev.currentTarget).attr('channel_id'));},});return{categoryAddDialog:CategoryAddDialog,websiteSlidesCategoryAdd:publicWidget.registry.websiteSlidesCategoryAdd};});;

/* /website_slides/static/src/js/slides_slide_archive.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_slides.slide.archive',function(require){'use strict';var publicWidget=require('web.public.widget');var Dialog=require('web.Dialog');var core=require('web.core');var _t=core._t;var SlideArchiveDialog=Dialog.extend({template:'slides.slide.archive',init:function(parent,options){options=_.defaults(options||{},{title:_t('Archive Slide'),size:'medium',buttons:[{text:_t('Archive'),classes:'btn-primary',click:this._onClickArchive.bind(this)},{text:_t('Cancel'),close:true}]});this.$slideTarget=options.slideTarget;this.slideId=this.$slideTarget.data('slideId');this._super(parent,options);},_checkForEmptySections:function(){$('.o_wslides_slide_list_category').each(function(){var $categoryHeader=$(this).find('.o_wslides_slide_list_category_header');var categorySlideCount=$(this).find('.o_wslides_slides_list_slide:not(.o_not_editable)').length;var $emptyFlagContainer=$categoryHeader.find('.o_wslides_slides_list_drag').first();var $emptyFlag=$emptyFlagContainer.find('small');if(categorySlideCount===0&&$emptyFlag.length===0){$emptyFlagContainer.append($('<small>',{'class':"ml-1 text-muted font-weight-bold",text:_t("(empty)")}));}});},_onClickArchive:function(){var self=this;this._rpc({route:'/slides/slide/archive',params:{slide_id:this.slideId},}).then(function(isArchived){if(isArchived){self.$slideTarget.closest('.o_wslides_slides_list_slide').remove();self._checkForEmptySections();}
self.close();});}});publicWidget.registry.websiteSlidesSlideArchive=publicWidget.Widget.extend({selector:'.o_wslides_js_slide_archive',xmlDependencies:['/website_slides/static/src/xml/slide_management.xml'],events:{'click':'_onArchiveSlideClick',},_openDialog:function($slideTarget){new SlideArchiveDialog(this,{slideTarget:$slideTarget}).open();},_onArchiveSlideClick:function(ev){ev.preventDefault();var $slideTarget=$(ev.currentTarget);this._openDialog($slideTarget);},});return{slideArchiveDialog:SlideArchiveDialog,websiteSlidesSlideArchive:publicWidget.registry.websiteSlidesSlideArchive};});;

/* /website_slides/static/src/js/slides_slide_toggle_is_preview.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_slides.slide.preview',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.websiteSlidesSlideToggleIsPreview=publicWidget.Widget.extend({selector:'.o_wslides_js_slide_toggle_is_preview',xmlDependencies:['/website_slides/static/src/xml/slide_management.xml'],events:{'click':'_onPreviewSlideClick',},_toggleSlidePreview:function($slideTarget){this._rpc({route:'/slides/slide/toggle_is_preview',params:{slide_id:$slideTarget.data('slideId')},}).then(function(isPreview){if(isPreview){$slideTarget.removeClass('badge-light badge-hide border');$slideTarget.addClass('badge-success');}else{$slideTarget.removeClass('badge-success');$slideTarget.addClass('badge-light badge-hide border');}});},_onPreviewSlideClick:function(ev){ev.preventDefault();this._toggleSlidePreview($(ev.currentTarget));},});return{websiteSlidesSlideToggleIsPreview:publicWidget.registry.websiteSlidesSlideToggleIsPreview};});;

/* /website_slides/static/src/js/slides_slide_like.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_slides.slides.slide.like',function(require){'use strict';var core=require('web.core');var publicWidget=require('web.public.widget');require('website_slides.slides');var _t=core._t;var SlideLikeWidget=publicWidget.Widget.extend({events:{'click .o_wslides_js_slide_like_up':'_onClickUp','click .o_wslides_js_slide_like_down':'_onClickDown',},_popoverAlert:function($el,message){$el.popover({trigger:'focus',placement:'bottom',container:'body',html:true,content:function(){return message;}}).popover('show');},_onClick:function(slideId,voteType){var self=this;this._rpc({route:'/slides/slide/like',params:{slide_id:slideId,upvote:voteType==='like',},}).then(function(data){if(!data.error){self.$el.find('span.o_wslides_js_slide_like_up span').text(data.likes);self.$el.find('span.o_wslides_js_slide_like_down span').text(data.dislikes);}else{if(data.error==='public_user'){var message=_t('Please <a href="/web/login?redirect=%s">login</a> to vote this lesson');var signupAllowed=data.error_signup_allowed||false;if(signupAllowed){message=_t('Please <a href="/web/signup?redirect=%s">create an account</a> to vote this lesson');}
self._popoverAlert(self.$el,_.str.sprintf(message,(document.URL)));}else if(data.error==='vote_done'){self._popoverAlert(self.$el,_t('You have already voted for this lesson'));}else if(data.error==='slide_access'){self._popoverAlert(self.$el,_t('You don\'t have access to this lesson'));}else if(data.error==='channel_membership_required'){self._popoverAlert(self.$el,_t('You must be member of this course to vote'));}else if(data.error==='channel_comment_disabled'){self._popoverAlert(self.$el,_t('Votes and comments are disabled for this course'));}else if(data.error==='channel_karma_required'){self._popoverAlert(self.$el,_t('You don\'t have enough karma to vote'));}else{self._popoverAlert(self.$el,_t('Unknown error'));}}});},_onClickUp:function(ev){var slideId=$(ev.currentTarget).data('slide-id');return this._onClick(slideId,'like');},_onClickDown:function(ev){var slideId=$(ev.currentTarget).data('slide-id');return this._onClick(slideId,'dislike');},});publicWidget.registry.websiteSlidesSlideLike=publicWidget.Widget.extend({selector:'#wrapwrap',start:function(){var self=this;var defs=[this._super.apply(this,arguments)];$('.o_wslides_js_slide_like').each(function(){defs.push(new SlideLikeWidget(self).attachTo($(this)));});return Promise.all(defs);},});return{slideLikeWidget:SlideLikeWidget,websiteSlidesSlideLike:publicWidget.registry.websiteSlidesSlideLike};});;

/* /website_slides/static/src/js/slides_course_slides_list.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_slides.course.slides.list',function(require){'use strict';var publicWidget=require('web.public.widget');var core=require('web.core');var _t=core._t;publicWidget.registry.websiteSlidesCourseSlidesList=publicWidget.Widget.extend({selector:'.o_wslides_slides_list',xmlDependencies:['/website_slides/static/src/xml/website_slides_upload.xml'],start:function(){this._super.apply(this,arguments);this.channelId=this.$el.data('channelId');this._updateHref();this._bindSortable();},_bindSortable:function(){this.$('ul.o_wslides_js_slides_list_container').sortable({handle:'.o_wslides_slides_list_drag',stop:this._reorderSlides.bind(this),items:'.o_wslides_slide_list_category',placeholder:'o_wslides_slides_list_slide_hilight position-relative mb-1'});this.$('.o_wslides_js_slides_list_container ul').sortable({handle:'.o_wslides_slides_list_drag',connectWith:'.o_wslides_js_slides_list_container ul',stop:this._reorderSlides.bind(this),items:'.o_wslides_slides_list_slide:not(.o_wslides_js_slides_list_empty)',placeholder:'o_wslides_slides_list_slide_hilight position-relative mb-1'});},_checkForEmptySections:function(){this.$('.o_wslides_slide_list_category').each(function(){var $categoryHeader=$(this).find('.o_wslides_slide_list_category_header');var categorySlideCount=$(this).find('.o_wslides_slides_list_slide:not(.o_not_editable)').length;var $emptyFlagContainer=$categoryHeader.find('.o_wslides_slides_list_drag').first();var $emptyFlag=$emptyFlagContainer.find('small');if(categorySlideCount===0&&$emptyFlag.length===0){$emptyFlagContainer.append($('<small>',{'class':"ml-1 text-muted font-weight-bold",text:_t("(empty)")}));}else if(categorySlideCount>0&&$emptyFlag.length>0){$emptyFlag.remove();}});},_getSlides:function(){var categories=[];this.$('.o_wslides_js_list_item').each(function(){categories.push(parseInt($(this).data('slideId')));});return categories;},_reorderSlides:function(){var self=this;self._rpc({route:'/web/dataset/resequence',params:{model:"slide.slide",ids:self._getSlides()}}).then(function(res){self._checkForEmptySections();});},_updateHref:function(){this.$(".o_wslides_js_slides_list_slide_link").each(function(){var href=$(this).attr('href');var operator=href.indexOf('?')!==-1?'&':'?';$(this).attr('href',href+operator+"fullscreen=1");});}});return publicWidget.registry.websiteSlidesCourseSlidesList;});;

/* /website_slides/static/src/js/slides_course_fullscreen_player.js defined in bundle 'web.assets_frontend_lazy' */
var onYouTubeIframeAPIReady=undefined;odoo.define('website_slides.fullscreen',function(require){'use strict';var publicWidget=require('web.public.widget');var core=require('web.core');var config=require('web.config');var QWeb=core.qweb;var _t=core._t;var session=require('web.session');var Quiz=require('website_slides.quiz');var Dialog=require('web.Dialog');var findSlide=function(slideList,matcher){var slideMatch=_.matcher(matcher);return _.find(slideList,slideMatch);};var VideoPlayer=publicWidget.Widget.extend({template:'website.slides.fullscreen.video',youtubeUrl:'https://www.youtube.com/iframe_api',init:function(parent,slide){this.slide=slide;return this._super.apply(this,arguments);},start:function(){var self=this;return Promise.all([this._super.apply(this,arguments),this._loadYoutubeAPI()]).then(function(){self._setupYoutubePlayer();});},_loadYoutubeAPI:function(){var self=this;var prom=new Promise(function(resolve,reject){if($(document).find('script[src="'+self.youtubeUrl+'"]').length===0){var $youtubeElement=$('<script/>',{src:self.youtubeUrl});$(document.head).append($youtubeElement);onYouTubeIframeAPIReady=function(){resolve();};}else{resolve();}});return prom;},_setupYoutubePlayer:function(){this.player=new YT.Player('youtube-player'+this.slide.id,{playerVars:{'autoplay':1,'origin':window.location.origin},events:{'onStateChange':this._onPlayerStateChange.bind(this)}});},_onPlayerStateChange:function(event){var self=this;if(self.slide.completed){return;}
if(event.data!==YT.PlayerState.ENDED){if(!event.target.getCurrentTime){return;}
if(self.tid){clearInterval(self.tid);}
self.currentVideoTime=event.target.getCurrentTime();self.totalVideoTime=event.target.getDuration();self.tid=setInterval(function(){self.currentVideoTime+=1;if(self.totalVideoTime&&self.currentVideoTime>self.totalVideoTime-30){clearInterval(self.tid);if(!self.slide.hasQuestion&&!self.slide.completed){self.trigger_up('slide_to_complete',self.slide);}}},1000);}else{if(self.tid){clearInterval(self.tid);}
this.player=undefined;if(this.slide.hasNext){this.trigger_up('slide_go_next');}}},});var Sidebar=publicWidget.Widget.extend({events:{"click .o_wslides_fs_sidebar_list_item":'_onClickTab',},init:function(parent,slideList,defaultSlide){var result=this._super.apply(this,arguments);this.slideEntries=slideList;this.set('slideEntry',defaultSlide);return result;},start:function(){var self=this;this.on('change:slideEntry',this,this._onChangeCurrentSlide);return this._super.apply(this,arguments).then(function(){$(document).keydown(self._onKeyDown.bind(self));});},destroy:function(){$(document).unbind('keydown',this._onKeyDown.bind(this));return this._super.apply(this,arguments);},goNext:function(){var currentIndex=this._getCurrentIndex();if(currentIndex<this.slideEntries.length-1){this.set('slideEntry',this.slideEntries[currentIndex+1]);}},goPrevious:function(){var currentIndex=this._getCurrentIndex();if(currentIndex>=1){this.set('slideEntry',this.slideEntries[currentIndex-1]);}},setSlideCompleted:function(slideId){var $elem=this.$('.fa-circle-thin[data-slide-id="'+slideId+'"]');$elem.removeClass('fa-circle-thin').addClass('fa-check text-success o_wslides_slide_completed');},updateProgressbar:function(channelCompletion){var completion=Math.min(100,channelCompletion);this.$('.progress-bar').css('width',completion+"%");this.$('.o_wslides_progress_percentage').text(completion);},_getCurrentIndex:function(){var slide=this.get('slideEntry');var currentIndex=_.findIndex(this.slideEntries,function(entry){return entry.id===slide.id&&entry.isQuiz===slide.isQuiz;});return currentIndex;},_onClickMiniQuiz:function(ev){var slideID=parseInt($(ev.currentTarget).data().slide_id);this.set('slideEntry',{slideID:slideID,isMiniQuiz:true});this.trigger_up('change_slide',this.get('slideEntry'));},_onClickTab:function(ev){ev.stopPropagation();var $elem=$(ev.currentTarget);if($elem.data('canAccess')==='True'){var isQuiz=$elem.data('isQuiz');var slideID=parseInt($elem.data('id'));var slide=findSlide(this.slideEntries,{id:slideID,isQuiz:isQuiz});this.set('slideEntry',slide);}},_onChangeCurrentSlide:function(){var slide=this.get('slideEntry');this.$('.o_wslides_fs_sidebar_list_item.active').removeClass('active');var selector='.o_wslides_fs_sidebar_list_item[data-id='+slide.id+'][data-is-quiz!="1"]';this.$(selector).addClass('active');this.trigger_up('change_slide',this.get('slideEntry'));},_onKeyDown:function(ev){switch(ev.key){case"ArrowLeft":this.goPrevious();break;case"ArrowRight":this.goNext();break;}},});var ShareDialog=Dialog.extend({template:'website.slide.share.modal',events:{'click .o_wslides_js_share_email button':'_onShareByEmailClick','click a.o_wslides_js_social_share':'_onSlidesSocialShare','click .o_clipboard_button':'_onShareLinkCopy',},init:function(parent,options,slide){options=_.defaults(options||{},{title:"Share",buttons:[{text:"Cancel",close:true}],size:'medium',});this._super(parent,options);this.slide=slide;this.session=session;},_onShareByEmailClick:function(){var form=this.$('.o_wslides_js_share_email');var input=form.find('input');var slideID=form.find('button').data('slide-id');if(input.val()&&input[0].checkValidity()){form.removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');this._rpc({route:'/slides/slide/send_share_email',params:{slide_id:slideID,email:input.val(),fullscreen:true},}).then(function(){form.html('<div class="alert alert-info" role="alert">'+_t('<strong>Thank you!</strong> Mail has been sent.')+'</div>');});}else{form.addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');input.focus();}},_onSlidesSocialShare:function(ev){ev.preventDefault();var popUpURL=$(ev.currentTarget).attr('href');window.open(popUpURL,'Share Dialog','width=626,height=436');},_onShareLinkCopy:function(ev){ev.preventDefault();var $clipboardBtn=this.$('.o_clipboard_button');$clipboardBtn.tooltip({title:"Copied !",trigger:"manual",placement:"bottom"});var self=this;var clipboard=new ClipboardJS('.o_clipboard_button',{target:function(){return self.$('.o_wslides_js_share_link')[0];},container:this.el});clipboard.on('success',function(){clipboard.destroy();$clipboardBtn.tooltip('show');_.delay(function(){$clipboardBtn.tooltip("hide");},800);});clipboard.on('error',function(e){clipboard.destroy();})},});var ShareButton=publicWidget.Widget.extend({events:{"click .o_wslides_fs_share":'_onClickShareSlide'},init:function(el,slide){var result=this._super.apply(this,arguments);this.slide=slide;return result;},_openDialog:function(){return new ShareDialog(this,{},this.slide).open();},_onClickShareSlide:function(ev){ev.preventDefault();this._openDialog();},_onChangeSlide:function(currentSlide){this.slide=currentSlide;}});var Fullscreen=publicWidget.Widget.extend({events:{"click .o_wslides_fs_toggle_sidebar":'_onClickToggleSidebar',},custom_events:{'change_slide':'_onChangeSlideRequest','slide_to_complete':'_onSlideToComplete','slide_completed':'_onSlideCompleted','slide_go_next':'_onSlideGoToNext',},init:function(parent,slides,defaultSlideId,channelData){var result=this._super.apply(this,arguments);this.initialSlideID=defaultSlideId;this.slides=this._preprocessSlideData(slides);this.channel=channelData;var slide;var urlParams=$.deparam.querystring();if(defaultSlideId){slide=findSlide(this.slides,{id:defaultSlideId,isQuiz:urlParams.quiz==="1"});}else{slide=this.slides[0];}
this.set('slide',slide);this.sidebar=new Sidebar(this,this.slides,slide);this.shareButton=new ShareButton(this,slide);return result;},start:function(){var self=this;this.on('change:slide',this,this._onChangeSlide);if(config.device.size_class>config.device.SIZES.MD){this._toggleSidebar();}
return this._super.apply(this,arguments).then(function(){return self._onChangeSlide();});},attachTo:function(){var defs=[this._super.apply(this,arguments)];defs.push(this.sidebar.attachTo(this.$('.o_wslides_fs_sidebar')));defs.push(this.shareButton.attachTo(this.$('.o_wslides_slide_fs_header')));return $.when.apply($,defs);},_fetchHtmlContent:function(){var self=this;var currentSlide=this.get('slide');return self._rpc({route:"/slides/slide/get_html_content",params:{'slide_id':currentSlide.id}}).then(function(data){if(data.html_content){currentSlide.htmlContent=data.html_content;}});},_fetchSlideContent:function(){var slide=this.get('slide');if(slide.type==='webpage'&&!slide.isQuiz){return this._fetchHtmlContent();}
return Promise.resolve();},_markAsCompleted:function(slideId,completion){var slide=findSlide(this.slides,{id:slideId});slide.completed=true;this.sidebar.setSlideCompleted(slide.id);this.sidebar.updateProgressbar(completion);},_preprocessSlideData:function(slidesDataList){slidesDataList.forEach(function(slideData,index){slideData.hasNext=index<slidesDataList.length-1;if(slideData.type==='video'){slideData.embedCode=$(slideData.embedCode).attr('src')||"";var separator=slideData.embedCode.indexOf("?")!==-1?"&":"?";var scheme=slideData.embedCode.indexOf('//')===0?'https:':'';var params={rel:0,enablejsapi:1,origin:window.location.origin};if(slideData.embedCode.indexOf("//drive.google.com")===-1){params.autoplay=1;}
slideData.embedUrl=slideData.embedCode?scheme+slideData.embedCode+separator+$.param(params):"";}else if(slideData.type==='infographic'){slideData.embedUrl=_.str.sprintf('/web/image/slide.slide/%s/image_1024',slideData.id);}else if(_.contains(['document','presentation'],slideData.type)){slideData.embedUrl=$(slideData.embedCode).attr('src');}
slideData.isQuiz=!!slideData.isQuiz;slideData.hasQuestion=!!slideData.hasQuestion;slideData._autoSetDone=_.contains(['infographic','presentation','document','webpage'],slideData.type)&&!slideData.hasQuestion;});return slidesDataList;},_pushUrlState:function(){var urlParts=window.location.pathname.split('/');urlParts[urlParts.length-1]=this.get('slide').slug;var url=urlParts.join('/');this.$('.o_wslides_fs_exit_fullscreen').attr('href',url);var params={'fullscreen':1};if(this.get('slide').isQuiz){params.quiz=1;}
var fullscreenUrl=_.str.sprintf('%s?%s',url,$.param(params));history.pushState(null,'',fullscreenUrl);},_renderSlide:function(){var slide=this.get('slide');var $content=this.$('.o_wslides_fs_content');$content.empty();if(slide.type==='quiz'||slide.isQuiz){$content.addClass('bg-white');var QuizWidget=new Quiz(this,slide,this.channel);return QuizWidget.appendTo($content);}
if(_.contains(['document','presentation','infographic'],slide.type)){$content.html(QWeb.render('website.slides.fullscreen.content',{widget:this}));}else if(slide.type==='video'){this.videoPlayer=new VideoPlayer(this,slide);return this.videoPlayer.appendTo($content);}else if(slide.type==='webpage'){var $wpContainer=$('<div>').addClass('o_wslide_fs_webpage_content bg-white block w-100 overflow-auto');$(slide.htmlContent).appendTo($wpContainer);$content.append($wpContainer);this.trigger_up('widgets_start_request',{$target:$content,});}
return Promise.resolve();},_setCompleted:function(slideId){var self=this;var slide=findSlide(this.slides,{id:slideId});if(!slide.completed){return this._rpc({route:'/slides/slide/set_completed',params:{slide_id:slide.id,}}).then(function(data){self._markAsCompleted(slideId,data.channel_completion);return Promise.resolve();});}
return Promise.resolve();},_onChangeSlide:function(){var self=this;var slide=this.get('slide');self._pushUrlState();return this._fetchSlideContent().then(function(){var websiteName=document.title.split(" | ")[1];document.title=(websiteName)?slide.name+' | '+websiteName:slide.name;return self._renderSlide();}).then(function(){if(slide._autoSetDone&&!session.is_website_user){if(['document','presentation'].includes(slide.type)){self.el.querySelector('iframe.o_wslides_iframe_viewer').addEventListener('load',()=>self._setCompleted(slide.id));}else{return self._setCompleted(slide.id);}}});},_onChangeSlideRequest:function(ev){var slideData=ev.data;var newSlide=findSlide(this.slides,{id:slideData.id,isQuiz:slideData.isQuiz||false,});this.set('slide',newSlide);this.shareButton._onChangeSlide(newSlide);},_onSlideCompleted:function(ev){var slide=ev.data.slide;var completion=ev.data.completion;this._markAsCompleted(slide.id,completion);},_onSlideToComplete:function(ev){if(!session.is_website_user){var slideId=ev.data.id;this._setCompleted(slideId);}},_onSlideGoToNext:function(ev){this.sidebar.goNext();},_onClickToggleSidebar:function(ev){ev.preventDefault();this._toggleSidebar();},_toggleSidebar:function(){this.$('.o_wslides_fs_sidebar').toggleClass('o_wslides_fs_sidebar_hidden');this.$('.o_wslides_fs_toggle_sidebar').toggleClass('active');},});publicWidget.registry.websiteSlidesFullscreenPlayer=publicWidget.Widget.extend({selector:'.o_wslides_fs_main',xmlDependencies:['/website_slides/static/src/xml/website_slides_fullscreen.xml','/website_slides/static/src/xml/website_slides_share.xml'],start:function(){var self=this;var proms=[this._super.apply(this,arguments)];var fullscreen=new Fullscreen(this,this._getSlides(),this._getCurrentSlideID(),this._extractChannelData());proms.push(fullscreen.attachTo(".o_wslides_fs_main"));return Promise.all(proms).then(function(){$('#edit-page-menu a[data-action="edit"]').on('click',self._onWebEditorClick.bind(self));});},_onWebEditorClick:function(e){e.preventDefault();e.stopPropagation();window.location=`${window.location.pathname}?fullscreen=0&enable_editor=1`;},_extractChannelData:function(){return this.$el.data();},_getCurrentSlideID:function(){return parseInt(this.$('.o_wslides_fs_sidebar_list_item.active').data('id'));},_getSlides:function(){var $slides=this.$('.o_wslides_fs_sidebar_list_item[data-can-access="True"]');var slideList=[];$slides.each(function(){var slideData=$(this).data();slideList.push(slideData);});return slideList;},});return Fullscreen;});;

/* /website_slides/static/src/js/slides_course_join.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_slides.course.join.widget',function(require){'use strict';var core=require('web.core');var publicWidget=require('web.public.widget');require('website_slides.slides');var _t=core._t;var CourseJoinWidget=publicWidget.Widget.extend({template:'slide.course.join',xmlDependencies:['/website_slides/static/src/xml/channel_management.xml'],events:{'click .o_wslides_js_course_join_link':'_onClickJoin',},init:function(parent,channelId){this.channelId=channelId;return this._super.apply(this,arguments);},_popoverAlert:function($el,message){$el.popover({trigger:'focus',placement:'bottom',container:'body',html:true,content:function(){return message;}}).popover('show');},_onClickJoin:function(event){var channelId=this.channelId||$(event.currentTarget).data('channel-id');var self=this;this._rpc({route:'/slides/channel/join',params:{channel_id:channelId,},}).then(function(data){if(!data.error){location.reload();}else{if(data.error==='public_user'){var message=_t('Please <a href="/web/login?redirect=%s">login</a> to join this course');var signupAllowed=data.error_signup_allowed||false;if(signupAllowed){message=_t('Please <a href="/web/signup?redirect=%s">create an account</a> to join this course');}
self._popoverAlert(self.$el,_.str.sprintf(message,(document.URL)));}else if(data.error==='join_done'){self._popoverAlert(self.$el,_t('You have already joined this channel'));}else{self._popoverAlert(self.$el,_t('Unknown error'));}}});},});publicWidget.registry.websiteSlidesCourseJoin=publicWidget.Widget.extend({selector:'.o_wslides_js_course_join_link',start:function(){var self=this;var proms=[this._super.apply(this,arguments)];$('.o_wslides_js_course_join').each(function(){proms.push(new CourseJoinWidget(self).attachTo($(this)));});return Promise.all(proms);},});return{courseJoinWidget:CourseJoinWidget,websiteSlidesCourseJoin:publicWidget.registry.websiteSlidesCourseJoin};});;

/* /website_slides/static/src/js/slides_course_quiz.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_slides.quiz',function(require){'use strict';var publicWidget=require('web.public.widget');var core=require('web.core');var session=require('web.session');var CourseJoinWidget=require('website_slides.course.join.widget').courseJoinWidget;var QWeb=core.qweb;var _t=core._t;var Quiz=publicWidget.Widget.extend({template:'slide.slide.quiz',xmlDependencies:['/website_slides/static/src/xml/slide_quiz.xml'],events:{"click .o_wslides_quiz_answer":'_onAnswerClick',"click .o_wslides_js_lesson_quiz_submit":'_onSubmitQuiz',"click .o_wslides_quiz_btn":'_onClickNext',"click .o_wslides_quiz_continue":'_onClickNext'},init:function(parent,slide_data,channel_data,quiz_data){this.slide=_.defaults(slide_data,{id:0,name:'',hasNext:false,completed:false,readonly:false,});this.quiz=quiz_data||false;this.readonly=slide_data.readonly||false;this.publicUser=session.is_website_user;this.redirectURL=encodeURIComponent(document.URL);this.channel=channel_data;return this._super.apply(this,arguments);},willStart:function(){var defs=[this._super.apply(this,arguments)];if(!this.quiz){defs.push(this._fetchQuiz());}
return Promise.all(defs);},start:function(){var self=this;return this._super.apply(this,arguments).then(function(){self._renderAnswers();self._renderAnswersHighlighting();self._renderValidationInfo();new CourseJoinWidget(self,self.channel.channelId).appendTo(self.$('.o_wslides_course_join_widget'));});},_alertHide:function(){this.$('.o_wslides_js_lesson_quiz_error').addClass('d-none');},_alertShow:function(alert_code){var message=_t('There was an error validating this quiz.');if(!alert_code||alert_code==='slide_quiz_incomplete'){message=_t('All questions must be answered !');}
else if(alert_code==='slide_quiz_done'){message=_t('This quiz is already done. Retaking it is not possible.');}
else if(alert_code==='public_user'){message=_t('You must be logged to submit the quiz.');}
this.$('.o_wslides_js_lesson_quiz_error span:first').html(message);this.$('.o_wslides_js_lesson_quiz_error').removeClass('d-none');},_fetchQuiz:function(){var self=this;return self._rpc({route:'/slides/slide/quiz/get',params:{'slide_id':self.slide.id,}}).then(function(quiz_data){self.quiz={questions:quiz_data.slide_questions||[],quizAttemptsCount:quiz_data.quiz_attempts_count||0,quizKarmaGain:quiz_data.quiz_karma_gain||0,quizKarmaWon:quiz_data.quiz_karma_won||0,};});},_renderAnswers:function(){var self=this;this.$('input[type=radio]').each(function(){$(this).prop('disabled',self.slide.readonly||self.slide.completed);});},_renderAnswersHighlighting:function(){var self=this;this.$('a.o_wslides_quiz_answer').each(function(){var $answer=$(this);var answerId=$answer.data('answerId');if(_.contains(self.quiz.goodAnswers,answerId)){$answer.removeClass('list-group-item-danger').addClass('list-group-item-success');$answer.find('i.fa').addClass('d-none');$answer.find('i.fa-check-circle').removeClass('d-none');}
else if(_.contains(self.quiz.badAnswers,answerId)){$answer.removeClass('list-group-item-success').addClass('list-group-item-danger');$answer.find('i.fa').addClass('d-none');$answer.find('i.fa-times-circle').removeClass('d-none');$answer.find('label input').prop('checked',false);}
else{if(!self.slide.completed){$answer.removeClass('list-group-item-danger list-group-item-success');$answer.find('i.fa').addClass('d-none');$answer.find('i.fa-circle').removeClass('d-none');}}});},_renderSuccessModal:function(){var $modal=this.$('#slides_quiz_modal');if(!$modal.length){this.$el.append(QWeb.render('slide.slide.quiz.finish',{'widget':this}));$modal=this.$('#slides_quiz_modal');}
$modal.modal({'show':true,});$modal.on('hidden.bs.modal',function(){$modal.remove();});},_renderValidationInfo:function(){var $validationElem=this.$('.o_wslides_js_lesson_quiz_validation');$validationElem.html(QWeb.render('slide.slide.quiz.validation',{'widget':this}));},_submitQuiz:function(checkedAnswerIds){var self=this;return this._rpc({route:'/slides/slide/quiz/submit',params:{slide_id:self.slide.id,answer_ids:checkedAnswerIds,}}).then(function(data){if(data.error){self._alertShow(data.error);}else{self.quiz=_.extend(self.quiz,data);if(data.completed){self._renderSuccessModal(data);self.slide.completed=true;self.trigger_up('slide_completed',{slide:self.slide,completion:data.channel_completion});}
self._renderAnswersHighlighting();self._renderValidationInfo();}});},_onAnswerClick:function(ev){ev.preventDefault();if(!this.slide.readonly&&!this.slide.completed){$(ev.currentTarget).find('input[type=radio]').prop('checked',true);}
this._alertHide();},_onClickNext:function(ev){if(this.slide.hasNext){if(this.$('#slides_quiz_modal').length!==0){this.$('#slides_quiz_modal').modal('hide');}
this.trigger_up('slide_go_next');}},_onSubmitQuiz:function(ev){var inputs=this.$('input[type=radio]:checked');var values=[];for(var i=0;i<inputs.length;i++){values.push(parseInt($(inputs[i]).val()));}
if(values.length===this.quiz.questions.length){this._alertHide();this._submitQuiz(values);}else{this._alertShow();}},});publicWidget.registry.websiteSlidesQuizNoFullscreen=publicWidget.Widget.extend({selector:'.o_wslides_lesson_main',custom_events:{slide_go_next:'_onQuizNextSlide',slide_completed:'_onQuizCompleted',},start:function(){var self=this;this.quizWidgets=[];var defs=[this._super.apply(this,arguments)];this.$('.o_wslides_js_lesson_quiz').each(function(){var slideData=$(this).data();var channelData=self._extractChannelData(slideData);slideData.quizData={questions:self._extractQuestionsAndAnswers(),quizKarmaMax:slideData.quizKarmaMax,quizKarmaWon:slideData.quizKarmaWon||0,quizKarmaGain:slideData.quizKarmaGain,quizAttemptsCount:slideData.quizAttemptsCount,};defs.push(new Quiz(self,slideData,channelData,slideData.quizData).attachTo($(this)));});return Promise.all(defs);},_onQuizCompleted:function(ev){var self=this;var slide=ev.data.slide;var completion=ev.data.completion;this.$('#o_wslides_lesson_aside_slide_check_'+slide.id).addClass('text-success fa-check').removeClass('text-600 fa-circle-o');$('.o_wslides_lesson_header .progress-bar').css('width',completion+"%");$('.o_wslides_lesson_header .progress span').text(_.str.sprintf("%s %%",completion));},_onQuizNextSlide:function(){var url=this.$('.o_wslides_js_lesson_quiz').data('next-slide-url');window.location.replace(url);},_extractChannelData:function(slideData){return{channelId:slideData.channelId,channelEnroll:slideData.channelEnroll,signupAllowed:slideData.signupAllowed};},_extractQuestionsAndAnswers:function(){var questions=[];this.$('.o_wslides_js_lesson_quiz_question').each(function(){var $question=$(this);var answers=[];$question.find('.o_wslides_quiz_answer').each(function(){var $answer=$(this);answers.push({id:$answer.data('answerId'),text:$answer.data('text'),});});questions.push({id:$question.data('questionId'),title:$question.data('title'),answers:answers,});});return questions;},});return Quiz;});;

/* /website_slides/static/src/js/slides_course_unsubscribe.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_slides.unsubscribe_modal',function(require){'use strict';var core=require('web.core');var Dialog=require('web.Dialog');var publicWidget=require('web.public.widget');var utils=require('web.utils');var QWeb=core.qweb;var _t=core._t;var SlideUnsubscribeDialog=Dialog.extend({template:'slides.course.unsubscribe.modal',_texts:{titleSubscribe:_t("Subscribe"),titleUnsubscribe:_t("Unsubscribe"),titleLeaveCourse:_t("Leave the course")},init:function(parent,options){options=_.defaults(options||{},{title:options.isFollower==='True'?this._texts.titleSubscribe:this._texts.titleUnsubscribe,size:'medium',});this._super(parent,options);this.set('state','_subscription');this.on('change:state',this,this._onChangeType);this.channelID=parseInt(options.channelId,10);this.isFollower=options.isFollower==='True';this.enroll=options.enroll;},start:function(){var self=this;return this._super.apply(this,arguments).then(function(){self.$('input#subscribed').prop('checked',self.isFollower);self._resetModal();});},getSubscriptionState:function(){return this.$('input#subscribed').prop('checked');},_getModalButtons:function(){var btnList=[];var state=this.get('state');if(state==='_subscription'){btnList.push({text:_t("Save"),classes:"btn-primary",click:this._onClickSubscriptionSubmit.bind(this)});btnList.push({text:_t("Discard"),close:true});btnList.push({text:_t("Leave the course"),classes:"btn-danger ml-auto",click:this._onClickLeaveCourse.bind(this)});}else if(state==='_leave'){btnList.push({text:_t("Leave the course"),classes:"btn-danger",click:this._onClickLeaveCourseSubmit.bind(this)});btnList.push({text:_t("Discard"),click:this._onClickLeaveCourseCancel.bind(this)});}
return btnList;},_resetModal:function(){var state=this.get('state');if(state==='_subscription'){this.set_title(this.isFollower?this._texts.titleUnsubscribe:this._texts.titleSubscribe);this.$('input#subscribed').prop('checked',this.isFollower);}
else if(state==='_leave'){this.set_title(this._texts.titleLeaveCourse);}
this.set_buttons(this._getModalButtons());},_onClickLeaveCourse:function(){this.set('state','_leave');},_onClickLeaveCourseCancel:function(){this.set('state','_subscription');},_onClickLeaveCourseSubmit:function(){this._rpc({route:'/slides/channel/leave',params:{channel_id:this.channelID},}).then(function(){window.location.reload();});},_onClickSubscriptionSubmit:function(){if(this.isFollower===this.getSubscriptionState()){this.destroy();return;}
this._rpc({route:this.getSubscriptionState()?'/slides/channel/subscribe':'/slides/channel/unsubscribe',params:{channel_id:this.channelID},}).then(function(){window.location.reload();});},_onChangeType:function(){var currentType=this.get('state');var tmpl;if(currentType==='_subscription'){tmpl='slides.course.unsubscribe.modal.subscription';}else if(currentType==='_leave'){tmpl='slides.course.unsubscribe.modal.leave';}
this.$('.o_w_slide_unsubscribe_modal_container').empty();this.$('.o_w_slide_unsubscribe_modal_container').append(QWeb.render(tmpl,{widget:this}));this._resetModal();},});publicWidget.registry.websiteSlidesUnsubscribe=publicWidget.Widget.extend({selector:'.o_wslides_js_channel_unsubscribe',xmlDependencies:['/website_slides/static/src/xml/website_slides_unsubscribe.xml'],events:{'click':'_onUnsubscribeClick',},_openDialog:function($element){var data=$element.data();return new SlideUnsubscribeDialog(this,data).open();},_onUnsubscribeClick:function(ev){ev.preventDefault();this._openDialog($(ev.currentTarget));},});return{SlideUnsubscribeDialog:SlideUnsubscribeDialog,websiteSlidesUnsubscribe:publicWidget.registry.websiteSlidesUnsubscribe};});;

/* /website_slides_survey/static/src/js/slides_upload.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_slides_survey.upload_modal',function(require){"use strict";var core=require('web.core');var _t=core._t;var SlidesUpload=require('website_slides.upload_modal');SlidesUpload.SlideUploadDialog.include({_setup:function(){this._super.apply(this,arguments);this.slide_type_data['certification']={icon:'fa-trophy',label:_t('Certification'),template:'website.slide.upload.modal.certification',};},_bindSelect2Dropdown:function(){this._super.apply(this,arguments);var self=this;this.$('#certification_id').select2(this._select2Wrapper(_t('Certification'),false,function(){return self._rpc({route:'/slides_survey/certification/search_read',params:{fields:['title'],}});},'title'));},_formValidate:function(){var result=this._super.apply(this,arguments);var $certificationInput=this.$('#certification_id');if($certificationInput.length!==0){var $select2Container=$certificationInput.closest('.form-group').find('.select2-container');$select2Container.removeClass('is-invalid is-valid');if($certificationInput.is(':invalid')){$select2Container.addClass('is-invalid');}else if($certificationInput.is(':valid')){$select2Container.addClass('is-valid');}}
return result;},_getSelect2DropdownValues:function(){var result=this._super.apply(this,arguments);var certificateValue=this.$('#certification_id').select2('data');if(certificateValue){result['survey_id']=certificateValue.id;}
return result;}});SlidesUpload.websiteSlidesUpload.include({xmlDependencies:(SlidesUpload.websiteSlidesUpload.prototype.xmlDependencies||[]).concat(["/website_slides_survey/static/src/xml/website_slide_upload.xml"]),});});;

/* /website_slides_survey/static/src/js/slides_course_fullscreen_player.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_slides_survey.fullscreen',function(require){"use strict";var core=require('web.core');var QWeb=core.qweb;var Fullscreen=require('website_slides.fullscreen');Fullscreen.include({xmlDependencies:(Fullscreen.prototype.xmlDependencies||[]).concat(["/website_slides_survey/static/src/xml/website_slides_fullscreen.xml"]),_renderSlide:function(){var def=this._super.apply(this,arguments);var $content=this.$('.o_wslides_fs_content');if(this.get('slide').type==="certification"){$content.html(QWeb.render('website.slides.fullscreen.certification',{widget:this}));}
return Promise.all([def]);},});});;

/* /website_links/static/src/js/website_links.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_links.website_links',function(require){'use strict';var core=require('web.core');var publicWidget=require('web.public.widget');var _t=core._t;var SelectBox=publicWidget.Widget.extend({events:{'change':'_onChange',},init:function(parent,obj,placeholder){this._super.apply(this,arguments);this.obj=obj;this.placeholder=placeholder;},willStart:function(){var self=this;var defs=[this._super.apply(this,arguments)];defs.push(this._rpc({model:this.obj,method:'search_read',params:{fields:['id','name'],},}).then(function(result){self.objects=_.map(result,function(val){return{id:val.id,text:val.name};});}));return Promise.all(defs);},start:function(){var self=this;this.$el.select2({placeholder:self.placeholder,allowClear:true,createSearchChoice:function(term){if(self._objectExists(term)){return null;}
return{id:term,text:_.str.sprintf("Create '%s'",term)};},createSearchChoicePosition:'bottom',multiple:false,data:self.objects,minimumInputLength:self.objects.length>100?3:0,});},_objectExists:function(query){return _.find(this.objects,function(val){return val.text.toLowerCase()===query.toLowerCase();})!==undefined;},_createObject:function(name){var self=this;var args={name:name};if(this.obj==="utm.campaign"){args.is_website=true;}
return this._rpc({model:this.obj,method:'create',args:[args],}).then(function(record){self.$el.attr('value',record);self.objects.push({'id':record,'text':name});});},_onChange:function(ev){if(!ev.added||!_.isString(ev.added.id)){return;}
this._createObject(ev.added.id);},});var RecentLinkBox=publicWidget.Widget.extend({template:'website_links.RecentLink',xmlDependencies:['/website_links/static/src/xml/recent_link.xml'],events:{'click .btn_shorten_url_clipboard':'_toggleCopyButton','click .o_website_links_edit_code':'_editCode','click .o_website_links_ok_edit':'_onLinksOkClick','click .o_website_links_cancel_edit':'_onLinksCancelClick','submit #o_website_links_edit_code_form':'_onSubmitCode',},init:function(parent,obj){this._super.apply(this,arguments);this.link_obj=obj;this.animating_copy=false;},start:function(){new ClipboardJS(this.$('.btn_shorten_url_clipboard').get(0));return this._super.apply(this,arguments);},_toggleCopyButton:function(){if(this.animating_copy){return;}
var self=this;this.animating_copy=true;var top=this.$('.o_website_links_short_url').position().top;this.$('.o_website_links_short_url').clone().css('position','absolute').css('left',15).css('top',top-2).css('z-index',2).removeClass('o_website_links_short_url').addClass('animated-link').insertAfter(this.$('.o_website_links_short_url')).animate({opacity:0,top:'-=20',},500,function(){self.$('.animated-link').remove();self.animating_copy=false;});},_notification:function(message){this.$('.notification').append('<strong>'+message+'</strong>');},_editCode:function(){var initCode=this.$('#o_website_links_code').html();this.$('#o_website_links_code').html('<form style="display:inline;" id="o_website_links_edit_code_form"><input type="hidden" id="init_code" value="'+initCode+'"/><input type="text" id="new_code" value="'+initCode+'"/></form>');this.$('.o_website_links_edit_code').hide();this.$('.copy-to-clipboard').hide();this.$('.o_website_links_edit_tools').show();},_cancelEdit:function(){this.$('.o_website_links_edit_code').show();this.$('.copy-to-clipboard').show();this.$('.o_website_links_edit_tools').hide();this.$('.o_website_links_code_error').hide();var oldCode=this.$('#o_website_links_edit_code_form #init_code').val();this.$('#o_website_links_code').html(oldCode);this.$('#code-error').remove();this.$('#o_website_links_code form').remove();},_submitCode:function(){var self=this;var initCode=this.$('#o_website_links_edit_code_form #init_code').val();var newCode=this.$('#o_website_links_edit_code_form #new_code').val();if(newCode===''){self.$('.o_website_links_code_error').html(_t("The code cannot be left empty"));self.$('.o_website_links_code_error').show();return;}
function showNewCode(newCode){self.$('.o_website_links_code_error').html('');self.$('.o_website_links_code_error').hide();self.$('#o_website_links_code form').remove();var host=self.$('#o_website_links_host').html();self.$('#o_website_links_code').html(newCode);self.$('.btn_shorten_url_clipboard').attr('data-clipboard-text',host+newCode);self.$('.o_website_links_edit_code').show();self.$('.copy-to-clipboard').show();self.$('.o_website_links_edit_tools').hide();}
if(initCode===newCode){showNewCode(newCode);}else{this._rpc({route:'/website_links/add_code',params:{init_code:initCode,new_code:newCode,},}).then(function(result){showNewCode(result[0].code);},function(){self.$('.o_website_links_code_error').show();self.$('.o_website_links_code_error').html(_t("This code is already taken"));});}},_onLinksOkClick:function(ev){ev.preventDefault();this._submitCode();},_onLinksCancelClick:function(ev){ev.preventDefault();this._cancelEdit();},_onSubmitCode:function(ev){ev.preventDefault();this._submitCode();},});var RecentLinks=publicWidget.Widget.extend({getRecentLinks:function(filter){var self=this;return this._rpc({route:'/website_links/recent_links',params:{filter:filter,limit:20,},}).then(function(result){_.each(result.reverse(),function(link){self._addLink(link);});self._updateNotification();},function(){var message=_t("Unable to get recent links");self.$el.append('<div class="alert alert-danger">'+message+'</div>');});},_addLink:function(link){var nbLinks=this.getChildren().length;var recentLinkBox=new RecentLinkBox(this,link);recentLinkBox.prependTo(this.$el);$('.link-tooltip').tooltip();if(nbLinks===0){this._updateNotification();}},removeLinks:function(){_.invoke(this.getChildren(),'destroy');},_updateNotification:function(){if(this.getChildren().length===0){var message=_t("You don't have any recent links.");$('.o_website_links_recent_links_notification').html('<div class="alert alert-info">'+message+'</div>');}else{$('.o_website_links_recent_links_notification').empty();}},});publicWidget.registry.websiteLinks=publicWidget.Widget.extend({selector:'.o_website_links_create_tracked_url',events:{'click #filter-newest-links':'_onFilterNewestLinksClick','click #filter-most-clicked-links':'_onFilterMostClickedLinksClick','click #filter-recently-used-links':'_onFilterRecentlyUsedLinksClick','click #generated_tracked_link a':'_onGeneratedTrackedLinkClick','keyup #url':'_onUrlKeyUp','click #btn_shorten_url':'_onShortenUrlButtonClick','submit #o_website_links_link_tracker_form':'_onFormSubmit',},start:function(){var defs=[this._super.apply(this,arguments)];var campaignSelect=new SelectBox(this,'utm.campaign',_t("e.g. Promotion of June, Winter Newsletter, .."));defs.push(campaignSelect.attachTo($('#campaign-select')));var mediumSelect=new SelectBox(this,'utm.medium',_t("e.g. Newsletter, Social Network, .."));defs.push(mediumSelect.attachTo($('#channel-select')));var sourceSelect=new SelectBox(this,'utm.source',_t("e.g. Search Engine, Website page, .."));defs.push(sourceSelect.attachTo($('#source-select')));this.recentLinks=new RecentLinks(this);defs.push(this.recentLinks.appendTo($('#o_website_links_recent_links')));this.recentLinks.getRecentLinks('newest');new ClipboardJS($('#btn_shorten_url').get(0));this.url_copy_animating=false;$('[data-toggle="tooltip"]').tooltip();return Promise.all(defs);},_onFilterNewestLinksClick:function(){this.recentLinks.removeLinks();this.recentLinks.getRecentLinks('newest');},_onFilterMostClickedLinksClick:function(){this.recentLinks.removeLinks();this.recentLinks.getRecentLinks('most-clicked');},_onFilterRecentlyUsedLinksClick:function(){this.recentLinks.removeLinks();this.recentLinks.getRecentLinks('recently-used');},_onGeneratedTrackedLinkClick:function(){$('#generated_tracked_link a').text(_t("Copied")).removeClass('btn-primary').addClass('btn-success');setTimeout(function(){$('#generated_tracked_link a').text(_t("Copy")).removeClass('btn-success').addClass('btn-primary');},5000);},_onUrlKeyUp:function(ev){if(!$('#btn_shorten_url').hasClass('btn-copy')||ev.which===13){return;}
$('#btn_shorten_url').removeClass('btn-success btn-copy').addClass('btn-primary').html('Get tracked link');$('#generated_tracked_link').css('display','none');$('.o_website_links_utm_forms').show();},_onShortenUrlButtonClick:function(){if(!$('#btn_shorten_url').hasClass('btn-copy')||this.url_copy_animating){return;}
var self=this;this.url_copy_animating=true;$('#generated_tracked_link').clone().css('position','absolute').css('left','78px').css('bottom','8px').css('z-index',2).removeClass('#generated_tracked_link').addClass('url-animated-link').appendTo($('#generated_tracked_link')).animate({opacity:0,bottom:'+=20',},500,function(){$('.url-animated-link').remove();self.url_copy_animating=false;});},_onFormSubmit:function(ev){var self=this;ev.preventDefault();if($('#btn_shorten_url').hasClass('btn-copy')){return;}
ev.stopPropagation();var campaignID=$('#campaign-select').attr('value');var mediumID=$('#channel-select').attr('value');var sourceID=$('#source-select').attr('value');var params={};params.url=$('#url').val();if(campaignID!==''){params.campaign_id=parseInt(campaignID);}
if(mediumID!==''){params.medium_id=parseInt(mediumID);}
if(sourceID!==''){params.source_id=parseInt(sourceID);}
$('#btn_shorten_url').text(_t("Generating link..."));this._rpc({route:'/website_links/new',params:params,}).then(function(result){if('error'in result){if(result.error==='empty_url'){$('.notification').html('<div class="alert alert-danger">The URL is empty.</div>');}else if(result.error==='url_not_found'){$('.notification').html('<div class="alert alert-danger">URL not found (404)</div>');}else{$('.notification').html('<div class="alert alert-danger">An error occur while trying to generate your link. Try again later.</div>');}}else{var link=result[0];$('#btn_shorten_url').removeClass('btn-primary').addClass('btn-success btn-copy').html('Copy');$('#btn_shorten_url').attr('data-clipboard-text',link.short_url);$('.notification').html('');$('#generated_tracked_link').html(link.short_url);$('#generated_tracked_link').css('display','inline');self.recentLinks._addLink(link);$('#campaign-select').select2('val','');$('#channel-select').select2('val','');$('#source-select').select2('val','');$('.o_website_links_utm_forms').hide();}});},});return{SelectBox:SelectBox,RecentLinkBox:RecentLinkBox,RecentLinks:RecentLinks,};});;

/* /website_links/static/src/js/website_links_code_editor.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_links.code_editor',function(require){'use strict';var core=require('web.core');var publicWidget=require('web.public.widget');var _t=core._t;publicWidget.registry.websiteLinksCodeEditor=publicWidget.Widget.extend({selector:'#wrapwrap:has(.o_website_links_edit_code)',events:{'click .o_website_links_edit_code':'_onEditCodeClick','click .o_website_links_cancel_edit':'_onCancelEditClick','submit #edit-code-form':'_onEditCodeFormSubmit','click .o_website_links_ok_edit':'_onEditCodeFormSubmit',},_showNewCode:function(newCode){$('.o_website_links_code_error').html('');$('.o_website_links_code_error').hide();$('#o_website_links_code form').remove();var host=$('#short-url-host').html();$('#o_website_links_code').html(newCode);$('.copy-to-clipboard').attr('data-clipboard-text',host+newCode);$('.o_website_links_edit_code').show();$('.copy-to-clipboard').show();$('.o_website_links_edit_tools').hide();},_submitCode:function(){var initCode=$('#edit-code-form #init_code').val();var newCode=$('#edit-code-form #new_code').val();var self=this;if(newCode===''){self.$('.o_website_links_code_error').html(_t("The code cannot be left empty"));self.$('.o_website_links_code_error').show();return;}
this._showNewCode(newCode);if(initCode===newCode){this._showNewCode(newCode);}else{return this._rpc({route:'/website_links/add_code',params:{init_code:initCode,new_code:newCode,},}).then(function(result){self._showNewCode(result[0].code);},function(){$('.o_website_links_code_error').show();$('.o_website_links_code_error').html(_t("This code is already taken"));});}
return Promise.resolve();},_onEditCodeClick:function(){var initCode=$('#o_website_links_code').html();$('#o_website_links_code').html('<form style="display:inline;" id="edit-code-form"><input type="hidden" id="init_code" value="'+initCode+'"/><input type="text" id="new_code" value="'+initCode+'"/></form>');$('.o_website_links_edit_code').hide();$('.copy-to-clipboard').hide();$('.o_website_links_edit_tools').show();},_onCancelEditClick:function(ev){ev.preventDefault();$('.o_website_links_edit_code').show();$('.copy-to-clipboard').show();$('.o_website_links_edit_tools').hide();$('.o_website_links_code_error').hide();var oldCode=$('#edit-code-form #init_code').val();$('#o_website_links_code').html(oldCode);$('#code-error').remove();$('#o_website_links_code form').remove();},_onEditCodeFormSubmit:function(ev){ev.preventDefault();this._submitCode();},});});;

/* /website_links/static/src/js/website_links_charts.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_links.charts',function(require){'use strict';var core=require('web.core');var publicWidget=require('web.public.widget');var _t=core._t;var BarChart=publicWidget.Widget.extend({jsLibs:['/web/static/lib/Chart/Chart.js',],init:function(parent,beginDate,endDate,dates){this._super.apply(this,arguments);this.beginDate=beginDate;this.endDate=endDate;this.number_of_days=this.endDate.diff(this.beginDate,'days')+2;this.dates=dates;},start:function(){var clicksArray=[];var beginDateCopy=this.beginDate;for(var i=0;i<this.number_of_days;i++){var dateKey=beginDateCopy.format('YYYY-MM-DD');clicksArray.push([dateKey,(dateKey in this.dates)?this.dates[dateKey]:0]);beginDateCopy.add(1,'days');}
var nbClicks=0;var data=[];var labels=[];clicksArray.forEach(function(pt){labels.push(pt[0]);nbClicks+=pt[1];data.push(pt[1]);});this.$('.title').html(nbClicks+_t(' clicks'));var config={type:'line',data:{labels:labels,datasets:[{data:data,fill:'start',label:_t('# of clicks'),backgroundColor:'#ebf2f7',borderColor:'#6aa1ca',}],},};var canvas=this.$('canvas')[0];var context=canvas.getContext('2d');new Chart(context,config);},});var PieChart=publicWidget.Widget.extend({jsLibs:['/web/static/lib/Chart/Chart.js',],init:function(parent,data){this._super.apply(this,arguments);this.data=data;},start:function(){var labels=[];var data=[];for(var i=0;i<this.data.length;i++){var countryName=this.data[i]['country_id']?this.data[i]['country_id'][1]:_t('Undefined');labels.push(countryName+' ('+this.data[i]['country_id_count']+')');data.push(this.data[i]['country_id_count']);}
this.$('.title').html(this.data.length+_t(' countries'));var config={type:'pie',data:{labels:labels,datasets:[{data:data,label:this.data.length>0?this.data[0].key:_t('No data'),}]},};var canvas=this.$('canvas')[0];var context=canvas.getContext('2d');new Chart(context,config);},});publicWidget.registry.websiteLinksCharts=publicWidget.Widget.extend({selector:'.o_website_links_chart',events:{'click .graph-tabs li a':'_onGraphTabClick','click .copy-to-clipboard':'_onCopyToClipboardClick',},start:function(){var self=this;this.charts={};var linkID=parseInt($('#link_id').val());this.links_domain=['link_id','=',linkID];var defs=[];defs.push(this._totalClicks());defs.push(this._clicksByDay());defs.push(this._clicksByCountry());defs.push(this._lastWeekClicksByCountry());defs.push(this._lastMonthClicksByCountry());defs.push(this._super.apply(this,arguments));new ClipboardJS($('.copy-to-clipboard')[0]);this.animating_copy=false;return Promise.all(defs).then(function(results){var _totalClicks=results[0];var _clicksByDay=results[1];var _clicksByCountry=results[2];var _lastWeekClicksByCountry=results[3];var _lastMonthClicksByCountry=results[4];if(!_totalClicks){$('#all_time_charts').prepend(_t("There is no data to show"));$('#last_month_charts').prepend(_t("There is no data to show"));$('#last_week_charts').prepend(_t("There is no data to show"));return;}
var formattedClicksByDay={};var beginDate;for(var i=0;i<_clicksByDay.length;i++){var date=moment(_clicksByDay[i]['create_date:day'],'DD MMMM YYYY');if(i===0){beginDate=date;}
formattedClicksByDay[date.format('YYYY-MM-DD')]=_clicksByDay[i]['create_date_count'];}
var now=moment();self.charts.all_time_bar=new BarChart(self,beginDate,now,formattedClicksByDay);self.charts.all_time_bar.attachTo($('#all_time_clicks_chart'));beginDate=moment().subtract(30,'days');self.charts.last_month_bar=new BarChart(self,beginDate,now,formattedClicksByDay);self.charts.last_month_bar.attachTo($('#last_month_clicks_chart'));beginDate=moment().subtract(7,'days');self.charts.last_week_bar=new BarChart(self,beginDate,now,formattedClicksByDay);self.charts.last_week_bar.attachTo($('#last_week_clicks_chart'));self.charts.all_time_pie=new PieChart(self,_clicksByCountry);self.charts.all_time_pie.attachTo($('#all_time_countries_charts'));self.charts.last_month_pie=new PieChart(self,_lastMonthClicksByCountry);self.charts.last_month_pie.attachTo($('#last_month_countries_charts'));self.charts.last_week_pie=new PieChart(self,_lastWeekClicksByCountry);self.charts.last_week_pie.attachTo($('#last_week_countries_charts'));var rowWidth=$('#all_time_countries_charts').parent().width();var $chartCanvas=$('#all_time_countries_charts,last_month_countries_charts,last_week_countries_charts').find('canvas');$chartCanvas.height(Math.max(_clicksByCountry.length*(rowWidth>750?1:2),20)+'em');});},_totalClicks:function(){return this._rpc({model:'link.tracker.click',method:'search_count',args:[[this.links_domain]],});},_clicksByDay:function(){return this._rpc({model:'link.tracker.click',method:'read_group',args:[[this.links_domain],['create_date']],kwargs:{groupby:'create_date:day'},});},_clicksByCountry:function(){return this._rpc({model:'link.tracker.click',method:'read_group',args:[[this.links_domain],['country_id']],kwargs:{groupby:'country_id'},});},_lastWeekClicksByCountry:function(){var interval=moment().subtract(7,'days').format('YYYY-MM-DD');return this._rpc({model:'link.tracker.click',method:'read_group',args:[[this.links_domain,['create_date','>',interval]],['country_id']],kwargs:{groupby:'country_id'},});},_lastMonthClicksByCountry:function(){var interval=moment().subtract(30,'days').format('YYYY-MM-DD');return this._rpc({model:'link.tracker.click',method:'read_group',args:[[this.links_domain,['create_date','>',interval]],['country_id']],kwargs:{groupby:'country_id'},});},_onGraphTabClick:function(ev){ev.preventDefault();$('.graph-tabs li a').tab('show');},_onCopyToClipboardClick:function(ev){ev.preventDefault();if(this.animating_copy){return;}
this.animating_copy=true;$('.o_website_links_short_url').clone().css('position','absolute').css('left','15px').css('bottom','10px').css('z-index',2).removeClass('.o_website_links_short_url').addClass('animated-link').appendTo($('.o_website_links_short_url')).animate({opacity:0,bottom:'+=20',},500,function(){$('.animated-link').remove();this.animating_copy=false;});},});return{BarChart:BarChart,PieChart:PieChart,};});;

/* /website_mass_mailing/static/src/js/website_mass_mailing.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('mass_mailing.website_integration',function(require){"use strict";var config=require('web.config');var core=require('web.core');var Dialog=require('web.Dialog');var utils=require('web.utils');var publicWidget=require('web.public.widget');var _t=core._t;publicWidget.registry.subscribe=publicWidget.Widget.extend({selector:".js_subscribe",disabledInEditableMode:false,read_events:{'click .js_subscribe_btn':'_onSubscribeClick',},start:function(){var self=this;var def=this._super.apply(this,arguments);this.$popup=this.$target.closest('.o_newsletter_modal');if(this.$popup.length){return def;}
var always=function(data){var isSubscriber=data.is_subscriber;self.$('.js_subscribe_btn').prop('disabled',isSubscriber);var $input=self.$('input.js_subscribe_email');$input=$input.length?$input:$('<input type="email" name="email" class="js_subscribe_email form-control"/>').prependTo(self.$el);$input.val(data.email||"").prop('disabled',isSubscriber);self.$target.removeClass('d-none');self.$('.js_subscribe_btn').toggleClass('d-none',!!isSubscriber);self.$('.js_subscribed_btn').toggleClass('d-none',!isSubscriber);};return Promise.all([def,this._rpc({route:'/website_mass_mailing/is_subscriber',params:{'list_id':this.$target.data('list-id'),},}).then(always).guardedCatch(always)]);},_onSubscribeClick:function(){var self=this;var $email=this.$(".js_subscribe_email:visible");if($email.length&&!$email.val().match(/.+@.+/)){this.$target.addClass('o_has_error').find('.form-control').addClass('is-invalid');return false;}
this.$target.removeClass('o_has_error').find('.form-control').removeClass('is-invalid');this._rpc({route:'/website_mass_mailing/subscribe',params:{'list_id':this.$target.data('list-id'),'email':$email.length?$email.val():false,},}).then(function(result){self.$(".js_subscribe_btn").addClass('d-none');self.$(".js_subscribed_btn").removeClass('d-none');self.$('input.js_subscribe_email').prop('disabled',!!result);if(self.$popup.length){self.$popup.modal('hide');}
self.displayNotification({type:'success',title:_t("Success"),message:result.toast_content,sticky:true,});});},});publicWidget.registry.newsletter_popup=publicWidget.Widget.extend({selector:".o_newsletter_popup",disabledInEditableMode:false,start:function(){var self=this;var defs=[this._super.apply(this,arguments)];this.websiteID=this._getContext().website_id;this.listID=parseInt(this.$target.attr('data-list-id'));if(!this.listID||(utils.get_cookie(_.str.sprintf("newsletter-popup-%s-%s",this.listID,this.websiteID))&&!self.editableMode)){return Promise.all(defs);}
if(this.$target.data('content')&&this.editableMode){this._dialogInit(this.$target.data('content'));this.$target.removeData('quick-open');this.massMailingPopup.open();}else{defs.push(this._rpc({route:'/website_mass_mailing/get_content',params:{newsletter_id:self.listID,},}).then(function(data){self._dialogInit(data.popup_content,data.email||'');if(!self.editableMode&&!data.is_subscriber){if(config.device.isMobile){setTimeout(function(){self._showBanner();},5000);}else{$(document).on('mouseleave.open_popup_event',self._showBanner.bind(self));}}else{$(document).off('mouseleave.open_popup_event');}
if(self.$target.data('quick-open')){self.massMailingPopup.open();self.$target.removeData('quick-open');}}));}
return Promise.all(defs);},destroy:function(){if(this.massMailingPopup){this.massMailingPopup.close();}
this._super.apply(this,arguments);},_dialogInit:function(content,email){var self=this;this.massMailingPopup=new Dialog(this,{technical:false,$content:$('<div/>').html(content),$parentNode:this.$target,backdrop:!this.editableMode,dialogClass:'p-0'+(this.editableMode?' oe_structure oe_empty':''),renderFooter:false,size:'medium',});this.massMailingPopup.opened().then(function(){var $modal=self.massMailingPopup.$modal;$modal.find('header button.close').on('mouseup',function(ev){ev.stopPropagation();});$modal.addClass('o_newsletter_modal');$modal.find('.oe_structure').attr('data-editor-message',_t('DRAG BUILDING BLOCKS HERE'));$modal.find('.modal-dialog').addClass('modal-dialog-centered');$modal.find('.js_subscribe').data('list-id',self.listID).find('input.js_subscribe_email').val(email);self.trigger_up('widgets_start_request',{editableMode:self.editableMode,$target:$modal,});});this.massMailingPopup.on('closed',this,function(){var $modal=self.massMailingPopup.$modal;if($modal){self.$el.data('content',$modal.find('.modal-body').html());}});},_showBanner:function(){this.massMailingPopup.open();utils.set_cookie(_.str.sprintf("newsletter-popup-%s-%s",this.listID,this.websiteID),true);$(document).off('mouseleave.open_popup_event');},});});;

/* /website_event/static/src/js/website_geolocation.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_event.geolocation',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.visitor=publicWidget.Widget.extend({selector:".oe_country_events, .country_events",disabledInEditableMode:false,start:function(){var defs=[this._super.apply(this,arguments)];var self=this;var $eventList=this.$('.country_events_list');this._originalContent=$eventList[0].outerHTML;defs.push(this._rpc({route:'/event/get_country_event_list'}).then(function(data){if(data){self._$loadedContent=$(data);self._$loadedContent.attr('contentEditable',false);self._$loadedContent.addClass('o_temp_auto_element');self._$loadedContent.attr('data-temp-auto-element-original-content',self._originalContent);$eventList.replaceWith(self._$loadedContent);}}));return Promise.all(defs);},destroy:function(){this._super.apply(this,arguments);if(this._$loadedContent){this._$loadedContent.replaceWith(this._originalContent);}},});});;

/* /website_event/static/src/js/website_event.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_event.website_event',function(require){var ajax=require('web.ajax');var core=require('web.core');var Widget=require('web.Widget');var publicWidget=require('web.public.widget');var _t=core._t;var EventRegistrationForm=Widget.extend({events:{'click .o_wevent_registration_btn':'_onRegistrationBtnClick',},start:function(){var self=this;var res=this._super.apply(this.arguments).then(function(){$('#registration_form .a-submit').off('click').click(function(ev){self.on_click(ev);});});return res;},on_click:function(ev){ev.preventDefault();ev.stopPropagation();var $form=$(ev.currentTarget).closest('form');var $button=$(ev.currentTarget).closest('[type="submit"]');var post={};$('#registration_form table').siblings('.alert').remove();$('#registration_form select').each(function(){post[$(this).attr('name')]=$(this).val();});var tickets_ordered=_.some(_.map(post,function(value,key){return parseInt(value);}));if(!tickets_ordered){$('<div class="alert alert-info"/>').text(_t('Please select at least one ticket.')).insertAfter('#registration_form table');return new Promise(function(){});}else{$button.attr('disabled',true);return ajax.jsonRpc($form.attr('action'),'call',post).then(function(modal){var $modal=$(modal);$modal.modal({backdrop:'static',keyboard:false});$modal.find('.modal-body > div').removeClass('container');$modal.appendTo('body').modal();$modal.on('click','.js_goto_event',function(){$modal.modal('hide');$button.prop('disabled',false);});$modal.on('click','.close',function(){$button.prop('disabled',false);});});}},_onRegistrationBtnClick:function(ev){var $btn=$(ev.currentTarget);$btn.toggleClass('btn-primary text-left pl-0');$btn.siblings().toggleClass('d-none');},});publicWidget.registry.EventRegistrationFormInstance=publicWidget.Widget.extend({selector:'#registration_form',start:function(){var def=this._super.apply(this,arguments);this.instance=new EventRegistrationForm(this);return Promise.all([def,this.instance.attachTo(this.$el)]);},destroy:function(){this.instance.setElement(null);this._super.apply(this,arguments);this.instance.setElement(this.$el);},});return EventRegistrationForm;});;

/* /website_rating/static/src/js/portal_chatter.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('rating.portal.chatter',function(require){'use strict';var core=require('web.core');var portalChatter=require('portal.chatter');var utils=require('web.utils');var time=require('web.time');var _t=core._t;var PortalChatter=portalChatter.PortalChatter;var qweb=core.qweb;var STAR_RATING_RATIO=2;PortalChatter.include({events:_.extend({},PortalChatter.prototype.events,{'click .o_website_rating_select':'_onClickStarDomain','click .o_website_rating_select_text':'_onClickStarDomainReset','click .o_wrating_js_publisher_comment_btn':'_onClickPublisherComment','click .o_wrating_js_publisher_comment_edit':'_onClickPublisherComment','click .o_wrating_js_publisher_comment_delete':'_onClickPublisherCommentDelete','click .o_wrating_js_publisher_comment_submit':'_onClickPublisherCommentSubmit','click .o_wrating_js_publisher_comment_cancel':'_onClickPublisherCommentCancel',}),xmlDependencies:(PortalChatter.prototype.xmlDependencies||[]).concat(['/website_rating/static/src/xml/portal_tools.xml','/website_rating/static/src/xml/portal_chatter.xml']),init:function(parent,options){this._super.apply(this,arguments);if(!_.contains(this.options,'display_rating')){this.options=_.defaults(this.options,{'display_rating':false,'rating_default_value':0.0,});}
this.set('rating_card_values',{});this.set('rating_value',false);this.on("change:rating_value",this,this._onChangeRatingDomain);},preprocessMessages:function(messages){var self=this;messages=this._super.apply(this,arguments);if(this.options['display_rating']){_.each(messages,function(m,i){m.rating_value=self.roundToHalf(m['rating_value']/STAR_RATING_RATIO);m.rating=self._preprocessCommentData(m.rating,i);});}
this.messages=messages;return messages;},roundToHalf:function(value){var converted=parseFloat(value);var decimal=(converted-parseInt(converted,10));decimal=Math.round(decimal*10);if(decimal===5){return(parseInt(converted,10)+0.5);}
if((decimal<3)||(decimal>7)){return Math.round(converted);}else{return(parseInt(converted,10)+0.5);}},_chatterInit:function(){var self=this;return this._super.apply(this,arguments).then(function(result){if(!result['rating_stats']){return;}
var ratingData={'avg':Math.round(result['rating_stats']['avg']/STAR_RATING_RATIO*100)/100,'percent':[],};_.each(_.keys(result['rating_stats']['percent']).reverse(),function(rating){if(rating%2===0){ratingData['percent'].push({'num':rating/STAR_RATING_RATIO,'percent':utils.round_precision(result['rating_stats']['percent'][rating],0.01),});}});self.set('rating_card_values',ratingData);});},_messageFetchPrepareParams:function(){var params=this._super.apply(this,arguments);if(this.options['display_rating']){params['rating_include']=true;}
return params;},_newPublisherCommentData:function(messageIndex){return{mes_index:messageIndex,publisher_id:this.options.partner_id,publisher_avatar:_.str.sprintf('/web/image/%s/%s/image_128/50x50','res.partner',this.options.partner_id),publisher_name:_t("Write your comment"),publisher_datetime:'',publisher_comment:'',};},_preprocessCommentData:function(rawRating,messageIndex){var ratingData={id:rawRating.id,mes_index:messageIndex,publisher_datetime:rawRating.publisher_datetime?moment(time.str_to_datetime(rawRating.publisher_datetime)).format('MMMM Do YYYY, h:mm:ss a'):"",publisher_comment:rawRating.publisher_comment?rawRating.publisher_comment:'',};if(rawRating.publisher_id&&rawRating.publisher_id.length>=2){ratingData.publisher_id=rawRating.publisher_id[0];ratingData.publisher_name=rawRating.publisher_id[1];ratingData.publisher_avatar=_.str.sprintf('/web/image/%s/%s/image_128/50x50','res.partner',ratingData.publisher_id);}
var commentData=_.extend(this._newPublisherCommentData(messageIndex),ratingData);return commentData;},_getCommentContainer:function($source){return $source.parents(".o_wrating_publisher_container").first().find(".o_wrating_publisher_comment").first();},_getCommentButton:function($source){return $source.parents(".o_wrating_publisher_container").first().find(".o_wrating_js_publisher_comment_btn").first();},_getCommentTextarea:function($source){return $source.parents(".o_wrating_publisher_container").first().find(".o_portal_rating_comment_input").first();},_focusTextComment:function($source){this._getCommentTextarea($source).focus();},_onClickStarDomain:function(ev){var $tr=this.$(ev.currentTarget);var num=$tr.data('star');if($tr.css('opacity')==='1'){this.set('rating_value',num);this.$('.o_website_rating_select').css({'opacity':0.5,});this.$('.o_website_rating_select_text[data-star="'+num+'"]').css({'visibility':'visible','opacity':1,});this.$('.o_website_rating_select[data-star="'+num+'"]').css({'opacity':1,});}},_onClickStarDomainReset:function(ev){ev.stopPropagation();ev.preventDefault();this.set('rating_value',false);this.$('.o_website_rating_select_text').css('visibility','hidden');this.$('.o_website_rating_select').css({'opacity':1,});},_onClickPublisherComment:function(ev){var $source=this.$(ev.currentTarget);if(this._getCommentTextarea($source).length===1){this._getCommentContainer($source).empty();return;}
var messageIndex=$source.data("mes_index");var data={is_publisher:this.options['is_user_publisher']};data.rating=this._newPublisherCommentData(messageIndex);var oldRating=this.messages[messageIndex].rating;data.rating.publisher_comment=oldRating.publisher_comment?oldRating.publisher_comment:'';this._getCommentContainer($source).html($(qweb.render("website_rating.chatter_rating_publisher_form",data)));this._focusTextComment($source);},_onClickPublisherCommentDelete:function(ev){var self=this;var $source=this.$(ev.currentTarget);var messageIndex=$source.data("mes_index");var ratingId=this.messages[messageIndex].rating.id;this._rpc({route:'/website/rating/comment',params:{"rating_id":ratingId,"publisher_comment":''}}).then(function(res){self.messages[messageIndex].rating=self._preprocessCommentData(res,messageIndex);self._getCommentButton($source).removeClass("d-none");self._getCommentContainer($source).empty();});},_onClickPublisherCommentSubmit:function(ev){var self=this;var $source=this.$(ev.currentTarget);var messageIndex=$source.data("mes_index");var comment=this._getCommentTextarea($source).val();var ratingId=this.messages[messageIndex].rating.id;this._rpc({route:'/website/rating/comment',params:{"rating_id":ratingId,"publisher_comment":comment}}).then(function(res){self.messages[messageIndex].rating=self._preprocessCommentData(res,messageIndex);if(self.messages[messageIndex].rating.publisher_comment!==''){self._getCommentButton($source).addClass('d-none');self._getCommentContainer($source).html($(qweb.render("website_rating.chatter_rating_publisher_comment",{rating:self.messages[messageIndex].rating,is_publisher:self.options.is_user_publisher})));}else{self._getCommentButton($source).removeClass("d-none");self._getCommentContainer($source).empty();}});},_onClickPublisherCommentCancel:function(ev){var $source=this.$(ev.currentTarget);var messageIndex=$source.data("mes_index");var comment=this.messages[messageIndex].rating.publisher_comment;if(comment){var data={rating:this.messages[messageIndex].rating,is_publisher:this.options.is_user_publisher};this._getCommentContainer($source).html($(qweb.render("website_rating.chatter_rating_publisher_comment",data)));}else{this._getCommentContainer($source).empty();}},_onChangeRatingDomain:function(){var domain=[];if(this.get('rating_value')){domain=[['rating_value','=',this.get('rating_value')*STAR_RATING_RATIO]];}
this._changeCurrentPage(1,domain);},});});;

/* /website_rating/static/src/js/portal_composer.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('rating.portal.composer',function(require){'use strict';var core=require('web.core');var portalComposer=require('portal.composer');var _t=core._t;var PortalComposer=portalComposer.PortalComposer;var STAR_RATING_RATIO=2;PortalComposer.include({events:_.extend({},PortalComposer.prototype.events,{'click .stars i':'_onClickStar','mouseleave .stars':'_onMouseleaveStarBlock','mousemove .stars i':'_onMoveStar','mouseleave .stars i':'_onMoveLeaveStar',}),init:function(parent,options){this._super.apply(this,arguments);if(options.default_rating_value){options.default_rating_value=parseFloat(options.default_rating_value)/STAR_RATING_RATIO;}
this.options=_.defaults(this.options,{'default_message':false,'default_message_id':false,'default_rating_value':false,'force_submit_url':false,});this.labels={'0':"",'1':_t("I hate it"),'2':_t("I don't like it"),'3':_t("It's okay"),'4':_t("I like it"),'5':_t("I love it"),};this.user_click=false;this.set("star_value",this.options.default_rating_value);this.on("change:star_value",this,this._onChangeStarValue);},start:function(){var self=this;return this._super.apply(this,arguments).then(function(){self.$input=self.$('input[name="rating_value"]');self.$star_list=self.$('.stars').find('i');self.set("star_value",self.options.default_rating_value);self.$input.val(self.options.default_rating_value*STAR_RATING_RATIO);});},_onChangeStarValue:function(){var val=this.get("star_value");var index=Math.floor(val);var decimal=val-index;this.$star_list.removeClass('fa-star fa-star-half-o').addClass('fa-star-o');this.$('.stars').find("i:lt("+index+")").removeClass('fa-star-o fa-star-half-o').addClass('fa-star');if(decimal){this.$('.stars').find("i:eq("+index+")").removeClass('fa-star-o fa-star fa-star-half-o').addClass('fa-star-half-o');}
this.$('.rate_text .badge').text(this.labels[index]);},_onClickStar:function(ev){var index=this.$('.stars i').index(ev.currentTarget);this.set("star_value",index+1);this.user_click=true;this.$input.val(this.get("star_value")*STAR_RATING_RATIO);},_onMouseleaveStarBlock:function(){this.$('.rate_text').hide();},_onMoveStar:function(ev){var index=this.$('.stars i').index(ev.currentTarget);this.$('.rate_text').show();this.set("star_value",index+1);},_onMoveLeaveStar:function(){if(!this.user_click){this.set("star_value",parseInt(this.$input.val()));}
this.user_click=false;},});});;

/* /website_rating/static/src/js/portal_rating_composer.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('portal.rating.composer',function(require){'use strict';var publicWidget=require('web.public.widget');var session=require('web.session');var portalComposer=require('portal.composer');var PortalComposer=portalComposer.PortalComposer;var STAR_RATING_RATIO=2;var RatingPopupComposer=publicWidget.Widget.extend({template:'website_rating.PopupComposer',xmlDependencies:['/portal/static/src/xml/portal_chatter.xml','/website_rating/static/src/xml/portal_tools.xml','/website_rating/static/src/xml/portal_rating_composer.xml',],init:function(parent,options){this._super.apply(this,arguments);this.rating_avg=Math.round(options['ratingAvg']/STAR_RATING_RATIO*100)/100||0.0;this.rating_total=options['ratingTotal']||0.0;this.options=_.defaults({},options,{'token':false,'res_model':false,'res_id':false,'pid':0,'display_composer':options['disable_composer']?false:!session.is_website_user,'display_rating':true,'csrf_token':odoo.csrf_token,'user_id':session.user_id,});},start:function(){var defs=[];defs.push(this._super.apply(this,arguments));this._composer=new PortalComposer(this,this.options);defs.push(this._composer.replace(this.$('.o_portal_chatter_composer')));return Promise.all(defs);},});publicWidget.registry.RatingPopupComposer=publicWidget.Widget.extend({selector:'.o_rating_popup_composer',start:function(){var ratingPopupData=this.$el.data();var ratingPopup=new RatingPopupComposer(this,ratingPopupData);return Promise.all([this._super.apply(this,arguments),ratingPopup.appendTo(this.$el)]);},});return RatingPopupComposer;});;

/* /web_tour/static/src/js/public/tour_manager.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web_tour.public.TourManager',function(require){'use strict';var TourManager=require('web_tour.TourManager');var lazyloader=require('web.public.lazyloader');TourManager.include({_waitBeforeTourStart:function(){return this._super.apply(this,arguments).then(function(){return lazyloader.allScriptsLoaded;}).then(function(){return new Promise(function(resolve){setTimeout(resolve);});});},});});;

/* /web_unsplash/static/src/js/unsplash_beacon.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web_unsplash.beacon',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.UnsplashBeacon=publicWidget.Widget.extend({selector:'#wrapwrap',start:function(){var unsplashImages=_.map(this.$('img[src*="/unsplash/"]'),function(img){return img.src.split('/unsplash/')[1].split('/')[0];});if(unsplashImages.length){this._rpc({route:'/web_unsplash/get_app_id',}).then(function(appID){if(!appID){return;}
$.get('https://views.unsplash.com/v',{'photo_id':unsplashImages.join(','),'app_id':appID,});});}
return this._super.apply(this,arguments);},});});;

/* /auth_signup/static/src/js/signup.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('auth_signup.signup',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.SignUpForm=publicWidget.Widget.extend({selector:'.oe_signup_form',events:{'submit':'_onSubmit',},_onSubmit:function(){var $btn=this.$('.oe_login_buttons > button[type="submit"]');$btn.attr('disabled','disabled');$btn.prepend('<i class="fa fa-refresh fa-spin"/> ');},});});;

/* /project/static/src/js/portal_rating.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_rating_project.rating',function(require){'use strict';var time=require('web.time');var publicWidget=require('web.public.widget');publicWidget.registry.ProjectRatingImage=publicWidget.Widget.extend({selector:'.o_portal_project_rating .o_rating_image',start:function(){this.$el.popover({placement:'bottom',trigger:'hover',html:true,content:function(){var $elem=$(this);var id=$elem.data('id');var ratingDate=$elem.data('rating-date');var baseDate=time.auto_str_to_date(ratingDate);var duration=moment(baseDate).fromNow();var $rating=$('#rating_'+id);$rating.find('.rating_timeduration').text(duration);return $rating.html();},});return this._super.apply(this,arguments);},});});;

/* /account/static/src/js/account_portal_sidebar.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('account.AccountPortalSidebar',function(require){'use strict';var publicWidget=require('web.public.widget');var PortalSidebar=require('portal.PortalSidebar');var utils=require('web.utils');publicWidget.registry.AccountPortalSidebar=PortalSidebar.extend({selector:'.o_portal_invoice_sidebar',events:{'click .o_portal_invoice_print':'_onPrintInvoice',},start:function(){var def=this._super.apply(this,arguments);var $invoiceHtml=this.$el.find('iframe#invoice_html');var updateIframeSize=this._updateIframeSize.bind(this,$invoiceHtml);$(window).on('resize',updateIframeSize);var iframeDoc=$invoiceHtml[0].contentDocument||$invoiceHtml[0].contentWindow.document;if(iframeDoc.readyState==='complete'){updateIframeSize();}else{$invoiceHtml.on('load',updateIframeSize);}
return def;},_updateIframeSize:function($el){var $wrapwrap=$el.contents().find('div#wrapwrap');$el.height(0);$el.height($wrapwrap[0].scrollHeight);if(!utils.isValidAnchor(window.location.hash)){return;}
var $target=$(window.location.hash);if(!$target.length){return;}
$('html, body').scrollTop($target.offset().top);},_onPrintInvoice:function(ev){ev.preventDefault();var href=$(ev.currentTarget).attr('href');this._printIframeContent(href);},});});;

/* /payment/static/lib/jquery.payment/jquery.payment.js defined in bundle 'web.assets_frontend_lazy' */
(function(){var $,cardFromNumber,cardFromType,cards,defaultFormat,formatBackCardNumber,formatBackExpiry,formatCardNumber,formatExpiry,formatForwardExpiry,formatForwardSlashAndSpace,hasTextSelected,luhnCheck,reFormatCVC,reFormatCardNumber,reFormatExpiry,reFormatNumeric,replaceFullWidthChars,restrictCVC,restrictCardNumber,restrictExpiry,restrictNumeric,safeVal,setCardType,__slice=[].slice,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i;}return-1;};$=window.jQuery||window.Zepto||window.$;$.payment={};$.payment.fn={};$.fn.payment=function(){var args,method;method=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];return $.payment.fn[method].apply(this,args);};defaultFormat=/(\d{1,4})/g;$.payment.cards=cards=[{type:'maestro',patterns:[5018,502,503,506,56,58,639,6220,67],format:defaultFormat,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:true},{type:'forbrugsforeningen',patterns:[600],format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:'dankort',patterns:[5019],format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:'visa',patterns:[4],format:defaultFormat,length:[13,16],cvcLength:[3],luhn:true},{type:'mastercard',patterns:[51,52,53,54,55,22,23,24,25,26,27],format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:'amex',patterns:[34,37],format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:true},{type:'dinersclub',patterns:[30,36,38,39],format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvcLength:[3],luhn:true},{type:'discover',patterns:[60,64,65,622],format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:'unionpay',patterns:[62,88],format:defaultFormat,length:[16,17,18,19],cvcLength:[3],luhn:false},{type:'jcb',patterns:[35],format:defaultFormat,length:[16],cvcLength:[3],luhn:true}];cardFromNumber=function(num){var card,p,pattern,_i,_j,_len,_len1,_ref;num=(num+'').replace(/\D/g,'');for(_i=0,_len=cards.length;_i<_len;_i++){card=cards[_i];_ref=card.patterns;for(_j=0,_len1=_ref.length;_j<_len1;_j++){pattern=_ref[_j];p=pattern+'';if(num.substr(0,p.length)===p){return card;}}}};cardFromType=function(type){var card,_i,_len;for(_i=0,_len=cards.length;_i<_len;_i++){card=cards[_i];if(card.type===type){return card;}}};luhnCheck=function(num){var digit,digits,odd,sum,_i,_len;odd=true;sum=0;digits=(num+'').split('').reverse();for(_i=0,_len=digits.length;_i<_len;_i++){digit=digits[_i];digit=parseInt(digit,10);if((odd=!odd)){digit*=2;}
if(digit>9){digit-=9;}
sum+=digit;}
return sum%10===0;};hasTextSelected=function($target){var _ref;if(($target.prop('selectionStart')!=null)&&$target.prop('selectionStart')!==$target.prop('selectionEnd')){return true;}
if((typeof document!=="undefined"&&document!==null?(_ref=document.selection)!=null?_ref.createRange:void 0:void 0)!=null){if(document.selection.createRange().text){return true;}}
return false;};safeVal=function(value,$target){var currPair,cursor,digit,error,last,prevPair;try{cursor=$target.prop('selectionStart');}catch(_error){error=_error;cursor=null;}
last=$target.val();$target.val(value);if(cursor!==null&&$target.is(":focus")){if(cursor===last.length){cursor=value.length;}
if(last!==value){prevPair=last.slice(cursor-1,+cursor+1||9e9);currPair=value.slice(cursor-1,+cursor+1||9e9);digit=value[cursor];if(/\d/.test(digit)&&prevPair===(""+digit+" ")&&currPair===(" "+digit)){cursor=cursor+1;}}
$target.prop('selectionStart',cursor);return $target.prop('selectionEnd',cursor);}};replaceFullWidthChars=function(str){var chars,chr,fullWidth,halfWidth,idx,value,_i,_len;if(str==null){str='';}
fullWidth='\uff10\uff11\uff12\uff13\uff14\uff15\uff16\uff17\uff18\uff19';halfWidth='0123456789';value='';chars=str.split('');for(_i=0,_len=chars.length;_i<_len;_i++){chr=chars[_i];idx=fullWidth.indexOf(chr);if(idx>-1){chr=halfWidth[idx];}
value+=chr;}
return value;};reFormatNumeric=function(e){var $target;$target=$(e.currentTarget);return setTimeout(function(){var value;value=$target.val();value=replaceFullWidthChars(value);value=value.replace(/\D/g,'');return safeVal(value,$target);});};reFormatCardNumber=function(e){var $target;$target=$(e.currentTarget);return setTimeout(function(){var value;value=$target.val();value=replaceFullWidthChars(value);value=$.payment.formatCardNumber(value);return safeVal(value,$target);});};formatCardNumber=function(e){var $target,card,digit,length,re,upperLength,value;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
$target=$(e.currentTarget);value=$target.val();card=cardFromNumber(value+digit);length=(value.replace(/\D/g,'')+digit).length;upperLength=16;if(card){upperLength=card.length[card.length.length-1];}
if(length>=upperLength){return;}
if(($target.prop('selectionStart')!=null)&&$target.prop('selectionStart')!==value.length){return;}
if(card&&card.type==='amex'){re=/^(\d{4}|\d{4}\s\d{6})$/;}else{re=/(?:^|\s)(\d{4})$/;}
if(re.test(value)){e.preventDefault();return setTimeout(function(){return $target.val(value+' '+digit);});}else if(re.test(value+digit)){e.preventDefault();return setTimeout(function(){return $target.val(value+digit+' ');});}};formatBackCardNumber=function(e){var $target,value;$target=$(e.currentTarget);value=$target.val();if(e.which!==8){return;}
if(($target.prop('selectionStart')!=null)&&$target.prop('selectionStart')!==value.length){return;}
if(/\d\s$/.test(value)){e.preventDefault();return setTimeout(function(){return $target.val(value.replace(/\d\s$/,''));});}else if(/\s\d?$/.test(value)){e.preventDefault();return setTimeout(function(){return $target.val(value.replace(/\d$/,''));});}};reFormatExpiry=function(e){var $target;$target=$(e.currentTarget);return setTimeout(function(){var value;value=$target.val();value=replaceFullWidthChars(value);value=$.payment.formatExpiry(value);return safeVal(value,$target);});};formatExpiry=function(e){var $target,digit,val;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
$target=$(e.currentTarget);val=$target.val()+digit;if(/^\d$/.test(val)&&(val!=='0'&&val!=='1')){e.preventDefault();return setTimeout(function(){return $target.val("0"+val+" / ");});}else if(/^\d\d$/.test(val)){e.preventDefault();return setTimeout(function(){var m1,m2;m1=parseInt(val[0],10);m2=parseInt(val[1],10);if(m2>2&&m1!==0){return $target.val("0"+m1+" / "+m2);}else{return $target.val(""+val+" / ");}});}};formatForwardExpiry=function(e){var $target,digit,val;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
$target=$(e.currentTarget);val=$target.val();if(/^\d\d$/.test(val)){return $target.val(""+val+" / ");}};formatForwardSlashAndSpace=function(e){var $target,val,which;which=String.fromCharCode(e.which);if(!(which==='/'||which===' ')){return;}
$target=$(e.currentTarget);val=$target.val();if(/^\d$/.test(val)&&val!=='0'){return $target.val("0"+val+" / ");}};formatBackExpiry=function(e){var $target,value;$target=$(e.currentTarget);value=$target.val();if(e.which!==8){return;}
if(($target.prop('selectionStart')!=null)&&$target.prop('selectionStart')!==value.length){return;}
if(/\d\s\/\s$/.test(value)){e.preventDefault();return setTimeout(function(){return $target.val(value.replace(/\d\s\/\s$/,''));});}};reFormatCVC=function(e){var $target;$target=$(e.currentTarget);return setTimeout(function(){var value;value=$target.val();value=replaceFullWidthChars(value);value=value.replace(/\D/g,'').slice(0,4);return safeVal(value,$target);});};restrictNumeric=function(e){var input;if(e.metaKey||e.ctrlKey){return true;}
if(e.which===32){return false;}
if(e.which===0){return true;}
if(e.which<33){return true;}
input=String.fromCharCode(e.which);return!!/[\d\s]/.test(input);};restrictCardNumber=function(e){var $target,card,digit,value;$target=$(e.currentTarget);digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
if(hasTextSelected($target)){return;}
value=($target.val()+digit).replace(/\D/g,'');card=cardFromNumber(value);if(card){return value.length<=card.length[card.length.length-1];}else{return value.length<=16;}};restrictExpiry=function(e){var $target,digit,value;$target=$(e.currentTarget);digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
if(hasTextSelected($target)){return;}
value=$target.val()+digit;value=value.replace(/\D/g,'');if(value.length>6){return false;}};restrictCVC=function(e){var $target,digit,val;$target=$(e.currentTarget);digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
if(hasTextSelected($target)){return;}
val=$target.val()+digit;return val.length<=4;};setCardType=function(e){var $target,allTypes,card,cardType,val;$target=$(e.currentTarget);val=$target.val();cardType=$.payment.cardType(val)||'unknown';if(!$target.hasClass(cardType)){allTypes=(function(){var _i,_len,_results;_results=[];for(_i=0,_len=cards.length;_i<_len;_i++){card=cards[_i];_results.push(card.type);}
return _results;})();$target.removeClass('unknown');$target.removeClass(allTypes.join(' '));$target.addClass(cardType);$target.toggleClass('identified',cardType!=='unknown');return $target.trigger('payment.cardType',cardType);}};$.payment.fn.formatCardCVC=function(){this.on('keypress',restrictNumeric);this.on('keypress',restrictCVC);this.on('paste',reFormatCVC);this.on('change',reFormatCVC);this.on('input',reFormatCVC);return this;};$.payment.fn.formatCardExpiry=function(){this.on('keypress',restrictNumeric);this.on('keypress',restrictExpiry);this.on('keypress',formatExpiry);this.on('keypress',formatForwardSlashAndSpace);this.on('keypress',formatForwardExpiry);this.on('keydown',formatBackExpiry);this.on('change',reFormatExpiry);this.on('input',reFormatExpiry);return this;};$.payment.fn.formatCardNumber=function(){this.on('keypress',restrictNumeric);this.on('keypress',restrictCardNumber);this.on('keypress',formatCardNumber);this.on('keydown',formatBackCardNumber);this.on('keyup',setCardType);this.on('paste',reFormatCardNumber);this.on('change',reFormatCardNumber);this.on('input',reFormatCardNumber);this.on('input',setCardType);return this;};$.payment.fn.restrictNumeric=function(){this.on('keypress',restrictNumeric);this.on('paste',reFormatNumeric);this.on('change',reFormatNumeric);this.on('input',reFormatNumeric);return this;};$.payment.fn.cardExpiryVal=function(){return $.payment.cardExpiryVal($(this).val());};$.payment.cardExpiryVal=function(value){var month,prefix,year,_ref;_ref=value.split(/[\s\/]+/,2),month=_ref[0],year=_ref[1];if((year!=null?year.length:void 0)===2&&/^\d+$/.test(year)){prefix=(new Date).getFullYear();prefix=prefix.toString().slice(0,2);year=prefix+year;}
month=parseInt(month,10);year=parseInt(year,10);return{month:month,year:year};};$.payment.validateCardNumber=function(num){var card,_ref;num=(num+'').replace(/\s+|-/g,'');if(!/^\d+$/.test(num)){return false;}
card=cardFromNumber(num);if(!card){return false;}
return(_ref=num.length,__indexOf.call(card.length,_ref)>=0)&&(card.luhn===false||luhnCheck(num));};$.payment.validateCardExpiry=function(month,year){var currentTime,expiry,_ref;if(typeof month==='object'&&'month'in month){_ref=month,month=_ref.month,year=_ref.year;}
if(!(month&&year)){return false;}
month=$.trim(month);year=$.trim(year);if(!/^\d+$/.test(month)){return false;}
if(!/^\d+$/.test(year)){return false;}
if(!((1<=month&&month<=12))){return false;}
if(year.length===2){if(year<70){year="20"+year;}else{year="19"+year;}}
if(year.length!==4){return false;}
expiry=new Date(year,month);currentTime=new Date;expiry.setMonth(expiry.getMonth()-1);expiry.setMonth(expiry.getMonth()+1,1);return expiry>currentTime;};$.payment.validateCardCVC=function(cvc,type){var card,_ref;cvc=$.trim(cvc);if(!/^\d+$/.test(cvc)){return false;}
card=cardFromType(type);if(card!=null){return _ref=cvc.length,__indexOf.call(card.cvcLength,_ref)>=0;}else{return cvc.length>=3&&cvc.length<=4;}};$.payment.cardType=function(num){var _ref;if(!num){return null;}
return((_ref=cardFromNumber(num))!=null?_ref.type:void 0)||null;};$.payment.formatCardNumber=function(num){var card,groups,upperLength,_ref;num=num.replace(/\D/g,'');card=cardFromNumber(num);if(!card){return num;}
upperLength=card.length[card.length.length-1];num=num.slice(0,upperLength);if(card.format.global){return(_ref=num.match(card.format))!=null?_ref.join(' '):void 0;}else{groups=card.format.exec(num);if(groups==null){return;}
groups.shift();groups=$.grep(groups,function(n){return n;});return groups.join(' ');}};$.payment.formatExpiry=function(expiry){var mon,parts,sep,year;parts=expiry.match(/^\D*(\d{1,2})(\D+)?(\d{1,4})?/);if(!parts){return'';}
mon=parts[1]||'';sep=parts[2]||'';year=parts[3]||'';if(year.length>0){sep=' / ';}else if(sep===' /'){mon=mon.substring(0,1);sep='';}else if(mon.length===2||sep.length>0){sep=' / ';}else if(mon.length===1&&(mon!=='0'&&mon!=='1')){mon="0"+mon;sep=' / ';}
return mon+sep+year;};}).call(this);;

/* /payment/static/src/js/payment_portal.js defined in bundle 'web.assets_frontend_lazy' */
$(function(){$('input#cc_number').payment('formatCardNumber');$('input#cc_cvc').payment('formatCardCVC');$('input#cc_expiry').payment('formatCardExpiry')
$('input#cc_number').on('focusout',function(e){var valid_value=$.payment.validateCardNumber(this.value);var card_type=$.payment.cardType(this.value);if(card_type){$(this).parent('.form-group').children('.card_placeholder').removeClass().addClass('card_placeholder '+card_type);$(this).parent('.form-group').children('input[name="cc_brand"]').val(card_type)}
else{$(this).parent('.form-group').children('.card_placeholder').removeClass().addClass('card_placeholder');}
if(valid_value){$(this).parent('.form-group').addClass('o_has_success').find('.form-control, .custom-select').addClass('is-valid');$(this).parent('.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(this).siblings('.o_invalid_field').remove();}
else{$(this).parent('.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');$(this).parent('.form-group').removeClass('o_has_success').find('.form-control, .custom-select').removeClass('is-valid');}});$('input#cc_cvc').on('focusout',function(e){var cc_nbr=$(this).parents('.oe_cc').find('#cc_number').val();var card_type=$.payment.cardType(cc_nbr);var valid_value=$.payment.validateCardCVC(this.value,card_type);if(valid_value){$(this).parent('.form-group').addClass('o_has_success').find('.form-control, .custom-select').addClass('is-valid');$(this).parent('.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(this).siblings('.o_invalid_field').remove();}
else{$(this).parent('.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');$(this).parent('.form-group').removeClass('o_has_success').find('.form-control, .custom-select').removeClass('is-valid');}});$('input#cc_expiry').on('focusout',function(e){var expiry_value=$.payment.cardExpiryVal(this.value);var month=expiry_value.month||'';var year=expiry_value.year||'';var valid_value=$.payment.validateCardExpiry(month,year);if(valid_value){$(this).parent('.form-group').addClass('o_has_success').find('.form-control, .custom-select').addClass('is-valid');$(this).parent('.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(this).siblings('.o_invalid_field').remove();}
else{$(this).parent('.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');$(this).parent('.form-group').removeClass('o_has_success').find('.form-control, .custom-select').removeClass('is-valid');}});$('select[name="pm_acquirer_id"]').on('change',function(){var acquirer_id=$(this).val();$('.acquirer').addClass('d-none');$('.acquirer[data-acquirer-id="'+acquirer_id+'"]').removeClass('d-none');});});;

/* /payment/static/src/js/payment_transaction_portal.js defined in bundle 'web.assets_frontend_lazy' */
;

/* /payment/static/src/js/payment_form.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('payment.payment_form',function(require){"use strict";var core=require('web.core');var Dialog=require('web.Dialog');var publicWidget=require('web.public.widget');var _t=core._t;publicWidget.registry.PaymentForm=publicWidget.Widget.extend({selector:'.o_payment_form',events:{'submit':'onSubmit','click #o_payment_form_pay':'payEvent','click #o_payment_form_add_pm':'addPmEvent','click button[name="delete_pm"]':'deletePmEvent','click .o_payment_form_pay_icon_more':'onClickMorePaymentIcon','click .o_payment_acquirer_select':'radioClickEvent',},start:function(){this._adaptPayButton();window.addEventListener('pageshow',function(event){if(event.persisted){window.location.reload();}});var self=this;return this._super.apply(this,arguments).then(function(){self.options=_.extend(self.$el.data(),self.options);self.updateNewPaymentDisplayStatus();$('[data-toggle="tooltip"]').tooltip();});},displayError:function(title,message){var $checkedRadio=this.$('input[type="radio"]:checked'),acquirerID=this.getAcquirerIdFromRadio($checkedRadio[0]);var $acquirerForm;if(this.isNewPaymentRadio($checkedRadio[0])){$acquirerForm=this.$('#o_payment_add_token_acq_'+acquirerID);}
else if(this.isFormPaymentRadio($checkedRadio[0])){$acquirerForm=this.$('#o_payment_form_acq_'+acquirerID);}
if($checkedRadio.length===0){return new Dialog(null,{title:_t('Error: ')+_.str.escapeHTML(title),size:'medium',$content:"<p>"+(_.str.escapeHTML(message)||"")+"</p>",buttons:[{text:_t('Ok'),close:true}]}).open();}else{this.$('#payment_error').remove();var messageResult='<div class="alert alert-danger mb4" id="payment_error">';if(title!=''){messageResult=messageResult+'<b>'+_.str.escapeHTML(title)+':</b><br/>';}
messageResult=messageResult+_.str.escapeHTML(message)+'</div>';$acquirerForm.append(messageResult);}},hideError:function(){this.$('#payment_error').remove();},getAcquirerIdFromRadio:function(element){return $(element).data('acquirer-id');},getFormData:function($form){var unindexed_array=$form.serializeArray();var indexed_array={};$.map(unindexed_array,function(n,i){indexed_array[n.name]=n.value;});return indexed_array;},isFormPaymentRadio:function(element){return $(element).data('form-payment')==='True';},isNewPaymentRadio:function(element){return $(element).data('s2s-payment')==='True';},updateNewPaymentDisplayStatus:function(){var checked_radio=this.$('input[type="radio"]:checked');this.$('[id*="o_payment_add_token_acq_"]').addClass('d-none');this.$('[id*="o_payment_form_acq_"]').addClass('d-none');if(checked_radio.length!==1){return;}
checked_radio=checked_radio[0];var acquirer_id=this.getAcquirerIdFromRadio(checked_radio);if(this.isNewPaymentRadio(checked_radio)){this.$('#o_payment_add_token_acq_'+acquirer_id).removeClass('d-none');}
else if(this.isFormPaymentRadio(checked_radio)){this.$('#o_payment_form_acq_'+acquirer_id).removeClass('d-none');}},disableButton:function(button){$("body").block({overlayCSS:{backgroundColor:"#000",opacity:0,zIndex:1050},message:false});$(button).attr('disabled',true);$(button).children('.fa-lock').removeClass('fa-lock');$(button).prepend('<span class="o_loader"><i class="fa fa-refresh fa-spin"></i>&nbsp;</span>');},enableButton:function(button){$('body').unblock();$(button).attr('disabled',false);$(button).children('.fa').addClass('fa-lock');$(button).find('span.o_loader').remove();},_parseError:function(e){if(e.message.data.arguments[1]){return e.message.data.arguments[0]+e.message.data.arguments[1];}
return e.message.data.arguments[0];},_adaptPayButton:function(){var $payButton=$("#o_payment_form_pay");var disabledReasons=$payButton.data('disabled_reasons')||{};$payButton.prop('disabled',_.contains(disabledReasons,true));},payEvent:function(ev){ev.preventDefault();var form=this.el;var checked_radio=this.$('input[type="radio"]:checked');var self=this;if(ev.type==='submit'){var button=$(ev.target).find('*[type="submit"]')[0]}else{var button=ev.target;}
if(checked_radio.length===1){checked_radio=checked_radio[0];var acquirer_id=this.getAcquirerIdFromRadio(checked_radio);var acquirer_form=false;if(this.isNewPaymentRadio(checked_radio)){acquirer_form=this.$('#o_payment_add_token_acq_'+acquirer_id);}else{acquirer_form=this.$('#o_payment_form_acq_'+acquirer_id);}
var inputs_form=$('input',acquirer_form);var ds=$('input[name="data_set"]',acquirer_form)[0];if(this.isNewPaymentRadio(checked_radio)){if(this.options.partnerId===undefined){console.warn('payment_form: unset partner_id when adding new token; things could go wrong');}
var form_data=this.getFormData(inputs_form);var wrong_input=false;inputs_form.toArray().forEach(function(element){if($(element).attr('type')=='hidden'){return true;}
$(element).closest('div.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(element).siblings(".o_invalid_field").remove();$(element).trigger("focusout");if(element.dataset.isRequired&&element.value.length===0){$(element).closest('div.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');$(element).closest('div.form-group').append('<div style="color: red" class="o_invalid_field" aria-invalid="true">'+_.str.escapeHTML("The value is invalid.")+'</div>');wrong_input=true;}
else if($(element).closest('div.form-group').hasClass('o_has_error')){wrong_input=true;$(element).closest('div.form-group').append('<div style="color: red" class="o_invalid_field" aria-invalid="true">'+_.str.escapeHTML("The value is invalid.")+'</div>');}});if(wrong_input){return;}
this.disableButton(button);return this._rpc({route:ds.dataset.createRoute,params:form_data,}).then(function(data){if(data.result){if(data['3d_secure']!==false){$("body").html(data['3d_secure']);}
else{checked_radio.value=data.id;form.submit();return new Promise(function(){});}}
else{if(data.error){self.displayError('',data.error);}else{self.displayError(_t('Server Error'),_t('e.g. Your credit card details are wrong. Please verify.'));}}
self.enableButton(button);}).guardedCatch(function(error){error.event.preventDefault();self.enableButton(button);self.displayError(_t('Server Error'),_t("We are not able to add your payment method at the moment.")+
self._parseError(error));});}
else if(this.isFormPaymentRadio(checked_radio)){this.disableButton(button);var $tx_url=this.$el.find('input[name="prepare_tx_url"]');if($tx_url.length===1){var form_save_token=acquirer_form.find('input[name="o_payment_form_save_token"]').prop('checked');return this._rpc({route:$tx_url[0].value,params:{'acquirer_id':parseInt(acquirer_id),'save_token':form_save_token,'access_token':self.options.accessToken,'success_url':self.options.successUrl,'error_url':self.options.errorUrl,'callback_method':self.options.callbackMethod,'order_id':self.options.orderId,'invoice_id':self.options.invoiceId,},}).then(function(result){if(result){var newForm=document.createElement('form');newForm.setAttribute("method",self._get_redirect_form_method());newForm.setAttribute("provider",checked_radio.dataset.provider);newForm.hidden=true;newForm.innerHTML=result;var action_url=$(newForm).find('input[name="data_set"]').data('actionUrl');newForm.setAttribute("action",action_url);$(document.getElementsByTagName('body')[0]).append(newForm);$(newForm).find('input[data-remove-me]').remove();if(action_url){newForm.submit();return new Promise(function(){});}}
else{self.displayError(_t('Server Error'),_t("We are not able to redirect you to the payment form."));self.enableButton(button);}}).guardedCatch(function(error){error.event.preventDefault();self.displayError(_t('Server Error'),_t("We are not able to redirect you to the payment form.")+" "+
self._parseError(error));self.enableButton(button);});}
else{this.displayError(_t("Cannot setup the payment"),_t("We're unable to process your payment."));self.enableButton(button);}}
else{this.disableButton(button);form.submit();return new Promise(function(){});}}
else{this.displayError(_t('No payment method selected'),_t('Please select a payment method.'));this.enableButton(button);}},_get_redirect_form_method:function(){return"post";},addPmEvent:function(ev){ev.stopPropagation();ev.preventDefault();var checked_radio=this.$('input[type="radio"]:checked');var self=this;if(ev.type==='submit'){var button=$(ev.target).find('*[type="submit"]')[0]}else{var button=ev.target;}
if(checked_radio.length===1&&this.isNewPaymentRadio(checked_radio[0])){checked_radio=checked_radio[0];var acquirer_id=this.getAcquirerIdFromRadio(checked_radio);var acquirer_form=this.$('#o_payment_add_token_acq_'+acquirer_id);var inputs_form=$('input',acquirer_form);var form_data=this.getFormData(inputs_form);var ds=$('input[name="data_set"]',acquirer_form)[0];var wrong_input=false;inputs_form.toArray().forEach(function(element){if($(element).attr('type')=='hidden'){return true;}
$(element).closest('div.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(element).siblings(".o_invalid_field").remove();$(element).trigger("focusout");if(element.dataset.isRequired&&element.value.length===0){$(element).closest('div.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');var message='<div style="color: red" class="o_invalid_field" aria-invalid="true">'+_.str.escapeHTML("The value is invalid.")+'</div>';$(element).closest('div.form-group').append(message);wrong_input=true;}
else if($(element).closest('div.form-group').hasClass('o_has_error')){wrong_input=true;var message='<div style="color: red" class="o_invalid_field" aria-invalid="true">'+_.str.escapeHTML("The value is invalid.")+'</div>';$(element).closest('div.form-group').append(message);}});if(wrong_input){return;}
$(button).attr('disabled',true);$(button).children('.fa-plus-circle').removeClass('fa-plus-circle');$(button).prepend('<span class="o_loader"><i class="fa fa-refresh fa-spin"></i>&nbsp;</span>');this._rpc({route:ds.dataset.createRoute,params:form_data,}).then(function(data){if(data.result){if(data['3d_secure']!==false){$("body").html(data['3d_secure']);}
else{if(form_data.return_url){window.location=form_data.return_url;}
else{window.location.reload();}}}
else{if(data.error){self.displayError('',data.error);}else{self.displayError(_t('Server Error'),_t('e.g. Your credit card details are wrong. Please verify.'));}}
$(button).attr('disabled',false);$(button).children('.fa').addClass('fa-plus-circle');$(button).find('span.o_loader').remove();}).guardedCatch(function(error){error.event.preventDefault();$(button).attr('disabled',false);$(button).children('.fa').addClass('fa-plus-circle');$(button).find('span.o_loader').remove();self.displayError(_t('Server error'),_t("We are not able to add your payment method at the moment.")+
self._parseError(error));});}
else{this.displayError(_t('No payment method selected'),_t('Please select the option to add a new payment method.'));}},onSubmit:function(ev){ev.stopPropagation();ev.preventDefault();var button=$(ev.target).find('*[type="submit"]')[0]
if(button.id==='o_payment_form_pay'){return this.payEvent(ev);}else if(button.id==='o_payment_form_add_pm'){return this.addPmEvent(ev);}
return;},deletePmEvent:function(ev){ev.stopPropagation();ev.preventDefault();var self=this;var pm_id=parseInt(ev.currentTarget.value);var tokenDelete=function(){self._rpc({model:'payment.token',method:'unlink',args:[pm_id],}).then(function(result){if(result===true){ev.target.closest('div').remove();}},function(){self.displayError(_t('Server Error'),_t("We are not able to delete your payment method at the moment."));});};this._rpc({model:'payment.token',method:'get_linked_records',args:[pm_id],}).then(function(result){if(result[pm_id].length>0){var content='';result[pm_id].forEach(function(sub){content+='<p><a href="'+sub.url+'" title="'+sub.description+'">'+sub.name+'</a></p>';});content=$('<div>').html('<p>'+_t('This card is currently linked to the following records:')+'</p>'+content);new Dialog(self,{title:_t('Warning!'),size:'medium',$content:content,buttons:[{text:_t('Confirm Deletion'),classes:'btn-primary',close:true,click:tokenDelete},{text:_t('Cancel'),close:true}]}).open();}
else{tokenDelete();}},function(err,event){self.displayError(_t('Server Error'),_t("We are not able to delete your payment method at the moment.")+err.data.message);});},onClickMorePaymentIcon:function(ev){ev.preventDefault();ev.stopPropagation();var $listItems=$(ev.currentTarget).parents('ul').children('li');var $moreItem=$(ev.currentTarget).parents('li');$listItems.removeClass('d-none');$moreItem.addClass('d-none');},radioClickEvent:function(ev){$(ev.currentTarget).find('input[type="radio"]').prop("checked",true);this.updateNewPaymentDisplayStatus();},});return publicWidget.registry.PaymentForm;});;

/* /payment/static/src/js/payment_processing.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('payment.processing',function(require){'use strict';var publicWidget=require('web.public.widget');var ajax=require('web.ajax');var core=require('web.core');var _t=core._t;$.blockUI.defaults.css.border='0';$.blockUI.defaults.css["background-color"]='';$.blockUI.defaults.overlayCSS["opacity"]='0.9';publicWidget.registry.PaymentProcessing=publicWidget.Widget.extend({selector:'.o_payment_processing',xmlDependencies:['/payment/static/src/xml/payment_processing.xml'],_pollCount:0,start:function(){this.displayLoading();this.poll();return this._super.apply(this,arguments);},startPolling:function(){var timeout=3000;if(this._pollCount>=10&&this._pollCount<20){timeout=10000;}
else if(this._pollCount>=20){timeout=30000;}
setTimeout(this.poll.bind(this),timeout);this._pollCount++;},poll:function(){var self=this;ajax.jsonRpc('/payment/process/poll','call',{}).then(function(data){if(data.success===true){self.processPolledData(data.transactions);}
else{switch(data.error){case"tx_process_retry":break;case"no_tx_found":self.displayContent("payment.no_tx_found",{});break;default:self.displayContent("payment.exception",{exception_msg:data.error});break;}}
self.startPolling();}).guardedCatch(function(){self.displayContent("payment.rpc_error",{});self.startPolling();});},processPolledData:function(transactions){var render_values={'tx_draft':[],'tx_pending':[],'tx_authorized':[],'tx_done':[],'tx_cancel':[],'tx_error':[],};if(transactions.length>0&&['transfer','sepa_direct_debit'].indexOf(transactions[0].acquirer_provider)>=0){window.location=transactions[0].return_url;return;}
transactions.forEach(function(tx){var key='tx_'+tx.state;if(key in render_values){render_values[key].push(tx);}});function countTxInState(states){var nbTx=0;for(var prop in render_values){if(states.indexOf(prop)>-1&&render_values.hasOwnProperty(prop)){nbTx+=render_values[prop].length;}}
return nbTx;}
if(countTxInState(['tx_done','tx_error','tx_pending','tx_authorized'])===1){var tx=render_values['tx_done'][0]||render_values['tx_authorized'][0]||render_values['tx_error'][0];if(tx){window.location=tx.return_url;return;}}
this.displayContent("payment.display_tx_list",render_values);},displayContent:function(xmlid,render_values){var html=core.qweb.render(xmlid,render_values);$.unblockUI();this.$el.find('.o_payment_processing_content').html(html);},displayLoading:function(){var msg=_t("We are processing your payment, please wait ...");$.blockUI({'message':'<h2 class="text-white"><img src="/web/static/src/img/spin.png" class="fa-pulse"/>'+'    <br />'+msg+'</h2>'});},});});;

/* /sale/static/src/js/sale_portal_sidebar.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('sale.SalePortalSidebar',function(require){'use strict';var publicWidget=require('web.public.widget');var PortalSidebar=require('portal.PortalSidebar');publicWidget.registry.SalePortalSidebar=PortalSidebar.extend({selector:'.o_portal_sale_sidebar',init:function(parent,options){this._super.apply(this,arguments);this.authorizedTextTag=['em','b','i','u'];this.spyWatched=$('body[data-target=".navspy"]');},start:function(){var def=this._super.apply(this,arguments);var $spyWatcheElement=this.$el.find('[data-id="portal_sidebar"]');this._setElementId($spyWatcheElement);this._generateMenu();if($.bbq.getState('allow_payment')==='yes'&&this.$('#o_sale_portal_paynow').length){this.$('#o_sale_portal_paynow').trigger('click');$.bbq.removeState('allow_payment');}
return def;},_setElementId:function(prefix,$el){var id=_.uniqueId(prefix);this.spyWatched.find($el).attr('id',id);return id;},_generateMenu:function(){var self=this,lastLI=false,lastUL=null,$bsSidenav=this.$el.find('.bs-sidenav');$("#quote_content [id^=quote_header_], #quote_content [id^=quote_]",this.spyWatched).attr("id","");_.each(this.spyWatched.find("#quote_content h2, #quote_content h3"),function(el){var id,text;switch(el.tagName.toLowerCase()){case"h2":id=self._setElementId('quote_header_',el);text=self._extractText($(el));if(!text){break;}
lastLI=$("<li class='nav-item'>").append($('<a class="nav-link" style="max-width: 200px;" href="#'+id+'"/>').text(text)).appendTo($bsSidenav);lastUL=false;break;case"h3":id=self._setElementId('quote_',el);text=self._extractText($(el));if(!text){break;}
if(lastLI){if(!lastUL){lastUL=$("<ul class='nav flex-column'>").appendTo(lastLI);}
$("<li class='nav-item'>").append($('<a class="nav-link" style="max-width: 200px;" href="#'+id+'"/>').text(text)).appendTo(lastUL);}
break;}});},_extractText:function($node){var self=this;var rawText=[];_.each($node.contents(),function(el){var current=$(el);if($.trim(current.text())){var tagName=current.prop("tagName");if(_.isUndefined(tagName)||(!_.isUndefined(tagName)&&_.contains(self.authorizedTextTag,tagName.toLowerCase()))){rawText.push($.trim(current.text()));}}});return rawText.join(' ');},});});;

/* /sale_management/static/src/js/sale_management.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('sale_management.sale_management',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.SaleUpdateLineButton=publicWidget.Widget.extend({selector:'.o_portal_sale_sidebar a.js_update_line_json',events:{'click':'_onClick',},start:function(){var self=this;return this._super.apply(this,arguments).then(function(){self.elems=self._getUpdatableElements();self.elems.$lineQuantity.change(function(ev){var quantity=parseInt(this.value);self._onChangeQuantity(quantity);});});},_onChangeQuantity:function(quantity){var href=this.$el.attr("href");var orderID=href.match(/my\/orders\/([0-9]+)/);var lineID=href.match(/update_line\/([0-9]+)/);var params={'line_id':parseInt(lineID[1]),'remove':this.$el.is('[href*="remove"]'),'unlink':this.$el.is('[href*="unlink"]'),'input_quantity':quantity>=0?quantity:false,};var token=href.match(/token=([\w\d-]*)/)[1];if(token){params['access_token']=token;}
orderID=parseInt(orderID[1]);this._callUpdateLineRoute(orderID,params).then(this._updateOrderValues.bind(this));},_onClick:function(ev){ev.preventDefault();return this._onChangeQuantity();},_callUpdateLineRoute:function(order_id,params){var url="/my/orders/"+order_id+"/update_line_dict";return this._rpc({route:url,params:params,});},_updateOrderValues:function(data){if(!data){window.location.reload();}
var orderAmountTotal=data.order_amount_total;var orderAmountUntaxed=data.order_amount_untaxed;var orderAmountTax=data.order_amount_tax;var orderAmountUndiscounted=data.order_amount_undiscounted;var orderTotalsTable=$(data.order_totals_table);var lineProductUomQty=data.order_line_product_uom_qty;var linePriceTotal=data.order_line_price_total;var linePriceSubTotal=data.order_line_price_subtotal;this.elems.$lineQuantity.val(lineProductUomQty);if(this.elems.$linePriceTotal.length&&linePriceTotal!==undefined){this.elems.$linePriceTotal.text(linePriceTotal);}
if(this.elems.$linePriceSubTotal.length&&linePriceSubTotal!==undefined){this.elems.$linePriceSubTotal.text(linePriceSubTotal);}
if(orderAmountUntaxed!==undefined){this.elems.$orderAmountUntaxed.text(orderAmountUntaxed);}
if(orderAmountTotal!==undefined){this.elems.$orderAmountTotal.text(orderAmountTotal);}
if(orderAmountUndiscounted!==undefined){this.elems.$orderAmountUndiscounted.text(orderAmountUndiscounted);}
if(orderTotalsTable){this.elems.$orderTotalsTable.find('table').replaceWith(orderTotalsTable);}},_getUpdatableElements:function(){var $parentTr=this.$el.parents('tr:first');var $linePriceTotal=$parentTr.find('.oe_order_line_price_total .oe_currency_value');var $linePriceSubTotal=$parentTr.find('.oe_order_line_price_subtotal .oe_currency_value');if(!$linePriceTotal.length&&!$linePriceSubTotal.length){$linePriceTotal=$linePriceSubTotal=$parentTr.find('.oe_currency_value').last();}
var $orderAmountUntaxed=$('[data-id="total_untaxed"]').find('span, b');var $orderAmountTotal=$('[data-id="total_amount"]').find('span, b');var $orderAmountUndiscounted=$('[data-id="amount_undiscounted"]').find('span, b');if(!$orderAmountUntaxed.length){$orderAmountUntaxed=$orderAmountTotal.eq(1);$orderAmountTotal=$orderAmountTotal.eq(0).add($orderAmountTotal.eq(2));}
return{$lineQuantity:this.$el.closest('.input-group').find('.js_quantity'),$linePriceSubTotal:$linePriceSubTotal,$linePriceTotal:$linePriceTotal,$orderAmountUntaxed:$orderAmountUntaxed,$orderAmountTotal:$orderAmountTotal,$orderTotalsTable:$('#total'),$orderAmountUndiscounted:$orderAmountUndiscounted,};}});});;

/* /ks_dn_advance/static/src/js/ks_website_dashboard.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('ks_dn_advance.ks_tv_website_dashboard',function(require){var KsDashboardNinjaWebsite=require('ks_website_dashboard_ninja.ks_website_dashboard');var core=require('web.core');var QWeb=core.qweb;var ajax=require('web.ajax');var _t=core._t;ajax.loadXML('/ks_dn_advance/static/src/xml/ks_dashboard_tv_ninja.xml',QWeb);ajax.loadXML('/ks_dn_advance/static/src/xml/ks_query_templates.xml',QWeb);if(KsDashboardNinjaWebsite){KsDashboardNinjaWebsite.include({_renderListView:function(item,grid){var ks_self=this;var list_view_data=JSON.parse(item.ks_list_view_data);var item_id=item.id,pager=true,data_rows=list_view_data.data_rows,length=data_rows?data_rows.length:0,item_title=item.name;if(item.ks_data_calculation_type&&item.ks_data_calculation_type==='query'){pager=true;}
var $ksItemContainer=ks_self._renderListViewData(item)
var $ks_gridstack_container=$(QWeb.render('ks_gridstack_list_view_container',{ks_chart_title:item_title,ksIsDashboardManager:ks_self.config.ks_dashboard_manager,ks_dashboard_list:ks_self.config.ks_dashboard_list,item_id:item_id,count:'1-'+length,offset:1,intial_count:length,ks_pager:pager,calculation_type:item.ks_data_calculation_type,})).addClass('ks_dashboarditem_id');if(item.ks_pagination_limit<length){$ks_gridstack_container.find('.ks_load_next').addClass('ks_event_offer_list');}
if(length<item.ks_pagination_limit){$ks_gridstack_container.find('.ks_load_next').addClass('ks_event_offer_list');}
if(item.ks_record_data_limit===item.ks_pagination_limit){$ks_gridstack_container.find('.ks_load_next').addClass('ks_event_offer_list');}
if(length==0){$ks_gridstack_container.find('.ks_pager').addClass('d-none');}
if(item.ks_pagination_limit==0){$ks_gridstack_container.find('.ks_pager_name').addClass('d-none');}
$ks_gridstack_container.find('.card-body').append($ksItemContainer);item.$el=$ks_gridstack_container;if(item_id in ks_self.gridstackConfig){grid.addWidget($ks_gridstack_container[0],{x:ks_self.gridstackConfig[item_id].x,y:ks_self.gridstackConfig[item_id].y,w:ks_self.gridstackConfig[item_id].w,h:ks_self.gridstackConfig[item_id].h,autoPosition:false,minW:3,maxW:null,minH:3,maxH:null,id:item_id});}else{grid.addWidget($ks_gridstack_container[0],{x:0,y:0,w:5,h:4,autoPosition:true,minW:3,maxW:null,minH:3,maxH:null,id:item_id});}},_renderListViewData:function(item){var ks_self=this;var list_view_data=JSON.parse(item.ks_list_view_data);var item_id=item.id,data_rows=list_view_data.data_rows,item_title=item.name;if(item.ks_list_view_type==="ungrouped"&&list_view_data){if(list_view_data.date_index){var index_data=list_view_data.date_index;for(var i=0;i<index_data.length;i++){for(var j=0;j<list_view_data.data_rows.length;j++){var index=index_data[i]
var date=list_view_data.data_rows[j]["data"][index]
if(date){if(list_view_data.fields_type[index]==='date'){list_view_data.data_rows[j]["data"][index]=moment(new Date(date+" UTC")).format(this.date_format),{},{timezone:false};}else{list_view_data.data_rows[j]["data"][index]=moment(new Date(date+" UTC")).format(this.datetime_format),{},{timezone:false};}}else{list_view_data.data_rows[j]["data"][index]="";}}}}}
if(list_view_data){for(var i=0;i<list_view_data.data_rows.length;i++){for(var j=0;j<list_view_data.data_rows[0]["data"].length;j++){if(typeof(data_rows[i].data[j])==="number"||list_view_data.data_rows[i].data[j]){if(typeof(list_view_data.data_rows[i].data[j])==="number"){list_view_data.data_rows[i].data[j]=ks_self.ksFormatValue(data_rows[i].data[j],'float',item.ks_precision_digits);}}else{list_view_data.data_rows[i].data[j]="";}}}}
var template;switch(item.ks_list_view_layout){case'layout_1':template='ks_list_view_table';break;case'layout_2':template='ks_list_view_layout_2';break;case'layout_3':template='ks_list_view_layout_3';break;case'layout_4':template='ks_list_view_layout_4';break;default:template='ks_list_view_table';break;}
ks_data_calculation_type=ks_self.config.ks_item_data[item_id].ks_data_calculation_type
var $ksItemContainer=$(QWeb.render(template,{list_view_data:list_view_data,item_id:item_id,list_type:item.ks_list_view_type,calculation_type:ks_data_calculation_type,isDrill:ks_self.config.ks_item_data[item_id]['isDrill']}));$ksItemContainer.find('.ks_sort_icon').addClass('d-none')
if(list_view_data){var $ksitemBody=this.ksListViewBody(list_view_data,item_id)
$ksItemContainer.find('.ks_table_body').append($ksitemBody)}
if(item.ks_list_view_type==="ungrouped"&&item.ks_data_calculation_type==='custom'){$ksItemContainer.find('.ks_list_canvas_click').removeClass('ks_list_canvas_click');}
$ksItemContainer.find('#ks_item_info').hide();return $ksItemContainer},});}
return KsDashboardNinjaWebsite});